{"status":{"description":"","state":"ACTIVE","message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"61534f2e-d2d2-49ed-9567-4f7c982a21e2","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"202081c5-ee84-40bf-87f8-506ea4a04ddc","child_tasks_local_reference_list":[{"kind":"app_task","name":"ConfigureFirewall","uuid":"53d69d42-10b9-4d2e-8eeb-91e02a8d8109"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8c0b7aac_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"53d69d42-10b9-4d2e-8eeb-91e02a8d8109","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"print \"Palo Alto Networks VM Configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False, timeout=30)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN-OS API configuration failed\",r.content\n    exit(1)\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{admin.username}@@', 'password': '@@{admin.secret}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n\n#Get serial number\n\npayload = {'type': 'version', 'key':key}\nserial_data = postrequest(api_url=url1,payload=payload)\nserial_no = serial_data.split('<serial>')[1].split('<\/serial>')[0]\nprint \"Serial no. of Palo Alto Firewall is:\",serial_no\n\n\nprint \"Adding the firewall to Panorama\"\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Attach device to Panorama\ndevice_attach = device_attach = \"\/config\/mgt-config\/devices\/entry[@name='\"+serial_no+\"']\"\n\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_attach, 'element':\"<vsys\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Attach device to device group\n\nprint \"Associating VMs to Panorama Device Group\"\n\ndevice_group = \"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\/devices\/entry[@name='\" + serial_no + \"']\"\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_group, 'element':\"<vsys\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Attach device to template stack\n\nprint \"Associating VMs to Panorama Template and Template Stack\"\n\ntemplate_stack = \"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\/devices\/entry[@name='\"+serial_no+\"']\"\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':template_stack, 'element':\"<variable\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#commit and Push the changes\npayload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(120)\n\n#Set device to auto push to receive updates\ndevice_attach = device_attach = \"\/config\/mgt-config\/devices\/entry[@name='\"+serial_no+\"']\"\n\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_attach, 'element':\"<auto-push>yes<\/auto-push>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#commit and Push the changes\npayload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigureFirewall"}],"description":"","message_list":[],"uuid":"af67bb29-c195-4572-9fdf-484b135d5f92","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8c0b7aac_dag_cloned_1","uuid":"202081c5-ee84-40bf-87f8-506ea4a04ddc"},"name":"e336f5a5_runbook_cloned_0"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"87746bb8-684f-4b2a-bf7c-f1642ebb281b","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"34c9b5a5-73d6-41f6-9bb1-322a72a6292b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"9c114dea_dag_cloned_1"}],"description":"","message_list":[],"uuid":"342c1005-ccef-4b66-879e-21c122f80acf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9c114dea_dag_cloned_1","uuid":"34c9b5a5-73d6-41f6-9bb1-322a72a6292b"},"name":"bc52929d_runbook_cloned_0"}},{"description":"System action for starting an application","message_list":[],"uuid":"a579658a-ddb7-4c8d-8a62-46656759ce26","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"929628b4-fc20-44ea-889c-8fbe1c45e481","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6aaef5c4_dag_cloned_1"}],"description":"","message_list":[],"uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6aaef5c4_dag_cloned_1","uuid":"929628b4-fc20-44ea-889c-8fbe1c45e481"},"name":"6664cdf0_runbook_cloned_0"}},{"description":"System action for stopping an application","message_list":[],"uuid":"d16f155d-4f18-4113-b39b-e3d9305c2675","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"b2104db3-f1d6-4680-8189-42367de7c1ab","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"44b9e532_dag_cloned_1"}],"description":"","message_list":[],"uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"44b9e532_dag_cloned_1","uuid":"b2104db3-f1d6-4680-8189-42367de7c1ab"},"name":"850d536e_runbook_cloned_0"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ab4e95f9-b9fd-4e60-87ea-6a29313675b1","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"e3ec7f65-5aae-47b4-a92e-3e94ac455164","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3bbf6d30_dag_cloned_1"}],"description":"","message_list":[],"uuid":"0e528e37-010f-420d-bdbc-0739188652fd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3bbf6d30_dag_cloned_1","uuid":"e3ec7f65-5aae-47b4-a92e-3e94ac455164"},"name":"3b4902aa_runbook_cloned_0"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"3e52fdbe-5f6b-4f3d-b48c-a1b2682bd16b","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"DAG","uuid":"91be0703-2088-4c3f-ad67-47959db68e5a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"699b8c4d-951e-425f-81b1-ca474c972ab6"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"699b8c4d-951e-425f-81b1-ca474c972ab6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"01e8dae3-86fd-4ca9-9ff5-3b3522b9fb12","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"91be0703-2088-4c3f-ad67-47959db68e5a"},"name":"SYS_GEN__Runbook_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}}],"message_list":[],"uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[],"name":"PaloAlto"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","message_list":[],"uuid":"ce2d8823-8cc9-4b25-9c14-7ad544a814f3","name":"pre_action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"bc002959-f737-46ba-b27e-f4079c2e448e","child_tasks_local_reference_list":[{"kind":"app_task","name":"GenerateNumber","uuid":"bea9c8ff-3e4a-4cc7-b341-a4adc97a52df"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"acf0981a_dag"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"bea9c8ff-3e4a-4cc7-b341-a4adc97a52df","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"print \"NUM=%02d\" % (int(@@{calm_array_index}@@)+1,)","eval_variables":["NUM"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GenerateNumber"}],"description":"","message_list":[],"uuid":"8435fb4d-4de0-4d41-9924-b1b3b479f4c5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"acf0981a_dag","uuid":"bc002959-f737-46ba-b27e-f4079c2e448e"},"name":"6b1e4203_runbook"}},{"description":"","message_list":[],"uuid":"9e549108-fc48-4db4-bb50-bddf5bba0368","name":"post_action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"35ad56a0-9997-4bfc-9f0f-42928e18e3d0","child_tasks_local_reference_list":[{"kind":"app_task","name":"DeleteCategoriesNFChain","uuid":"5416b9cf-a31f-4c77-a05e-9a3b62562bab"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"cb997dd5_dag"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"EXEC","uuid":"5416b9cf-a31f-4c77-a05e-9a3b62562bab","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"prism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n\n\ndef deleteconfig(api_url):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\n  if r.ok:\n    return r\n  else:\n    print \"Delete request failed\", r.content\n    \n\nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_exists = False\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nif len(nf_list['entities']) > 0:\n  for i in nf_list['entities']:\n    if i['status']['name'] == nf_chain_name:\n      nf_exists = True\n      nf_uuid = i['metadata']['uuid']\n      break\n\n    \nprint \"Deleting service chain\"\nif nf_exists and @@{calm_array_index}@@ == 0:\n  service_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/{1}'.format(prism_ip, nf_uuid)\n  deleteconfig(api_url=service_chain_api)\n\nsleep(30)\n\nprint \"Delete @@{platform.metadata.categories.network_function_provider}@@ network function provider category\"\ncategory_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider\/@@{platform.metadata.categories.network_function_provider}@@'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=category_api)\n\n\nprint \"Deleting network function provider category\"\ncategorykey_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=categorykey_api)\n\n\n    \n\n\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"DeleteCategoriesNFChain"}],"description":"","message_list":[],"uuid":"d4bfb569-59c1-476e-a413-2d263efac6b0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"cb997dd5_dag","uuid":"35ad56a0-9997-4bfc-9f0f-42928e18e3d0"},"name":"8ea1ed98_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"c258289c-55bc-4c06-abbc-ccff9f96527f","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"9dbba64a-435d-4277-809a-baa4fd32351b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"845cf0cb-ffd5-44c4-b7f4-887b9436c356"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"9fb9bfba-491e-49ee-a626-51e342c67b84"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"845cf0cb-ffd5-44c4-b7f4-887b9436c356"},"edge_type":"inherent","type":"","uuid":"369cd850-2893-41e6-8b66-90bbb17040f8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"9fb9bfba-491e-49ee-a626-51e342c67b84"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"845cf0cb-ffd5-44c4-b7f4-887b9436c356","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"PaloAlto-@@{NUM}@@","categories":{"network_function_provider":"PaloAlto"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0c20f8cd-5f5c-4817-ba50-534902860bc4"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","subnet_reference":null,"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[{"index":0,"type":"","is_connected":true}],"gpu_list":[],"memory_size_mib":9216,"power_state":"ON","hardware_clock_timezone":"","guest_customization":null,"type":"","account_uuid":"32f41150-970c-4a92-9fec-0f144eb42fdd","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"PA-8.1.3","uuid":"66f42aee-9f5e-4c54-be87-286ebbfde7cb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"panboot.iso","uuid":"769ca9d5-1bdf-4255-a095-c29cda2f5ac5"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"9fb9bfba-491e-49ee-a626-51e342c67b84","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"de35cf46-cbd5-43e8-aae0-9d1ab0215851","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"9dbba64a-435d-4277-809a-baa4fd32351b"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for powering on an application","message_list":[],"uuid":"3bd212b3-b4ce-4f83-b85e-aea64daac343","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"0e8c0d04-1bc1-4724-80e7-f7186559bd5a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"d8662697-f6b9-4f27-a67b-ffa080147faa"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"28270618-3bd7-44ed-b188-bc6c545c2ab8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"d8662697-f6b9-4f27-a67b-ffa080147faa"},"edge_type":"inherent","type":"","uuid":"93d22df0-96c3-4a7e-bfc2-e74de2993d97","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"28270618-3bd7-44ed-b188-bc6c545c2ab8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"d8662697-f6b9-4f27-a67b-ffa080147faa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"28270618-3bd7-44ed-b188-bc6c545c2ab8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"3157be0c-e84b-4bf5-8049-ec53be2404ef","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"0e8c0d04-1bc1-4724-80e7-f7186559bd5a"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for restarting an application","message_list":[],"uuid":"fecab9f8-9681-405c-b9b4-9833dfa0d47b","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"ab80b63d-68f2-434f-92c5-80dcb68c1c3e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"0b23cac8-a062-4f5b-9d87-8eb109a47a7b"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"5ed53568-227c-438a-8468-4d0e3937d616"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"0b23cac8-a062-4f5b-9d87-8eb109a47a7b"},"edge_type":"inherent","type":"","uuid":"36bec9c7-c366-468b-b623-360950f8ec41","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"5ed53568-227c-438a-8468-4d0e3937d616"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"0b23cac8-a062-4f5b-9d87-8eb109a47a7b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"5ed53568-227c-438a-8468-4d0e3937d616","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"dabee45b-1133-4df1-b504-58f738cf1c79","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"ab80b63d-68f2-434f-92c5-80dcb68c1c3e"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for suspending an application","message_list":[],"uuid":"fd474507-9c4f-4ceb-ba8d-efcca540d648","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"82e7dd5c-df4e-4cf4-9528-c7c363596104","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"4824ec58-90af-47a5-bede-2687961073a0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"82e7dd5c-df4e-4cf4-9528-c7c363596104"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for modifying an application","message_list":[],"uuid":"f6bd7e64-fd79-416a-bd7a-217482f9b532","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"bb3b799c-77c0-4f2f-a4e3-2a7536e39917","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"271172a6-f553-4a43-836e-a2476a2d8267","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"bb3b799c-77c0-4f2f-a4e3-2a7536e39917"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for powering off an application","message_list":[],"uuid":"e0ea8221-0de1-4ed2-bebf-b7fca89c659c","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"d6602c49-0949-44d9-8b7a-934555b8c34f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"b7262d1b-e25a-4ed6-9e11-0612c326135e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"b7262d1b-e25a-4ed6-9e11-0612c326135e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"3cebebbe-6f40-4e33-8aa3-1d14514b527e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"d6602c49-0949-44d9-8b7a-934555b8c34f"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f5f4f291-895f-4f6b-b1a5-1f82f52d5495","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"b94ada22-87d1-44ce-898c-37d09bbdb122","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4c964234-0cdb-48ec-a6d9-e34d421e5544"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"4c964234-0cdb-48ec-a6d9-e34d421e5544","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"4aa41889-45e5-4755-9f7c-d68da7b1b7fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"b94ada22-87d1-44ce-898c-37d09bbdb122"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"2cdc6c39-efbe-4a58-afb7-072727f101ad","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"DAG","uuid":"c2ed1f63-d0fd-41e1-89d9-43ccccbc6892","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Soft_Delete_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"e9288142-6bc6-4584-8d16-fe1656ee2cb5"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"SOFT_DELETE_NUTANIX","uuid":"e9288142-6bc6-4584-8d16-fe1656ee2cb5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Soft_Delete_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"f2e80c3a-61ce-4d93-b458-a5970525edda","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"c2ed1f63-d0fd-41e1-89d9-43ccccbc6892"},"name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}}],"message_list":[],"uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","disable_readiness_probe":true,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"900","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"a780c674-5849-40d0-ac5c-e93aefd5c71e"}},"editables":{"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"boot_config":true,"disk_list":{"1":{"data_source_reference":true},"0":{"data_source_reference":true}}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"PaloAlto-@@{NUM}@@","categories":{"network_function_provider":"PaloAlto"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0c20f8cd-5f5c-4817-ba50-534902860bc4"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","subnet_reference":null,"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[{"index":0,"type":"","is_connected":true}],"gpu_list":[],"memory_size_mib":9216,"power_state":"ON","hardware_clock_timezone":"","guest_customization":null,"type":"","account_uuid":"32f41150-970c-4a92-9fec-0f144eb42fdd","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"PA-8.1.3","uuid":"66f42aee-9f5e-4c54-be87-286ebbfde7cb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"panboot.iso","uuid":"769ca9d5-1bdf-4255-a095-c29cda2f5ac5"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}}]}},"variable_list":[],"name":"PaloAltoVM"}],"credential_definition_list":[{"username":"admin","description":"","state":"ACTIVE","uuid":"a780c674-5849-40d0-ac5c-e93aefd5c71e","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"admin"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"ae21b6f2-d4a3-4681-aa02-5cf735d4f483","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"91578d2b-da21-44ed-9f9f-5ac7b8168a30","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"044429c8-bc92-4dfc-82f0-a91a6467cb6d"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"245056bf-e172-4c1d-88aa-43092a97a530"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"28955f93-c4d8-48a0-bb8c-168648c2925c"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"d3144d07-59dd-45ec-85a2-225365f143ae"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"ec362499-6e78-4107-869e-049ed2411842"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"baee9ba3-e62c-4e4d-b989-bb44db2efd5b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"245056bf-e172-4c1d-88aa-43092a97a530"},"edge_type":"inherent","type":"","uuid":"254fbf28-a056-45e8-9da8-99cacc653744","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"28955f93-c4d8-48a0-bb8c-168648c2925c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"ec362499-6e78-4107-869e-049ed2411842"},"edge_type":"inherent","type":"","uuid":"1f15cae3-307b-47d9-ae4c-a64e74769f33","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"baee9ba3-e62c-4e4d-b989-bb44db2efd5b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"d3144d07-59dd-45ec-85a2-225365f143ae"},"edge_type":"inherent","type":"","uuid":"9931ad45-ef38-45c4-ba91-ddd63905bcc5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"ec362499-6e78-4107-869e-049ed2411842"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"044429c8-bc92-4dfc-82f0-a91a6467cb6d"},"edge_type":"inherent","type":"","uuid":"de3a634f-e853-4317-8a48-5eb1071d8b43","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"245056bf-e172-4c1d-88aa-43092a97a530"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"28955f93-c4d8-48a0-bb8c-168648c2925c"},"edge_type":"inherent","type":"","uuid":"22164580-5a6d-4305-8ec0-56e503170df6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"d3144d07-59dd-45ec-85a2-225365f143ae"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"044429c8-bc92-4dfc-82f0-a91a6467cb6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"245056bf-e172-4c1d-88aa-43092a97a530","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6b1e4203_runbook","uuid":"8435fb4d-4de0-4d41-9924-b1b3b479f4c5"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"28955f93-c4d8-48a0-bb8c-168648c2925c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"de35cf46-cbd5-43e8-aae0-9d1ab0215851"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d3144d07-59dd-45ec-85a2-225365f143ae","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"30cda17a-3e97-4eda-ac71-cc0b61aab496"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ec362499-6e78-4107-869e-049ed2411842","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"af67bb29-c195-4572-9fdf-484b135d5f92"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"baee9ba3-e62c-4e4d-b989-bb44db2efd5b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"fd2f5482-7c4e-41f1-9e2c-045c6f0d2376","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"91578d2b-da21-44ed-9f9f-5ac7b8168a30"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for starting an application","message_list":[],"uuid":"b395181b-b235-48b5-b115-4b66bc630dbb","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"69e765e4-426e-45af-9e79-d4a130014f25","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"ca196460-1664-4291-8aa0-ffd5f5f44512"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"766a0a3e-d61b-4694-b174-a432d341a414"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"ca196460-1664-4291-8aa0-ffd5f5f44512"},"edge_type":"inherent","type":"","uuid":"0ec5f064-b15c-4b69-ae13-dfc30bab6a41","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"766a0a3e-d61b-4694-b174-a432d341a414"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ca196460-1664-4291-8aa0-ffd5f5f44512","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"3157be0c-e84b-4bf5-8049-ec53be2404ef"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"766a0a3e-d61b-4694-b174-a432d341a414","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"b83059da-aa50-4d76-be84-81bfce7fa7fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"69e765e4-426e-45af-9e79-d4a130014f25"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for restarting an application","message_list":[],"uuid":"dcf489a3-8a4b-45d3-a32f-d9e892b2b0e1","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"5de1aaa8-8a0c-4657-af9c-edaa24615542","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"c271ccb0-8ed2-4b7a-9840-6718793d112b"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"36b72b73-8391-4d27-b0de-7cb8068d5abc"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"c271ccb0-8ed2-4b7a-9840-6718793d112b"},"edge_type":"inherent","type":"","uuid":"203efb6f-16d1-4257-96d0-5754f1cf5ceb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"36b72b73-8391-4d27-b0de-7cb8068d5abc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c271ccb0-8ed2-4b7a-9840-6718793d112b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"dabee45b-1133-4df1-b504-58f738cf1c79"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"36b72b73-8391-4d27-b0de-7cb8068d5abc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"0e528e37-010f-420d-bdbc-0739188652fd"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"513a71a7-1bf6-4093-af23-9f02cc13b544","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"5de1aaa8-8a0c-4657-af9c-edaa24615542"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for stopping an application","message_list":[],"uuid":"c5b219a8-1997-464c-9b37-2be5c9c54be5","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"dc634c82-7042-466e-b957-f046d600def4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"f2aa2d6f-27e3-4276-9020-3d18a4c0e69f"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"55966e32-16ce-425b-b2c8-4b30f5e88bba"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"f2aa2d6f-27e3-4276-9020-3d18a4c0e69f"},"edge_type":"inherent","type":"","uuid":"4f1b0de6-67dc-4a24-8bcf-33e0b62a8ceb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"55966e32-16ce-425b-b2c8-4b30f5e88bba"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f2aa2d6f-27e3-4276-9020-3d18a4c0e69f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"55966e32-16ce-425b-b2c8-4b30f5e88bba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"3cebebbe-6f40-4e33-8aa3-1d14514b527e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"fbec9540-6a59-46e7-8b0d-fd65c1b0a0bf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"dc634c82-7042-466e-b957-f046d600def4"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"03986801-62b1-4ef4-9ee6-d8b1d39732a5","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"bc465b2d-0a95-488e-b0d4-2f1260e04764","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"dbf2df4f-e7e6-4d5e-8007-197c675fff98"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"472c37f9-aa15-4ca3-bd60-3d2ba8802e79"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"dd75355a-b961-429b-8c9c-a9a21e69a3cf"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"b6d9d544-b0d8-4edf-9b9c-0693bf60dd58"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4a1b88b3-bc31-460d-bf5e-302dc5381be6"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"b4a6bdf0-57b4-448f-a1f7-85d15379cd43"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"b6d9d544-b0d8-4edf-9b9c-0693bf60dd58"},"edge_type":"inherent","type":"","uuid":"06502ba3-8d37-4968-aa4c-6e62c7f34894","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4a1b88b3-bc31-460d-bf5e-302dc5381be6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"dbf2df4f-e7e6-4d5e-8007-197c675fff98"},"edge_type":"inherent","type":"","uuid":"40b7e42c-1d12-45c4-98f0-ca19c8e450f3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"472c37f9-aa15-4ca3-bd60-3d2ba8802e79"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"472c37f9-aa15-4ca3-bd60-3d2ba8802e79"},"edge_type":"inherent","type":"","uuid":"12d2d34b-a97f-4e1a-971f-b3076c37559f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"dd75355a-b961-429b-8c9c-a9a21e69a3cf"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4a1b88b3-bc31-460d-bf5e-302dc5381be6"},"edge_type":"inherent","type":"","uuid":"f12c1c5d-a576-43e9-8191-8f16b039c4b4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"b4a6bdf0-57b4-448f-a1f7-85d15379cd43"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"dd75355a-b961-429b-8c9c-a9a21e69a3cf"},"edge_type":"inherent","type":"","uuid":"f8e1bc2a-f376-406c-aa39-03ba84275e0d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"b6d9d544-b0d8-4edf-9b9c-0693bf60dd58"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"dbf2df4f-e7e6-4d5e-8007-197c675fff98","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"472c37f9-aa15-4ca3-bd60-3d2ba8802e79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"342c1005-ccef-4b66-879e-21c122f80acf"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"dd75355a-b961-429b-8c9c-a9a21e69a3cf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"4c30c8eb-c21a-40df-822f-99827307197c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b6d9d544-b0d8-4edf-9b9c-0693bf60dd58","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4aa41889-45e5-4755-9f7c-d68da7b1b7fa"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4a1b88b3-bc31-460d-bf5e-302dc5381be6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8ea1ed98_runbook","uuid":"d4bfb569-59c1-476e-a413-2d263efac6b0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"b4a6bdf0-57b4-448f-a1f7-85d15379cd43","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"f1b21690-a324-42f8-a944-88bb3de9aa04","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"bc465b2d-0a95-488e-b0d4-2f1260e04764"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for scaleout","message_list":[],"uuid":"e977c2b4-9a42-4502-9f10-8cb8f4dcd833","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"26c104d4-af4e-4712-9a9d-759726b8d761","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"2b46e461-c774-4287-9db1-8bc1748a1c71"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SCALING","uuid":"2b46e461-c774-4287-9db1-8bc1748a1c71","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"8cbeb269-e3fd-4d93-b24c-ca1d8ae44c6f","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f5c58756-a6b9-469d-8bbb-f1508a35268e","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"26c104d4-af4e-4712-9a9d-759726b8d761"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for scalein","message_list":[],"uuid":"0f5beb7e-623c-4947-8ab6-50e2e5d037a7","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"2304b6e2-a67b-4539-b35f-de5375d16edd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"86c0bb32-63f4-4d37-b6d0-ba7b85fa35a3"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SCALING","uuid":"86c0bb32-63f4-4d37-b6d0-ba7b85fa35a3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"39886d13-176c-453d-b503-324a2133d195","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"fc98ae6b-f0ee-4bf8-8c80-2e6d59daaffc","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"2304b6e2-a67b-4539-b35f-de5375d16edd"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ad371158-05be-45de-a78a-8000901bb484","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DAG","uuid":"800e5680-e822-458e-8d86-453fff7318b6","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"45a04c4b-dd02-4853-995b-e987c50124e5"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"15e9301d-3d14-45f6-bde8-a01b8e89210a"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"e3366af2-8613-4799-9f28-c280a1127dbc"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"c0a8a206-545a-459c-a82f-3b63ab5b465f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"45a04c4b-dd02-4853-995b-e987c50124e5"},"edge_type":"inherent","type":"","uuid":"354e1df8-49ee-4ee6-89e6-de814a8fdebe","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"15e9301d-3d14-45f6-bde8-a01b8e89210a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"e3366af2-8613-4799-9f28-c280a1127dbc"},"edge_type":"inherent","type":"","uuid":"04057e29-888b-4099-9bb6-18e4860a6db8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"c0a8a206-545a-459c-a82f-3b63ab5b465f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"15e9301d-3d14-45f6-bde8-a01b8e89210a"},"edge_type":"inherent","type":"","uuid":"2ce152de-afa5-49b6-9618-04562671d778","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"e3366af2-8613-4799-9f28-c280a1127dbc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"45a04c4b-dd02-4853-995b-e987c50124e5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"01e8dae3-86fd-4ca9-9ff5-3b3522b9fb12"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"15e9301d-3d14-45f6-bde8-a01b8e89210a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e3366af2-8613-4799-9f28-c280a1127dbc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"f2e80c3a-61ce-4d93-b458-a5970525edda"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"c0a8a206-545a-459c-a82f-3b63ab5b465f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"9933d2b9-5d23-4d00-b48f-21af20a597b5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"800e5680-e822-458e-8d86-453fff7318b6"},"name":"SYS_GEN__Runbook_Deployment_db5149a2_3289_4e65_9bf5_4a312e910c89"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89","default_replicas":"@@{COUNT}@@","min_replicas":"@@{COUNT}@@","state":"ACTIVE","max_replicas":"99","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"}],"substrate_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"85789db9_deployment_cloned_0"}],"description":"","action_list":[{"description":"This action is used to scaleup the no of palo alto vms on the cluster","message_list":[],"uuid":"6ab0249f-fdbb-49d7-ab3b-af2fdf8df0e1","name":"ScaleUp","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"85e24493-9275-433d-be82-e2c71ab04e0c","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOut","uuid":"c783bb09-5d6c-4420-ad27-7eb9e7b26d82"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"47593285_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SCALING","uuid":"c783bb09-5d6c-4420-ad27-7eb9e7b26d82","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{SCALEOUT_COUNT}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ScaleOut"}],"description":"","message_list":[],"uuid":"9519264c-ea3f-40ad-ac5b-c9544adc3b71","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b2d8ea91-2027-48bd-8980-12bdb0b0c005","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"SCALEOUT_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"47593285_dag","uuid":"85e24493-9275-433d-be82-e2c71ab04e0c"},"name":"e47f3869_runbook"}},{"description":"This action is used to scale down the no of palo alto vms on the cluster","message_list":[],"uuid":"be0cf7c1-1f89-4f99-84e6-17a6dc2a7209","name":"ScaleDown","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"67451e22-d3f1-40b1-b3c8-e04867368cae","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleIn","uuid":"c6f031f2-0d0f-43f3-9a8a-16182ca0bf10"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6e05e2e2_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SCALING","uuid":"c6f031f2-0d0f-43f3-9a8a-16182ca0bf10","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{SCALEIN_COUNT}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ScaleIn"}],"description":"","message_list":[],"uuid":"af3019a4-a82d-4abd-a885-646b37e16160","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"3283a698-b7e5-4e5d-b4c8-ff88baf07b02","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"SCALEIN_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"6e05e2e2_dag","uuid":"67451e22-d3f1-40b1-b3c8-e04867368cae"},"name":"aa73d797_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"55209068-8bcc-40ff-90a9-f356b2386cf8","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"2c986668-4107-466b-bdd5-9aea2326d640","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"a783d218-ccfe-461b-8fb2-f3bb90385f35"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"5d7fb76c-3301-4357-bdb8-ef4cea9868d5"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"7807b5be-7d63-4ff7-ab94-509d4733d47d"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"3ea83c5c-03aa-4c5c-a705-90ebdee2f758"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"1d876d06-931d-4004-8f27-9c5dce48c2ef"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"02ec9731-4105-45eb-938f-cdb161891425"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"5d7fb76c-3301-4357-bdb8-ef4cea9868d5"},"edge_type":"inherent","type":"","uuid":"37cfa0c0-ea19-4747-9918-5ee69d3364a2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"7807b5be-7d63-4ff7-ab94-509d4733d47d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"1d876d06-931d-4004-8f27-9c5dce48c2ef"},"edge_type":"inherent","type":"","uuid":"d0ca5a98-109f-4aad-ac81-8c78950eefa4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"02ec9731-4105-45eb-938f-cdb161891425"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"3ea83c5c-03aa-4c5c-a705-90ebdee2f758"},"edge_type":"inherent","type":"","uuid":"18b29bcc-0528-43bc-8709-a37523c3a306","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"1d876d06-931d-4004-8f27-9c5dce48c2ef"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"a783d218-ccfe-461b-8fb2-f3bb90385f35"},"edge_type":"inherent","type":"","uuid":"cf88bd50-7f73-42f3-ad6f-d5ee3d60f10f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"5d7fb76c-3301-4357-bdb8-ef4cea9868d5"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"7807b5be-7d63-4ff7-ab94-509d4733d47d"},"edge_type":"inherent","type":"","uuid":"ba6faf0f-1feb-41cc-ab42-d8dc50c131c5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"3ea83c5c-03aa-4c5c-a705-90ebdee2f758"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"a783d218-ccfe-461b-8fb2-f3bb90385f35","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_db5149a2_3289_4e65_9bf5_4a312e910c89"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5d7fb76c-3301-4357-bdb8-ef4cea9868d5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6b1e4203_runbook","uuid":"8435fb4d-4de0-4d41-9924-b1b3b479f4c5"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7807b5be-7d63-4ff7-ab94-509d4733d47d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"de35cf46-cbd5-43e8-aae0-9d1ab0215851"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3ea83c5c-03aa-4c5c-a705-90ebdee2f758","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"30cda17a-3e97-4eda-ac71-cc0b61aab496"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1d876d06-931d-4004-8f27-9c5dce48c2ef","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"af67bb29-c195-4572-9fdf-484b135d5f92"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"02ec9731-4105-45eb-938f-cdb161891425","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"309e1029-9ea1-46e8-9ffe-55c604db9be2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"2c986668-4107-466b-bdd5-9aea2326d640"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}},{"description":"System action for starting an application","message_list":[],"uuid":"3ac0cf37-136c-4467-8eaa-2b7502ff6db0","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"07a51c93-f280-46a2-a816-ca2f4cf32f91","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"bea14fd3-414a-43d2-94a2-e2a566ee645e"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"97132cbb-866f-4c28-9c0a-eeb19ced7562"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"bea14fd3-414a-43d2-94a2-e2a566ee645e"},"edge_type":"inherent","type":"","uuid":"1001ea07-7818-4369-87e8-6b7eb39b3c7c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"97132cbb-866f-4c28-9c0a-eeb19ced7562"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bea14fd3-414a-43d2-94a2-e2a566ee645e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"3157be0c-e84b-4bf5-8049-ec53be2404ef"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"97132cbb-866f-4c28-9c0a-eeb19ced7562","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"9eba11e2-d5fc-42b7-99c0-4c0071e3e342","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"07a51c93-f280-46a2-a816-ca2f4cf32f91"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}},{"description":"System action for restarting an application","message_list":[],"uuid":"552bed02-9111-42b1-9067-ff33a906977e","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"e351077d-4087-4034-86f9-265d23791d59","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"72b83fb3-e3be-4c1c-8543-2c38935e5458"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"105f8511-414c-412d-ba96-a29d7145a381"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"72b83fb3-e3be-4c1c-8543-2c38935e5458"},"edge_type":"inherent","type":"","uuid":"98785c47-4289-4c21-8a6d-fdd565941a0e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"105f8511-414c-412d-ba96-a29d7145a381"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"72b83fb3-e3be-4c1c-8543-2c38935e5458","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"dabee45b-1133-4df1-b504-58f738cf1c79"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"105f8511-414c-412d-ba96-a29d7145a381","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"0e528e37-010f-420d-bdbc-0739188652fd"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"107f5bbb-bf58-47ce-a411-950e7887e872","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"e351077d-4087-4034-86f9-265d23791d59"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}},{"description":"System action for stopping an application","message_list":[],"uuid":"df7cd18d-ec27-40c3-8a91-d6550f77ee76","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"81277663-adbf-42cc-9f81-0a8c6f66fb88","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"75ad7730-7657-4ff2-aa7c-6534d38b09e5"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"320959a1-25b9-4fa7-924f-e2ff4c173bab"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"75ad7730-7657-4ff2-aa7c-6534d38b09e5"},"edge_type":"inherent","type":"","uuid":"bcd794c4-310e-4f39-a32f-a52ced900f9e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"320959a1-25b9-4fa7-924f-e2ff4c173bab"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"75ad7730-7657-4ff2-aa7c-6534d38b09e5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"320959a1-25b9-4fa7-924f-e2ff4c173bab","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"3cebebbe-6f40-4e33-8aa3-1d14514b527e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"}],"description":"","message_list":[],"uuid":"ebb92b12-384a-40e7-a8e5-f0a3326b5c91","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"81277663-adbf-42cc-9f81-0a8c6f66fb88"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"0e6a94cd-175d-4eb0-a3e5-a2758732795c","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"4aab7dd1-b205-4e33-8f30-4dfe8cb6213b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"9372df10-2431-4e2a-bee5-a40deb449585"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"cc176bfe-73e4-4083-93da-aac12578da82"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"34ecf9ec-93cb-4b09-beb0-2efa797cddb8"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"61396546-51ce-41dc-9e42-8629f067c2ed"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4aac8ceb-2307-4756-ac11-bed36d066f43"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"7c20c86e-613d-4c0f-b978-1464c7c59902"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"61396546-51ce-41dc-9e42-8629f067c2ed"},"edge_type":"inherent","type":"","uuid":"712e0ee6-605a-4744-9df4-f3ee26c441c2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4aac8ceb-2307-4756-ac11-bed36d066f43"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"9372df10-2431-4e2a-bee5-a40deb449585"},"edge_type":"inherent","type":"","uuid":"fdb90d11-da32-401b-bf7c-985c7fea2899","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"cc176bfe-73e4-4083-93da-aac12578da82"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"cc176bfe-73e4-4083-93da-aac12578da82"},"edge_type":"inherent","type":"","uuid":"515bb353-9ae9-4775-994b-4cf26942ad25","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"34ecf9ec-93cb-4b09-beb0-2efa797cddb8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4aac8ceb-2307-4756-ac11-bed36d066f43"},"edge_type":"inherent","type":"","uuid":"c5e79ed5-03f6-4d60-9d9f-3df690b2def7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"7c20c86e-613d-4c0f-b978-1464c7c59902"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"34ecf9ec-93cb-4b09-beb0-2efa797cddb8"},"edge_type":"inherent","type":"","uuid":"7eced6e5-b40e-45eb-84b1-17391cedde16","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"61396546-51ce-41dc-9e42-8629f067c2ed"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9372df10-2431-4e2a-bee5-a40deb449585","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cc176bfe-73e4-4083-93da-aac12578da82","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"342c1005-ccef-4b66-879e-21c122f80acf"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"34ecf9ec-93cb-4b09-beb0-2efa797cddb8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"4c30c8eb-c21a-40df-822f-99827307197c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"61396546-51ce-41dc-9e42-8629f067c2ed","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"4aa41889-45e5-4755-9f7c-d68da7b1b7fa"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4aac8ceb-2307-4756-ac11-bed36d066f43","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8ea1ed98_runbook","uuid":"d4bfb569-59c1-476e-a413-2d263efac6b0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"7c20c86e-613d-4c0f-b978-1464c7c59902","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"2faefa1e-d268-48c4-a739-55aa6d40221c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"4aab7dd1-b205-4e33-8f30-4dfe8cb6213b"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"2ecd42bd-430e-4a15-b024-d22b7a91dce4","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111"},"retries":"0","description":"","type":"DAG","uuid":"a9e5ab83-d939-4cc9-a387-46ebe75bf653","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"2c7beed5-fe51-42fe-a152-12956fe0b464"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"9b9cb827-ddf6-4d09-b204-55739f092129"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"721a94b9-713b-4ad2-afdf-88fc50e2e817"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"e986749a-75a3-46e6-8419-3aa2dd49d6aa"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"2c7beed5-fe51-42fe-a152-12956fe0b464"},"edge_type":"inherent","type":"","uuid":"554a885f-0ed1-4408-aae5-a710c6df44ab","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"9b9cb827-ddf6-4d09-b204-55739f092129"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"721a94b9-713b-4ad2-afdf-88fc50e2e817"},"edge_type":"inherent","type":"","uuid":"98bcd164-93a3-4d89-99ee-877d7039f326","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89","uuid":"e986749a-75a3-46e6-8419-3aa2dd49d6aa"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"9b9cb827-ddf6-4d09-b204-55739f092129"},"edge_type":"inherent","type":"","uuid":"6ba292cc-7329-40ba-b908-5ab6314f059e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"721a94b9-713b-4ad2-afdf-88fc50e2e817"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2c7beed5-fe51-42fe-a152-12956fe0b464","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"01e8dae3-86fd-4ca9-9ff5-3b3522b9fb12"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"9b9cb827-ddf6-4d09-b204-55739f092129","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"b3857a96-32b2-4ce2-83bc-a6dce69f8381"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"721a94b9-713b-4ad2-afdf-88fc50e2e817","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381","uuid":"f2e80c3a-61ce-4d93-b458-a5970525edda"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_b3857a96_32b2_4ce2_83bc_a6dce69f8381"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"db5149a2-3289-4e65-9bf5-4a312e910c89"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"e986749a-75a3-46e6-8419-3aa2dd49d6aa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_db5149a2_3289_4e65_9bf5_4a312e910c89"}],"description":"","message_list":[],"uuid":"dd821e9e-1d90-4b9f-8866-3ae7a77ab5f2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_200b1031_f0b8_474e_9cfa_afaa11b59111","uuid":"a9e5ab83-d939-4cc9-a387-46ebe75bf653"},"name":"SYS_GEN__Runbook_Application_200b1031_f0b8_474e_9cfa_afaa11b59111"}}],"message_list":[],"uuid":"200b1031-f0b8-474e-9cfa-afaa11b59111","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the password for the Panorama admin account","data_type":"BASE","message_list":[],"uuid":"658fa04f-2f25-4445-b827-ecc2a0186cd1","value":"","label":"Password for Panorama API Administrator","state":"ACTIVE","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"baf0aaca-abf8-4bed-b599-ead1e457b59e"},"type":"SECRET"},"editables":{"value":true},"is_hidden":false,"type":"SECRET","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_Password"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the username for a Panorama administrator with read\/write privileges to the XML\/REST API","data_type":"BASE","message_list":[],"uuid":"e66a0198-157a-4ad3-8bbb-2cc153c247c6","value":"admin","label":"Username for Panorama API Administrator","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_Username"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the IP address of the Panorama Management Interface","data_type":"BASE","message_list":[],"uuid":"681579f4-2233-40d8-a540-20d731f45b6d","value":"10.44.19.7","label":"Panorama Management Interface IP Address","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_IP"},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":true,"description":"No of palo alto VMs to be provisioned in AHV cluster.","data_type":"BASE","message_list":[],"uuid":"086fc15b-4bcd-47e1-891b-448f99e1fca6","value":"1","label":"Palo Alto Networks VM-Series Count","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"COUNT"},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Device Group object created in Panorama by Nutanix Calm","data_type":"BASE","message_list":[],"uuid":"81d1a3c9-f4a3-4f8c-b569-3c5a379ec2cf","value":"Calm","label":"Device Group for Palo Alto Networks VM-Series","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_DeviceGroup"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name of the Template object created in Panorama by Nutanix Calm","data_type":"BASE","message_list":[],"uuid":"7b856875-9004-40e2-bed3-829d743abfa0","value":"Calm-Template","label":"Template for Palo Alto Networks VM-Series","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_Template"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Template Stack object created in Panorama by Nutanix Calm","data_type":"BASE","message_list":[],"uuid":"568e5882-496c-41f9-bb57-c78e35b47c24","value":"Calm_Template_Stack","label":"Template Stack for Palo Alto Networks VM-Series","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_TemplateStack"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Zone object created in Panorama by Nutanix Calm","data_type":"BASE","message_list":[],"uuid":"189d918f-143f-46a1-b299-ad6562f67924","value":"CALM-VWIRE-ZONE","label":"Security Zone for Palo Alto Networks VM-Series","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_Zone"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Virtual Wire object created in Panorama by Calm","data_type":"BASE","message_list":[],"uuid":"4c51f449-666b-41f0-8fb1-be4fb73d066a","value":"default-vwire","label":"Virtual Wire Interface for Palo Alto Networks VM-Series","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"Panorama_Vwire"}],"name":"AHV"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"a780c674-5849-40d0-ac5c-e93aefd5c71e"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"b6c1e59b-6294-4b18-a662-aa9938002514","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"e275c849-0ed0-44a0-8ccf-2ef63f0a0296","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"8669302f-d82c-4f7a-a32a-9f7ce2fa1bab"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"8669302f-d82c-4f7a-a32a-9f7ce2fa1bab","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},"edge_type":"user_defined","type":"","uuid":"84ea1636-28ed-4428-acc3-42981e5e7c3a","to_task_reference":{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"def postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\nif @@{calm_array_index}@@ == 0:\n    print \"Configuring Panorama\"\n  \n    #Create device group\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\", 'element':\"<description>Device group added from Nutanix Calm<\/description>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings\/>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create interfaces on template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #create Virtual wire\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='@@{Panorama_Vwire}@@']\", 'element':\"<tag-allowed>0-4094<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create Zones\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\", 'element':\"<import><network><interface><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/interface><\/network><\/import>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='@@{Panorama_Zone}@@']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create template stack with template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\", 'element':\"<templates><member>@@{Panorama_Template}@@<\/member><\/templates><settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Commit the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n\n    #Add vsys the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #commit and Push the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n \nelse:\n    print \"Panorama configuration is done only on 0th node\"\n\n\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePanorama"}],"description":"","message_list":[],"uuid":"d8ed294b-38cb-46b6-a1c1-1a9b283bafbc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"fdbdd81d-ffb3-42a8-9903-fed667e74f8c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0"},"name":"1d6d9396_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_d790a56c_c074_4e8d_9cab_ab2d0430daca"}],"description":"","message_list":[],"uuid":"30cda17a-3e97-4eda-ac71-cc0b61aab496","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"e275c849-0ed0-44a0-8ccf-2ef63f0a0296"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for creating an application","message_list":[],"uuid":"16fb3953-e5ca-42f1-b41f-e85353907c5a","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"ace4bff5-509f-4dba-9455-8c616460a176","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"a9f121cc-17bc-4d90-9f9c-8740bdfc45ce"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"53bf4e8f-6b1c-4dc3-b772-7bc8b699bd48"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"0d6952cd-1e02-4b2c-85a2-86eb6aec7c94"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"53bf4e8f-6b1c-4dc3-b772-7bc8b699bd48"},"edge_type":"inherent","type":"","uuid":"fba540ff-5eee-404f-8fdb-1fc99b53a960","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"0d6952cd-1e02-4b2c-85a2-86eb6aec7c94"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"a9f121cc-17bc-4d90-9f9c-8740bdfc45ce"},"edge_type":"inherent","type":"","uuid":"774689b0-ca7f-4fd9-8e94-63f669563bf6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"53bf4e8f-6b1c-4dc3-b772-7bc8b699bd48"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a9f121cc-17bc-4d90-9f9c-8740bdfc45ce","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"30cda17a-3e97-4eda-ac71-cc0b61aab496"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"53bf4e8f-6b1c-4dc3-b772-7bc8b699bd48","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"af67bb29-c195-4572-9fdf-484b135d5f92"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0d6952cd-1e02-4b2c-85a2-86eb6aec7c94","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"f0271fae-6792-4645-8878-411a08cec034","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"ace4bff5-509f-4dba-9455-8c616460a176"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"f327174f-a7d3-470a-b6ea-0ef27e2f552a","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"4258a889-8671-47ea-bea3-366708ce03ed","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"0685d195-bac7-4d5e-8bf0-0c242ac41ed8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"0685d195-bac7-4d5e-8bf0-0c242ac41ed8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},"edge_type":"user_defined","type":"","uuid":"84ea1636-28ed-4428-acc3-42981e5e7c3a","to_task_reference":{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"def postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\nif @@{calm_array_index}@@ == 0:\n    print \"Configuring Panorama\"\n  \n    #Create device group\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\", 'element':\"<description>Device group added from Nutanix Calm<\/description>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings\/>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create interfaces on template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #create Virtual wire\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='@@{Panorama_Vwire}@@']\", 'element':\"<tag-allowed>0-4094<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create Zones\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\", 'element':\"<import><network><interface><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/interface><\/network><\/import>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='@@{Panorama_Zone}@@']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create template stack with template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\", 'element':\"<templates><member>@@{Panorama_Template}@@<\/member><\/templates><settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Commit the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n\n    #Add vsys the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #commit and Push the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n \nelse:\n    print \"Panorama configuration is done only on 0th node\"\n\n\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePanorama"}],"description":"","message_list":[],"uuid":"d8ed294b-38cb-46b6-a1c1-1a9b283bafbc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"fdbdd81d-ffb3-42a8-9903-fed667e74f8c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0"},"name":"1d6d9396_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_d790a56c_c074_4e8d_9cab_ab2d0430daca"}],"description":"","message_list":[],"uuid":"4c30c8eb-c21a-40df-822f-99827307197c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"4258a889-8671-47ea-bea3-366708ce03ed"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"db8324f5-9691-4824-8217-033e231f31d6","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"18446d35-f5f8-4e25-a0c8-a2ea114262d2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"367e4185-db10-458c-a528-ad0699caa66e"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"6765f82c-9ffa-40ef-957f-8291d76302d0"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"ec4bf2eb-5907-49ce-a50e-3a2a76b4f360"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"367e4185-db10-458c-a528-ad0699caa66e"},"edge_type":"inherent","type":"","uuid":"8b09fe45-bb1a-49a6-8835-3b1c4dd569e1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"6765f82c-9ffa-40ef-957f-8291d76302d0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"6765f82c-9ffa-40ef-957f-8291d76302d0"},"edge_type":"inherent","type":"","uuid":"f8078a0b-12d5-4be1-83d5-0831de309095","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"ec4bf2eb-5907-49ce-a50e-3a2a76b4f360"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"367e4185-db10-458c-a528-ad0699caa66e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6765f82c-9ffa-40ef-957f-8291d76302d0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"342c1005-ccef-4b66-879e-21c122f80acf"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ec4bf2eb-5907-49ce-a50e-3a2a76b4f360","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"4c30c8eb-c21a-40df-822f-99827307197c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}],"description":"","message_list":[],"uuid":"53df69e2-26bc-4c4b-8319-b216fc8c380d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"18446d35-f5f8-4e25-a0c8-a2ea114262d2"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"17cd9ada-6f07-49f3-b845-8013fbbafdb4","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"28030540-6aa8-425d-99be-45685eed483a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"2b79aecc-a128-4452-bb8b-b044834f4973"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"acd3f624-84d6-4b83-99a5-29042360e220"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"2b79aecc-a128-4452-bb8b-b044834f4973"},"edge_type":"inherent","type":"","uuid":"6f8dded2-6840-4976-a4ac-89169411c342","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"acd3f624-84d6-4b83-99a5-29042360e220"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2b79aecc-a128-4452-bb8b-b044834f4973","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"01e8dae3-86fd-4ca9-9ff5-3b3522b9fb12"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"acd3f624-84d6-4b83-99a5-29042360e220","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d790a56c_c074_4e8d_9cab_ab2d0430daca"}],"description":"","message_list":[],"uuid":"9c3ff5d0-9f64-4b14-a4fc-0532819180d7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"28030540-6aa8-425d-99be-45685eed483a"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for starting an application","message_list":[],"uuid":"b94da9b9-b133-483e-b7a3-adcafa317f3f","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"88b38ec1-e35b-40b8-9dcf-2363ec664d6a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"ef31f45a-bfc6-4697-9d2e-51c1239f1ec2"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ef31f45a-bfc6-4697-9d2e-51c1239f1ec2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"10934859-ca7e-4ad0-bc84-70700ea630bb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"e5d875f8-55e7-4c06-896f-97474d068b77","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"88b38ec1-e35b-40b8-9dcf-2363ec664d6a"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for restarting an application","message_list":[],"uuid":"d799398d-acd4-4cbc-84eb-a48f2da8066d","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"9d5325b9-7bae-4ac8-ac16-065b697a51fb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"20b56690-d3d6-4ff9-bd00-238a720865b7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"20b56690-d3d6-4ff9-bd00-238a720865b7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"0e528e37-010f-420d-bdbc-0739188652fd"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"1f4841b0-f440-4238-a77e-e01e6486be27","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"9d5325b9-7bae-4ac8-ac16-065b697a51fb"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}},{"description":"System action for stopping an application","message_list":[],"uuid":"d5867ec4-ff83-4962-81ed-52c4810d0918","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"1f6d6da1-ac99-468e-8565-7cca55d071fc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb","uuid":"3c41b36e-17be-4d70-9bcc-7010fe781949"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3c41b36e-17be-4d70-9bcc-7010fe781949","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"eb47930e-7c65-4042-b6a2-7d894a2b597a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_c87fd240_eec4_4978_b9f1_da6ce15fceeb"}],"description":"","message_list":[],"uuid":"7aa38341-9aba-434d-91cc-e4e22db1dda8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca","uuid":"1f6d6da1-ac99-468e-8565-7cca55d071fc"},"name":"SYS_GEN__Runbook_Package_d790a56c_c074_4e8d_9cab_ab2d0430daca"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"}],"uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5"},"edge_type":"user_defined","type":"","uuid":"84ea1636-28ed-4428-acc3-42981e5e7c3a","to_task_reference":{"kind":"app_task","name":"ConfigurePanorama","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"69a533a7-4901-4d4a-a99a-c1f94ab38aa5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"c87fd240-eec4-4978-b9f1-da6ce15fceeb"},"retries":"0","description":"","type":"EXEC","uuid":"1ebb821f-b533-44b0-8917-4ace807651bb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"def postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\nif @@{calm_array_index}@@ == 0:\n    print \"Configuring Panorama\"\n  \n    #Create device group\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\", 'element':\"<description>Device group added from Nutanix Calm<\/description>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings\/>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create interfaces on template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #create Virtual wire\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='@@{Panorama_Vwire}@@']\", 'element':\"<tag-allowed>0-4094<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create Zones\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\", 'element':\"<import><network><interface><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/interface><\/network><\/import>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='@@{Panorama_Zone}@@']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create template stack with template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\", 'element':\"<templates><member>@@{Panorama_Template}@@<\/member><\/templates><settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Commit the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n\n    #Add vsys the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #commit and Push the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n \nelse:\n    print \"Panorama configuration is done only on 0th node\"\n\n\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePanorama"}],"description":"","message_list":[],"uuid":"d8ed294b-38cb-46b6-a1c1-1a9b283bafbc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"2adcc929-2b38-4477-8b80-8551ca488f66"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"d790a56c-c074-4e8d-9cab-ab2d0430daca"},"retries":"0","description":"","type":"DAG","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"fdbdd81d-ffb3-42a8-9903-fed667e74f8c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"52a0a8a5-d2f5-4ff8-9605-52ead9cad9f0"},"name":"1d6d9396_runbook_cloned_0"}},"variable_list":[],"name":"Configuration"}]},"name":"PaloAlto"},"spec":{"description":"","resources":{"client_attrs":{"85789db9_deployment_cloned_0":{"y":-230,"x":333},"None":{"y":-80,"x":669}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ConfigureFirewall"}],"name":"8c0b7aac_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigureFirewall","attrs":{"script":"print \"Palo Alto Networks VM Configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False, timeout=30)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN-OS API configuration failed\",r.content\n    exit(1)\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{admin.username}@@', 'password': '@@{admin.secret}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n\n#Get serial number\n\npayload = {'type': 'version', 'key':key}\nserial_data = postrequest(api_url=url1,payload=payload)\nserial_no = serial_data.split('<serial>')[1].split('<\/serial>')[0]\nprint \"Serial no. of Palo Alto Firewall is:\",serial_no\n\n\nprint \"Adding the firewall to Panorama\"\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Attach device to Panorama\ndevice_attach = device_attach = \"\/config\/mgt-config\/devices\/entry[@name='\"+serial_no+\"']\"\n\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_attach, 'element':\"<vsys\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Attach device to device group\n\nprint \"Associating VMs to Panorama Device Group\"\n\ndevice_group = \"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\/devices\/entry[@name='\" + serial_no + \"']\"\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_group, 'element':\"<vsys\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Attach device to template stack\n\nprint \"Associating VMs to Panorama Template and Template Stack\"\n\ntemplate_stack = \"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\/devices\/entry[@name='\"+serial_no+\"']\"\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':template_stack, 'element':\"<variable\/>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#commit and Push the changes\npayload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(120)\n\n#Set device to auto push to receive updates\ndevice_attach = device_attach = \"\/config\/mgt-config\/devices\/entry[@name='\"+serial_no+\"']\"\n\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':device_attach, 'element':\"<auto-push>yes<\/auto-push>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#commit and Push the changes\npayload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"e336f5a5_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"8c0b7aac_dag_cloned_1"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9c114dea_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"bc52929d_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"9c114dea_dag_cloned_1"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6aaef5c4_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"6664cdf0_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"6aaef5c4_dag_cloned_1"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"44b9e532_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"850d536e_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"44b9e532_dag_cloned_1"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3bbf6d30_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3b4902aa_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"3bbf6d30_dag_cloned_1"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"PaloAlto","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"GenerateNumber"}],"name":"acf0981a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"GenerateNumber","attrs":{"exit_status":[],"script":"print \"NUM=%02d\" % (int(@@{calm_array_index}@@)+1,)","eval_variables":["NUM"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"6b1e4203_runbook","main_task_local_reference":{"kind":"app_task","name":"acf0981a_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"DeleteCategoriesNFChain"}],"name":"cb997dd5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DeleteCategoriesNFChain","attrs":{"script":"prism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n\n\ndef deleteconfig(api_url):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\n  if r.ok:\n    return r\n  else:\n    print \"Delete request failed\", r.content\n    \n\nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_exists = False\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nif len(nf_list['entities']) > 0:\n  for i in nf_list['entities']:\n    if i['status']['name'] == nf_chain_name:\n      nf_exists = True\n      nf_uuid = i['metadata']['uuid']\n      break\n\n    \nprint \"Deleting service chain\"\nif nf_exists and @@{calm_array_index}@@ == 0:\n  service_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/{1}'.format(prism_ip, nf_uuid)\n  deleteconfig(api_url=service_chain_api)\n\nsleep(30)\n\nprint \"Delete @@{platform.metadata.categories.network_function_provider}@@ network function provider category\"\ncategory_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider\/@@{platform.metadata.categories.network_function_provider}@@'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=category_api)\n\n\nprint \"Deleting network function provider category\"\ncategorykey_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=categorykey_api)\n\n\n    \n\n\n\n","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8ea1ed98_runbook","main_task_local_reference":{"kind":"app_task","name":"cb997dd5_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"PaloAltoVM","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"900","disable_readiness_probe":true,"login_credential_local_reference":{"kind":"app_credential","name":"admin"}},"editables":{"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"boot_config":true,"disk_list":{"1":{"data_source_reference":true},"0":{"data_source_reference":true}}}}},"os_type":"Linux","create_spec":{"name":"PaloAlto-@@{NUM}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0c20f8cd-5f5c-4817-ba50-534902860bc4"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","subnet_reference":null,"type":""}],"serial_port_list":[{"index":0,"type":"","is_connected":true}],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":9216,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":null,"power_state":"ON","type":"","account_uuid":"32f41150-970c-4a92-9fec-0f144eb42fdd","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"PA-8.1.3","uuid":"66f42aee-9f5e-4c54-be87-286ebbfde7cb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":{"kind":"image","type":"","name":"panboot.iso","uuid":"769ca9d5-1bdf-4255-a095-c29cda2f5ac5"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"IDE"},"device_type":"CDROM"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"network_function_provider":"PaloAlto"}},"variable_list":[]}],"endpoint_definition_list":[],"credential_definition_list":[{"username":"admin","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"admin"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"PaloAlto"}],"name":"Configuration","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain"},{"kind":"app_task","name":"ConfigurePanorama"}],"name":"3a805182_dag_cloned_1","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"ConfigurePanorama"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"CreateNFChain","attrs":{"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"PANOS_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigurePanorama","attrs":{"script":"def postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{Panorama_IP}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': '@@{Panorama_Username}@@', 'password': '@@{Panorama_Password}@@'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\nif @@{calm_array_index}@@ == 0:\n    print \"Configuring Panorama\"\n  \n    #Create device group\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/device-group\/entry[@name='@@{Panorama_DeviceGroup}@@']\", 'element':\"<description>Device group added from Nutanix Calm<\/description>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings\/>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Create interfaces on template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #create Virtual wire\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='@@{Panorama_Vwire}@@']\", 'element':\"<tag-allowed>0-4094<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create Zones\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\", 'element':\"<import><network><interface><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/interface><\/network><\/import>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='@@{Panorama_Zone}@@']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n    #Create template stack with template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template-stack\/entry[@name='@@{Panorama_TemplateStack}@@']\", 'element':\"<templates><member>@@{Panorama_Template}@@<\/member><\/templates><settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #Commit the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n\n    #Add vsys the template\n    payload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/template\/entry[@name='@@{Panorama_Template}@@']\", 'element':\"<settings><default-vsys>vsys1<\/default-vsys><\/settings>\"}\n    print postrequest(api_url=url1,payload=payload)\n\n\n    #commit and Push the changes\n    payload = {'type': 'commit', 'cmd': '<commit-all><\/commit-all>', 'key':key}\n    print postrequest(api_url=url1,payload=payload)\n\n    sleep(60)\n \nelse:\n    print \"Panorama configuration is done only on 0th node\"\n\n\n\n","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"18da9439_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8d843173_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"1d6d9396_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"85789db9_deployment_cloned_0","min_replicas":"@@{COUNT}@@","default_replicas":"@@{COUNT}@@","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"99","package_local_reference_list":[{"kind":"app_package","name":"Configuration"}],"substrate_local_reference":{"kind":"app_substrate","name":"PaloAltoVM"},"variable_list":[],"description":""}],"description":"","action_list":[{"description":"This action is used to scaleup the no of palo alto vms on the cluster","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOut"}],"name":"47593285_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleOut","attrs":{"scaling_count":"@@{SCALEOUT_COUNT}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"e47f3869_runbook","main_task_local_reference":{"kind":"app_task","name":"47593285_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEOUT_COUNT","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleUp"},{"description":"This action is used to scale down the no of palo alto vms on the cluster","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleIn"}],"name":"6e05e2e2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleIn","attrs":{"scaling_count":"@@{SCALEIN_COUNT}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"aa73d797_runbook","main_task_local_reference":{"kind":"app_task","name":"6e05e2e2_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEIN_COUNT","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleDown"}],"name":"AHV","variable_list":[{"val_type":"STRING","is_mandatory":true,"description":"Provide the password for the Panorama admin account","data_type":"BASE","type":"SECRET","name":"Panorama_Password","value":"","label":"Password for Panorama API Administrator","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the username for a Panorama administrator with read\/write privileges to the XML\/REST API","data_type":"BASE","type":"LOCAL","name":"Panorama_Username","value":"admin","label":"Username for Panorama API Administrator","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the IP address of the Panorama Management Interface","data_type":"BASE","type":"LOCAL","name":"Panorama_IP","value":"10.44.19.7","label":"Panorama Management Interface IP Address","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":true,"description":"No of palo alto VMs to be provisioned in AHV cluster.","data_type":"BASE","type":"LOCAL","name":"COUNT","value":"1","label":"Palo Alto Networks VM-Series Count","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Device Group object created in Panorama by Nutanix Calm","data_type":"BASE","type":"LOCAL","name":"Panorama_DeviceGroup","value":"Calm","label":"Device Group for Palo Alto Networks VM-Series","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name of the Template object created in Panorama by Nutanix Calm","data_type":"BASE","type":"LOCAL","name":"Panorama_Template","value":"Calm-Template","label":"Template for Palo Alto Networks VM-Series","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Template Stack object created in Panorama by Nutanix Calm","data_type":"BASE","type":"LOCAL","name":"Panorama_TemplateStack","value":"Calm_Template_Stack","label":"Template Stack for Palo Alto Networks VM-Series","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Zone object created in Panorama by Nutanix Calm","data_type":"BASE","type":"LOCAL","name":"Panorama_Zone","value":"CALM-VWIRE-ZONE","label":"Security Zone for Palo Alto Networks VM-Series","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Provide the desired name for the Virtual Wire object created in Panorama by Calm","data_type":"BASE","type":"LOCAL","name":"Panorama_Vwire","value":"default-vwire","label":"Virtual Wire Interface for Palo Alto Networks VM-Series","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"admin"},"type":"USER"},"name":"PaloAlto"},"api_version":"3.0","metadata":{"last_update_time":"1599458127073951","kind":"blueprint","spec_version":12,"creation_time":"1599155051951217","categories":{"AppFamily":"Networking"},"name":"PaloAlto"}}