{"status": {"state": "ACTIVE", "message_list": [], "description": "", "resources": {"service_definition_list": [{"singleton": false, "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "36113958-83ca-490e-b4e8-0a7eec889b7e", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "030017c3_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "45d261e7-a9f3-4256-b9c9-6c4da47afd01"}], "description": "", "name": "5730e30f_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "030017c3_dag", "uuid": "45d261e7-a9f3-4256-b9c9-6c4da47afd01"}, "message_list": [], "variable_list": [], "uuid": "4a3a8eae-c03a-4779-8527-3fffc9a82c0c"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "10b7da45-5716-4f5b-85ab-1cbe1fb3b758", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f5f997d_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "20f3c6a8-63b4-4816-a2ca-e7f905c93585"}], "description": "", "name": "b01e7edf_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f5f997d_dag", "uuid": "20f3c6a8-63b4-4816-a2ca-e7f905c93585"}, "message_list": [], "variable_list": [], "uuid": "a39a58b5-a90e-4a67-a43e-7c3232e9b262"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "0463acce-d76a-48f1-99e6-54c9224b05c0", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "c2b90e7d_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5c45be5c-964f-4fd8-a931-5fda5a5c0dad"}], "description": "", "name": "0263f5a9_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "c2b90e7d_dag", "uuid": "5c45be5c-964f-4fd8-a931-5fda5a5c0dad"}, "message_list": [], "variable_list": [], "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "21f7929e-194d-4961-8704-e51f9926bf4e", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "00b1cc9f_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "94930f02-39d6-411d-82c0-9fdc045c678b"}], "description": "", "name": "8aadc288_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "00b1cc9f_dag", "uuid": "94930f02-39d6-411d-82c0-9fdc045c678b"}, "message_list": [], "variable_list": [], "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "e676dd0f-f544-427f-8a10-951824a3db58", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6c4b7c3b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "eec5351a-f2d6-46f0-ad62-97657f109ef8"}], "description": "", "name": "a059f54d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6c4b7c3b_dag", "uuid": "eec5351a-f2d6-46f0-ad62-97657f109ef8"}, "message_list": [], "variable_list": [], "uuid": "1617b3ea-3974-4bf5-87c0-ce246b212025"}, "message_list": [], "name": "action_restart"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "cd4b3a6c-569b-4618-8e5a-f712253d0c26", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Service_Element_Delete_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "6b82c352-91c0-47e0-b20d-95830ac3b7e3"}], "name": "SYS_GEN__DAG_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7187e89b-016c-4dc9-b08a-23baee489166"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Service_Element_Delete_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "6b82c352-91c0-47e0-b20d-95830ac3b7e3"}], "description": "", "name": "SYS_GEN__Runbook_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "7187e89b-016c-4dc9-b08a-23baee489166"}, "message_list": [], "variable_list": [], "uuid": "0427ed21-9dac-4ea8-99c1-fc4d7b7d1b9b"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "MSSQL", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "EXECUTION_MODE", "type": "LOCAL", "value": "", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "57788488-ca32-4e68-9910-30b439b4a1ee"}], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "361c1662-4b3e-4840-9faf-96d9261aed3b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "67a9135a-aba4-40de-aaee-e9baab97326b"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "967c8590-e35c-4e56-bf86-14aa241e1f7f"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "67a9135a-aba4-40de-aaee-e9baab97326b"}, "edge_type": "inherent", "type": "", "uuid": "8a91c06c-a138-4480-88b8-e9152540b53f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "967c8590-e35c-4e56-bf86-14aa241e1f7f"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5f245972-2acb-446d-a2c3-094546e82fcb"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"name": "MSSQL-@@{calm_application_name}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cbc0c43a-5b92-49b2-9851-5a10041b6d1b"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>MSSQL@@{calm_random}@@</ComputerName>\n         <RegisteredOrganization>Nutanix</RegisteredOrganization>\n         <RegisteredOwner>Acropolis</RegisteredOwner>\n         <TimeZone>UTC</TimeZone>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "SQLServer2014SP2-FullSlipstream-x64-ENU", "uuid": "0be4cd78-184b-4319-96fa-d949c686ccde"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 51200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 153600, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 4, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 5, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 6, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 7, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 8, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "67a9135a-aba4-40de-aaee-e9baab97326b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "967c8590-e35c-4e56-bf86-14aa241e1f7f"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "5f245972-2acb-446d-a2c3-094546e82fcb"}, "message_list": [], "variable_list": [], "uuid": "4ba9df01-c158-4272-8749-afddb8926081"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "10014c72-130f-479c-9828-efa0b6ab52c4", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "d94b44ee-2d39-4f28-93d9-93a9664132bb"}, {"kind": "app_task", "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7a3887b8-4248-48ad-922c-7831dd81c93b"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "d94b44ee-2d39-4f28-93d9-93a9664132bb"}, "edge_type": "inherent", "type": "", "uuid": "755bdc63-68b1-4ed9-a433-d6f42f79ab98", "to_task_reference": {"kind": "app_task", "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7a3887b8-4248-48ad-922c-7831dd81c93b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0866ee30-9468-414e-8024-062ae925af47"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "d94b44ee-2d39-4f28-93d9-93a9664132bb"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "7a3887b8-4248-48ad-922c-7831dd81c93b"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "0866ee30-9468-414e-8024-062ae925af47"}, "message_list": [], "variable_list": [], "uuid": "f2d95d01-71c9-4a32-b982-61272b912ec8"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for restarting an application", "type": "system", "uuid": "be9f10d0-a624-47ac-abb7-b9e34a42eb52", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "05f2c68e-5df7-4048-a827-3a801ca25183"}, {"kind": "app_task", "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "83198a96-4e5f-4d1e-ba8e-2dc6dccc1bc8"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "05f2c68e-5df7-4048-a827-3a801ca25183"}, "edge_type": "inherent", "type": "", "uuid": "b2b2f999-29a2-4fd4-a119-8ef228960fb2", "to_task_reference": {"kind": "app_task", "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "83198a96-4e5f-4d1e-ba8e-2dc6dccc1bc8"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "76b74203-a83e-494f-b1af-29f82176ef67"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_Restart_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "05f2c68e-5df7-4048-a827-3a801ca25183"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_MSSQL2014_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "83198a96-4e5f-4d1e-ba8e-2dc6dccc1bc8"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "76b74203-a83e-494f-b1af-29f82176ef67"}, "message_list": [], "variable_list": [], "uuid": "f635fcc1-d3f8-459e-aa05-df344d310dc5"}, "message_list": [], "name": "action_restart"}, {"description": "System action for suspending an application", "type": "system", "uuid": "6c70e424-467b-4b86-8a58-2ca2037bce4a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d7739760-632d-48e9-894a-37619bcffd8c"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "d7739760-632d-48e9-894a-37619bcffd8c"}, "message_list": [], "variable_list": [], "uuid": "a3f5eb19-3dc5-48cb-8105-64f213bd47a4"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "961dcec1-b527-43c3-9f6d-18783427589a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5b4e9929-18fb-45a4-ae26-f54321ed1a65"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "5b4e9929-18fb-45a4-ae26-f54321ed1a65"}, "message_list": [], "variable_list": [], "uuid": "6a048aaa-c8fe-4d5f-a2e0-87f2238e481c"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "c474b5a5-dc33-451e-bcbf-0dd5a754a452", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "a5f49054-56ce-4e1a-baa8-4953afc16161"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "56b6694e-5527-413e-8ec7-4ec03296196b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "a5f49054-56ce-4e1a-baa8-4953afc16161"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "56b6694e-5527-413e-8ec7-4ec03296196b"}, "message_list": [], "variable_list": [], "uuid": "7331e991-21f7-4e7b-8806-32bc848571f9"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "9e2db602-5a62-4762-b454-d9083c5b946e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "9802885a-2ed4-47c6-ab71-9f79e6834538"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0642afec-5c5a-4141-b952-c9ed7d89c79c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "9802885a-2ed4-47c6-ab71-9f79e6834538"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "0642afec-5c5a-4141-b952-c9ed7d89c79c"}, "message_list": [], "variable_list": [], "uuid": "3ca40424-5f1a-4c83-8e60-87dc99f7cc60"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "b1be8708-c066-4dd2-be7f-a3afb048f0f5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "68a58526-be59-4220-8ea3-231e54089adb"}], "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4aff0096-2432-4252-86dd-6b31ff8a7084"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "68a58526-be59-4220-8ea3-231e54089adb"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "4aff0096-2432-4252-86dd-6b31ff8a7084"}, "message_list": [], "variable_list": [], "uuid": "bc563a94-b48b-4f11-a9b2-d1ea6cf06d75"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "MSSQL2014", "state": "ACTIVE", "readiness_probe": {"connection_type": "POWERSHELL", "disable_readiness_probe": false, "connection_port": 5985, "timeout_secs": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"readiness_probe": {"connection_type": true, "connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"1": {"data_source_reference": true, "device_properties": {"disk_address": {"adapter_type": true}, "device_type": true}}, "0": {"data_source_reference": true, "device_properties": {"device_type": true, "disk_address": {"adapter_type": true}}}, "3": {"disk_size_mib": true}, "2": {"disk_size_mib": true}, "5": {"disk_size_mib": true}, "4": {"disk_size_mib": true}, "7": {"disk_size_mib": true}, "6": {"disk_size_mib": true}, "9": {"disk_size_mib": true}, "8": {"disk_size_mib": true}}}}}, "os_type": "Windows", "message_list": [], "create_spec": {"name": "MSSQL-@@{calm_application_name}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cbc0c43a-5b92-49b2-9851-5a10041b6d1b"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>MSSQL@@{calm_random}@@</ComputerName>\n         <RegisteredOrganization>Nutanix</RegisteredOrganization>\n         <RegisteredOwner>Acropolis</RegisteredOwner>\n         <TimeZone>UTC</TimeZone>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "SQLServer2014SP2-FullSlipstream-x64-ENU", "uuid": "0be4cd78-184b-4319-96fa-d949c686ccde"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 51200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 153600, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 4, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 5, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 6, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 7, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 8, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}], "credential_definition_list": [{"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "LOCAL", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "cc035909-5ef9-440f-937a-93173b772d35"}, {"username": "administrator@nucalm.com", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "DOMAIN_CRED", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "ea793b41-25cd-4c42-8cab-785ea4ba2b19"}, {"username": "nucalm\\administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "SQL_CRED", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "bf95abc7-0d8c-4a92-a8f7-e41bb6ddb188"}, {"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "KARAN", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}], "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "41115fcd-8d73-4219-afdd-ec38583c6034", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "7eb79ac7-3c9f-4348-994d-d9a964aac6b6"}], "name": "SYS_GEN__DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c1f75ac6-2c1e-4d90-b4ec-f2d0457eaa30"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "name": "87d54973_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, "edge_type": "user_defined", "type": "", "uuid": "8714eb4b-508d-4947-91d2-4e6416c8b5ec", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, "edge_type": "user_defined", "type": "", "uuid": "0ea72dc9-dea7-40c1-bd7d-22bee24b0ee2", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, "edge_type": "user_defined", "type": "", "uuid": "f375606e-03c1-479d-899d-21712d9f5d1f", "to_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}}, {"from_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, "edge_type": "user_defined", "type": "", "uuid": "32e88ea7-a01c-4577-88ee-f76d23a9cd45", "to_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, "edge_type": "user_defined", "type": "", "uuid": "d43d9165-1c44-444b-ba97-e565833debee", "to_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, "edge_type": "user_defined", "type": "", "uuid": "85e0556e-9a3e-4be9-90b8-675e0fbbb6bc", "to_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, "edge_type": "user_defined", "type": "", "uuid": "9e4c591c-bc3b-e696-275d-5d40499b4179", "to_task_reference": {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable Credssp", "state": "ACTIVE", "attrs": {"script": "Enable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(60)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InitializeDisk", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $start_time = Get-Date\n\n  Get-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n  # Format SQL binaries disk\n  New-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format SQL backup/restore disk\n  New-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB DATA drives\n  New-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB TEMP drives\n  New-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB LOGS drives\n  New-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  #Format drive with 64K block size, assigns Label and drive letter\n  Format-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \n  Format-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \n  Format-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \n  Format-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \n  Format-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \n  Format-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \n  Format-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \n  Format-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallSQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n  $edition = \"Standard\"\n  $HOSTNAME=$(hostname)\n  $PackageName = \"MsSqlServer2014Standard\"\n  $Prerequisites = \"Net-Framework-Core\"\n  $silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL /SECURITYMODE=sql /SAPWD=`\"@@{SQL_CRED.secret}@@`\" /ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=False /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n  $setupDriveLetter = \"D:\"\n  $setupPath = \"$setupDriveLetter\\setup.exe\"\n  $validExitCodes = @(0)\n\n  if ($Prerequisites){\n  Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n  }\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplyOSBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $RktTemp = \"$TempDirectory\\rktools.2003\"\n\n  $url = \"@@{BPG_RKTOOLS_URL}@@\"\n  $filePath = \"$TempDirectory\\rktools.exe\"\n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  & $filePath /Q /T:\"$RktTemp\" /C\n  \n  Start-Sleep 10\n\n  $PackageName = \"rktools.2003\"\n  $setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n  $silentArgs = \"/i $RktTemp\\rktools.msi /qn\"\n  $validExitCodes = @(0)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplySQLBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\n  New-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n  \n  Set-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n    ## The parameter you wish to add\n    [Parameter(Mandatory = $true)]\n    $StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n    $inst = $_.Value;\n    $regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n    $props = Get-ItemProperty $regKey\n    $params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n    #$params | ft -AutoSize\n    $hasFlag = $false\n    foreach ($param in $params) {\n        if($param.Value -eq $StartupParameter) {\n            $hasFlag = $true\n            break;\n        }\n    }\n    if (-not $hasFlag) {\n        \"Adding $StartupParameter\"\n        $newRegProp = \"SQLArg\"+($params.Count)\n        Set-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n    } else {\n        \"$StartupParameter already set\"\n    }\n}'\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n        @total_mem decimal (10,0),`r`n\n\t\t@min int,`r`n\n\t\t@max int`r`n\nSELECT `r`n\n   --SELECT (physical_memory_kb/1024) AS Server_Physical_Memory_MB`r`n\n  @total_mem = (physical_memory_kb/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n  #create directories\n  mkdir G:\\SQLDATA01\\\n  mkdir H:\\SQLDATA02\\\n  mkdir I:\\TEMPDB01\\\n  mkdir J:\\TEMPDB02\\\n  mkdir L:\\UserDB-logs01\\\n  mkdir T:\\TempDB-logs01\\\n  mkdir R:\\SQLBACK\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  stop-service MSSQL* \n  Start-Sleep 5\n  rm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FirewallRules", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\nNew-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger/RPC\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 2382 -Action allow\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "description": "", "name": "b58c360f_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "87d54973_dag", "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, "message_list": [], "variable_list": [], "uuid": "55be7841-1794-4879-b392-d02123f62671"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "c5e51cfd_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}], "description": "", "name": "8cc4ed37_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "c5e51cfd_dag", "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}, "message_list": [], "variable_list": [], "uuid": "113ccac4-76a3-4ff7-9c41-cd56ef955717"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "7eb79ac7-3c9f-4348-994d-d9a964aac6b6"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "c1f75ac6-2c1e-4d90-b4ec-f2d0457eaa30"}, "message_list": [], "variable_list": [], "uuid": "11e05238-d1c5-4106-959b-08007793d420"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "74d86136-b82e-4c2c-ac2f-18046bcb7a59", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "d8908105-3619-413e-adb8-da1523d8e497"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "127d5c20-941d-4014-9718-7afb4563f28d"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "c9e39b7a-db17-45c8-95c1-a8dd1c4eba31"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "127d5c20-941d-4014-9718-7afb4563f28d"}, "edge_type": "inherent", "type": "", "uuid": "9ed28d66-5697-4a5e-beea-9b85cfcecaea", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "c9e39b7a-db17-45c8-95c1-a8dd1c4eba31"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "d8908105-3619-413e-adb8-da1523d8e497"}, "edge_type": "inherent", "type": "", "uuid": "fd7f8dfd-2b54-4a47-a16a-6cc36dafb60d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "127d5c20-941d-4014-9718-7afb4563f28d"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "aaabedc9-edfa-4fd4-8869-69af7ff790c4"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "11e05238-d1c5-4106-959b-08007793d420"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d8908105-3619-413e-adb8-da1523d8e497"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "5730e30f_runbook", "uuid": "4a3a8eae-c03a-4779-8527-3fffc9a82c0c"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "127d5c20-941d-4014-9718-7afb4563f28d"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c9e39b7a-db17-45c8-95c1-a8dd1c4eba31"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "aaabedc9-edfa-4fd4-8869-69af7ff790c4"}, "message_list": [], "variable_list": [], "uuid": "70778453-667e-46a0-9078-896889944a3c"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "b8708bba-70a1-4aa6-81ba-cd9414559d15", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "edf06eb4-1bc4-4372-8bf3-635ce26f651c"}], "name": "SYS_GEN__DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d3e93371-a612-4619-ad2b-a5946dc220e3"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "name": "87d54973_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, "edge_type": "user_defined", "type": "", "uuid": "8714eb4b-508d-4947-91d2-4e6416c8b5ec", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, "edge_type": "user_defined", "type": "", "uuid": "0ea72dc9-dea7-40c1-bd7d-22bee24b0ee2", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, "edge_type": "user_defined", "type": "", "uuid": "f375606e-03c1-479d-899d-21712d9f5d1f", "to_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}}, {"from_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, "edge_type": "user_defined", "type": "", "uuid": "32e88ea7-a01c-4577-88ee-f76d23a9cd45", "to_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, "edge_type": "user_defined", "type": "", "uuid": "d43d9165-1c44-444b-ba97-e565833debee", "to_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, "edge_type": "user_defined", "type": "", "uuid": "85e0556e-9a3e-4be9-90b8-675e0fbbb6bc", "to_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, "edge_type": "user_defined", "type": "", "uuid": "9e4c591c-bc3b-e696-275d-5d40499b4179", "to_task_reference": {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable Credssp", "state": "ACTIVE", "attrs": {"script": "Enable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(60)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InitializeDisk", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $start_time = Get-Date\n\n  Get-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n  # Format SQL binaries disk\n  New-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format SQL backup/restore disk\n  New-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB DATA drives\n  New-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB TEMP drives\n  New-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB LOGS drives\n  New-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  #Format drive with 64K block size, assigns Label and drive letter\n  Format-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \n  Format-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \n  Format-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \n  Format-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \n  Format-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \n  Format-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \n  Format-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \n  Format-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallSQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n  $edition = \"Standard\"\n  $HOSTNAME=$(hostname)\n  $PackageName = \"MsSqlServer2014Standard\"\n  $Prerequisites = \"Net-Framework-Core\"\n  $silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL /SECURITYMODE=sql /SAPWD=`\"@@{SQL_CRED.secret}@@`\" /ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=False /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n  $setupDriveLetter = \"D:\"\n  $setupPath = \"$setupDriveLetter\\setup.exe\"\n  $validExitCodes = @(0)\n\n  if ($Prerequisites){\n  Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n  }\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplyOSBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $RktTemp = \"$TempDirectory\\rktools.2003\"\n\n  $url = \"@@{BPG_RKTOOLS_URL}@@\"\n  $filePath = \"$TempDirectory\\rktools.exe\"\n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  & $filePath /Q /T:\"$RktTemp\" /C\n  \n  Start-Sleep 10\n\n  $PackageName = \"rktools.2003\"\n  $setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n  $silentArgs = \"/i $RktTemp\\rktools.msi /qn\"\n  $validExitCodes = @(0)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplySQLBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\n  New-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n  \n  Set-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n    ## The parameter you wish to add\n    [Parameter(Mandatory = $true)]\n    $StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n    $inst = $_.Value;\n    $regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n    $props = Get-ItemProperty $regKey\n    $params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n    #$params | ft -AutoSize\n    $hasFlag = $false\n    foreach ($param in $params) {\n        if($param.Value -eq $StartupParameter) {\n            $hasFlag = $true\n            break;\n        }\n    }\n    if (-not $hasFlag) {\n        \"Adding $StartupParameter\"\n        $newRegProp = \"SQLArg\"+($params.Count)\n        Set-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n    } else {\n        \"$StartupParameter already set\"\n    }\n}'\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n        @total_mem decimal (10,0),`r`n\n\t\t@min int,`r`n\n\t\t@max int`r`n\nSELECT `r`n\n   --SELECT (physical_memory_kb/1024) AS Server_Physical_Memory_MB`r`n\n  @total_mem = (physical_memory_kb/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n  #create directories\n  mkdir G:\\SQLDATA01\\\n  mkdir H:\\SQLDATA02\\\n  mkdir I:\\TEMPDB01\\\n  mkdir J:\\TEMPDB02\\\n  mkdir L:\\UserDB-logs01\\\n  mkdir T:\\TempDB-logs01\\\n  mkdir R:\\SQLBACK\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  stop-service MSSQL* \n  Start-Sleep 5\n  rm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FirewallRules", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\nNew-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger/RPC\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 2382 -Action allow\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "description": "", "name": "b58c360f_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "87d54973_dag", "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, "message_list": [], "variable_list": [], "uuid": "55be7841-1794-4879-b392-d02123f62671"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "c5e51cfd_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}], "description": "", "name": "8cc4ed37_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "c5e51cfd_dag", "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}, "message_list": [], "variable_list": [], "uuid": "113ccac4-76a3-4ff7-9c41-cd56ef955717"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "edf06eb4-1bc4-4372-8bf3-635ce26f651c"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "d3e93371-a612-4619-ad2b-a5946dc220e3"}, "message_list": [], "variable_list": [], "uuid": "b92967fc-5b86-4a9d-94c2-44d2f957429b"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "6c3185c1-5621-45fb-aaed-ab15b41b1222", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "9a4699f6-4e88-4c0b-a5fd-96d13580ef79"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "f852f912-6b2d-458d-b6e5-44410f298aa5"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "c34832f5-c723-4f35-b0e1-d1af97d9f213"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "9a4699f6-4e88-4c0b-a5fd-96d13580ef79"}, "edge_type": "inherent", "type": "", "uuid": "4c402b5b-a0dd-4460-937e-08e277963cd6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "f852f912-6b2d-458d-b6e5-44410f298aa5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "f852f912-6b2d-458d-b6e5-44410f298aa5"}, "edge_type": "inherent", "type": "", "uuid": "13ee355a-d527-4705-a75d-046b0e62b046", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "c34832f5-c723-4f35-b0e1-d1af97d9f213"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2940ddd6-e6dd-4c45-bd7f-09c804f16bad"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9a4699f6-4e88-4c0b-a5fd-96d13580ef79"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b01e7edf_runbook", "uuid": "a39a58b5-a90e-4a67-a43e-7c3232e9b262"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f852f912-6b2d-458d-b6e5-44410f298aa5"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b92967fc-5b86-4a9d-94c2-44d2f957429b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c34832f5-c723-4f35-b0e1-d1af97d9f213"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "2940ddd6-e6dd-4c45-bd7f-09c804f16bad"}, "message_list": [], "variable_list": [], "uuid": "89a78eb6-4db5-44b4-9040-1b369cb8d27d"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "26455301-38bd-43c3-83ec-16549706c7ab", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "c29510df-a986-4df6-ad67-f5a883e7e699"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "7ce8abd0-efe5-4ff5-9c99-e580c4b150af"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "c29510df-a986-4df6-ad67-f5a883e7e699"}, "edge_type": "inherent", "type": "", "uuid": "deedd0ae-9143-4444-bb0a-0aec54dec3bb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "7ce8abd0-efe5-4ff5-9c99-e580c4b150af"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "934d5faf-1c97-4222-ba45-1ab22fb64c08"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "0427ed21-9dac-4ea8-99c1-fc4d7b7d1b9b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c29510df-a986-4df6-ad67-f5a883e7e699"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "7ce8abd0-efe5-4ff5-9c99-e580c4b150af"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "934d5faf-1c97-4222-ba45-1ab22fb64c08"}, "message_list": [], "variable_list": [], "uuid": "6269732d-eaea-4b3a-9f36-96a00fa03c9b"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "b9573437-deed-4036-9446-05e085f9f963", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "24843906-7391-45bb-ab99-9f055f1c1bf4"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "de1bb04e-a957-4182-b7b1-7fa4a211a240"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "24843906-7391-45bb-ab99-9f055f1c1bf4"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "de1bb04e-a957-4182-b7b1-7fa4a211a240"}, "message_list": [], "variable_list": [], "uuid": "453118e2-704f-4f2d-ab88-5109d699d0c0"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "73f6da4e-4f27-4815-b125-b9cd8427c523", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "562bb18a-b441-4d56-b641-1271a3a49c2e"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "92eabe15-be71-48ff-a6e2-bba419449fbf"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "a059f54d_runbook", "uuid": "1617b3ea-3974-4bf5-87c0-ce246b212025"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "562bb18a-b441-4d56-b641-1271a3a49c2e"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "92eabe15-be71-48ff-a6e2-bba419449fbf"}, "message_list": [], "variable_list": [], "uuid": "952ddfb3-bdf0-498d-af4e-ed3325ab804a"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "a07cc3a1-d2d6-4cf6-81b1-f81570a79b99", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "01bf1710-ec4d-4129-9b5a-7de1cef4a1be"}], "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a3e05bd8-18f3-49c5-93a5-ee4e22dac423"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "01bf1710-ec4d-4129-9b5a-7de1cef4a1be"}], "description": "", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "a3e05bd8-18f3-49c5-93a5-ee4e22dac423"}, "message_list": [], "variable_list": [], "uuid": "bb01b17b-61c9-436e-8798-0b777de24b4b"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}], "name": "MSSQLPackage", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "name": "87d54973_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Enable Credssp", "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, "edge_type": "user_defined", "type": "", "uuid": "8714eb4b-508d-4947-91d2-4e6416c8b5ec", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, "edge_type": "user_defined", "type": "", "uuid": "0ea72dc9-dea7-40c1-bd7d-22bee24b0ee2", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, "edge_type": "user_defined", "type": "", "uuid": "f375606e-03c1-479d-899d-21712d9f5d1f", "to_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}}, {"from_task_reference": {"kind": "app_task", "name": "InitializeDisk", "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, "edge_type": "user_defined", "type": "", "uuid": "32e88ea7-a01c-4577-88ee-f76d23a9cd45", "to_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallSQL", "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, "edge_type": "user_defined", "type": "", "uuid": "d43d9165-1c44-444b-ba97-e565833debee", "to_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplyOSBPG", "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, "edge_type": "user_defined", "type": "", "uuid": "85e0556e-9a3e-4be9-90b8-675e0fbbb6bc", "to_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplySQLBPG", "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, "edge_type": "user_defined", "type": "", "uuid": "9e4c591c-bc3b-e696-275d-5d40499b4179", "to_task_reference": {"kind": "app_task", "name": "FirewallRules", "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable Credssp", "state": "ACTIVE", "attrs": {"script": "Enable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "ef207880-0a10-44ed-b3e1-66f77f4f50dc"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6f84d5bc-d35f-45f1-aa45-c455b775452a"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(60)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "5a642f26-74e4-48f9-b652-61ef53841462"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InitializeDisk", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $start_time = Get-Date\n\n  Get-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n  # Format SQL binaries disk\n  New-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format SQL backup/restore disk\n  New-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB DATA drives\n  New-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB TEMP drives\n  New-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB LOGS drives\n  New-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  #Format drive with 64K block size, assigns Label and drive letter\n  Format-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \n  Format-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \n  Format-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \n  Format-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \n  Format-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \n  Format-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \n  Format-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \n  Format-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "384ecdee-98d1-4eae-b07b-f8f6f660b640"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallSQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n  $edition = \"Standard\"\n  $HOSTNAME=$(hostname)\n  $PackageName = \"MsSqlServer2014Standard\"\n  $Prerequisites = \"Net-Framework-Core\"\n  $silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL /SECURITYMODE=sql /SAPWD=`\"@@{SQL_CRED.secret}@@`\" /ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=False /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n  $setupDriveLetter = \"D:\"\n  $setupPath = \"$setupDriveLetter\\setup.exe\"\n  $validExitCodes = @(0)\n\n  if ($Prerequisites){\n  Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n  }\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0f41b3a1-0109-44c7-b354-800ffcaa80f9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplyOSBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $RktTemp = \"$TempDirectory\\rktools.2003\"\n\n  $url = \"@@{BPG_RKTOOLS_URL}@@\"\n  $filePath = \"$TempDirectory\\rktools.exe\"\n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  & $filePath /Q /T:\"$RktTemp\" /C\n  \n  Start-Sleep 10\n\n  $PackageName = \"rktools.2003\"\n  $setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n  $silentArgs = \"/i $RktTemp\\rktools.msi /qn\"\n  $validExitCodes = @(0)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "852fcbe1-a219-4e37-93fc-dd6793edbfad"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ApplySQLBPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\n  New-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n  \n  Set-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n    ## The parameter you wish to add\n    [Parameter(Mandatory = $true)]\n    $StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n    $inst = $_.Value;\n    $regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n    $props = Get-ItemProperty $regKey\n    $params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n    #$params | ft -AutoSize\n    $hasFlag = $false\n    foreach ($param in $params) {\n        if($param.Value -eq $StartupParameter) {\n            $hasFlag = $true\n            break;\n        }\n    }\n    if (-not $hasFlag) {\n        \"Adding $StartupParameter\"\n        $newRegProp = \"SQLArg\"+($params.Count)\n        Set-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n    } else {\n        \"$StartupParameter already set\"\n    }\n}'\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n        @total_mem decimal (10,0),`r`n\n\t\t@min int,`r`n\n\t\t@max int`r`n\nSELECT `r`n\n   --SELECT (physical_memory_kb/1024) AS Server_Physical_Memory_MB`r`n\n  @total_mem = (physical_memory_kb/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n  #create directories\n  mkdir G:\\SQLDATA01\\\n  mkdir H:\\SQLDATA02\\\n  mkdir I:\\TEMPDB01\\\n  mkdir J:\\TEMPDB02\\\n  mkdir L:\\UserDB-logs01\\\n  mkdir T:\\TempDB-logs01\\\n  mkdir R:\\SQLBACK\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  stop-service MSSQL* \n  Start-Sleep 5\n  rm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d0049e32-6b86-4828-b489-04d7359a2375"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FirewallRules", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\nNew-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger/RPC\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 2382 -Action allow\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN", "uuid": "59ce522c-1961-4039-8df6-ab89d6de936d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7a6749b3-e277-9cf5-c226-c8022c89d1ce"}], "description": "", "name": "b58c360f_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "87d54973_dag", "uuid": "fa0a605f-bc39-4947-864f-253d5b3f0b0a"}, "message_list": [], "variable_list": [], "uuid": "55be7841-1794-4879-b392-d02123f62671"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "c5e51cfd_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}], "description": "", "name": "8cc4ed37_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "c5e51cfd_dag", "uuid": "7c0d85bf-ad2d-4c7b-b186-b1e1f86846bc"}, "message_list": [], "variable_list": [], "uuid": "113ccac4-76a3-4ff7-9c41-cd56ef955717"}}, "variable_list": [], "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}], "app_profile_list": [{"deployment_create_list": [{"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "393c0057-3c51-49ef-9c02-2072fcd22c8c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "dc0db7f7-1067-4037-93d2-14d0930885b6"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "a88ffe40-98e0-4d0b-867e-346efbcc8e2c"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "e15c33ad-11c9-41b9-a33e-a3373b944c86"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "edaed827-fcaf-4f29-b905-d565b8006f1d"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "cc8b8b35-425f-4a11-9c1d-12cc705f93cc"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "edaed827-fcaf-4f29-b905-d565b8006f1d"}, "edge_type": "inherent", "type": "", "uuid": "bd125ee9-0fab-4f05-aa7a-d14e1c3f7684", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "cc8b8b35-425f-4a11-9c1d-12cc705f93cc"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "e15c33ad-11c9-41b9-a33e-a3373b944c86"}, "edge_type": "inherent", "type": "", "uuid": "1be41a68-f21c-4304-994b-447dffc15241", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "edaed827-fcaf-4f29-b905-d565b8006f1d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "a88ffe40-98e0-4d0b-867e-346efbcc8e2c"}, "edge_type": "inherent", "type": "", "uuid": "da7f2847-a1c6-4b4c-8b41-a764a352ba4f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "e15c33ad-11c9-41b9-a33e-a3373b944c86"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "dc0db7f7-1067-4037-93d2-14d0930885b6"}, "edge_type": "inherent", "type": "", "uuid": "4e4c4a79-ac84-46e9-a6f9-a2c30ab759be", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "a88ffe40-98e0-4d0b-867e-346efbcc8e2c"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c82e9319-247e-4ddf-9e9a-8ab1234a82c6"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "dc0db7f7-1067-4037-93d2-14d0930885b6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "4ba9df01-c158-4272-8749-afddb8926081"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a88ffe40-98e0-4d0b-867e-346efbcc8e2c"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "11e05238-d1c5-4106-959b-08007793d420"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e15c33ad-11c9-41b9-a33e-a3373b944c86"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "5730e30f_runbook", "uuid": "4a3a8eae-c03a-4779-8527-3fffc9a82c0c"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "edaed827-fcaf-4f29-b905-d565b8006f1d"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cc8b8b35-425f-4a11-9c1d-12cc705f93cc"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "c82e9319-247e-4ddf-9e9a-8ab1234a82c6"}, "message_list": [], "variable_list": [], "uuid": "00958841-8534-4770-91ce-3f6045f2500e"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "e087d30e-e5eb-478c-a570-92530252e38c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "0fddf2b2-4e78-4bf1-8931-a0cc28c91b11"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "0803d98c-1b19-42a4-8f0d-468c99e63ac3"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "0fddf2b2-4e78-4bf1-8931-a0cc28c91b11"}, "edge_type": "inherent", "type": "", "uuid": "d88df86c-28c7-4c91-9b38-15bce7ea10f5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "0803d98c-1b19-42a4-8f0d-468c99e63ac3"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "39f116e6-95ec-4fac-986a-4be3c1d24d28"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "f2d95d01-71c9-4a32-b982-61272b912ec8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0fddf2b2-4e78-4bf1-8931-a0cc28c91b11"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0803d98c-1b19-42a4-8f0d-468c99e63ac3"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "39f116e6-95ec-4fac-986a-4be3c1d24d28"}, "message_list": [], "variable_list": [], "uuid": "911ba287-9013-46c2-9b33-b5f2d634dc98"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "27fd7d5b-0624-4508-a414-399d749bebe5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "28921637-e511-45b0-a15e-dd9f152ebb53"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "1fc6dc4b-cde9-46c1-9879-99a56f45cde5"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "28921637-e511-45b0-a15e-dd9f152ebb53"}, "edge_type": "inherent", "type": "", "uuid": "d22700ae-ac4c-4322-ac88-32af3526f6f3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "1fc6dc4b-cde9-46c1-9879-99a56f45cde5"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b8ded5ce-1035-40da-9a57-477c761a5865"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "f635fcc1-d3f8-459e-aa05-df344d310dc5"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "28921637-e511-45b0-a15e-dd9f152ebb53"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "a059f54d_runbook", "uuid": "1617b3ea-3974-4bf5-87c0-ce246b212025"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1fc6dc4b-cde9-46c1-9879-99a56f45cde5"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "b8ded5ce-1035-40da-9a57-477c761a5865"}, "message_list": [], "variable_list": [], "uuid": "fb661ba7-2321-44e8-8439-3102f3f02e86"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "d89b8cb6-eecc-4f85-8036-e472343a038d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "bc5a230d-e760-49b9-86b3-33f20c33f917"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "b2261a56-334e-499e-afbb-b487a1a4bbf1"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "bc5a230d-e760-49b9-86b3-33f20c33f917"}, "edge_type": "inherent", "type": "", "uuid": "baa0d78e-561e-472a-8120-57e691b782f4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "b2261a56-334e-499e-afbb-b487a1a4bbf1"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d6665126-a2cb-40cd-aedd-81320b9e37ed"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bc5a230d-e760-49b9-86b3-33f20c33f917"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7331e991-21f7-4e7b-8806-32bc848571f9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b2261a56-334e-499e-afbb-b487a1a4bbf1"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "d6665126-a2cb-40cd-aedd-81320b9e37ed"}, "message_list": [], "variable_list": [], "uuid": "66c999c6-08be-4025-a539-7bf90f35a5c2"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "b21feae5-cf27-4c74-a2c8-9599ab1efb80", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "a9eb366d-693d-4405-88c7-e888ec3a08f2"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "b9856302-b7e8-4d89-aff2-9584926bbb26"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "5b8513fe-e643-4a7d-b83c-9ab52cd9646f"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "2666996f-e2b5-458b-b54d-0980b753febb"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "2a33948f-21a3-419f-a1cb-57024dc2d6fa"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "a9eb366d-693d-4405-88c7-e888ec3a08f2"}, "edge_type": "inherent", "type": "", "uuid": "fa3abe00-87fb-47dc-bbaf-be9510d8fdcc", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "b9856302-b7e8-4d89-aff2-9584926bbb26"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "b9856302-b7e8-4d89-aff2-9584926bbb26"}, "edge_type": "inherent", "type": "", "uuid": "b0505065-4221-4b0a-8d73-c15e8b8b1db5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "5b8513fe-e643-4a7d-b83c-9ab52cd9646f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "2666996f-e2b5-458b-b54d-0980b753febb"}, "edge_type": "inherent", "type": "", "uuid": "7f47a8d9-006a-4383-98fb-000dbf04d0a9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "2a33948f-21a3-419f-a1cb-57024dc2d6fa"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "5b8513fe-e643-4a7d-b83c-9ab52cd9646f"}, "edge_type": "inherent", "type": "", "uuid": "9346e408-6eab-4535-92af-b8f25a46cf6c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "2666996f-e2b5-458b-b54d-0980b753febb"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5bab8beb-6e1e-4722-9eeb-12f2b8fbd053"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a9eb366d-693d-4405-88c7-e888ec3a08f2"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b01e7edf_runbook", "uuid": "a39a58b5-a90e-4a67-a43e-7c3232e9b262"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b9856302-b7e8-4d89-aff2-9584926bbb26"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b92967fc-5b86-4a9d-94c2-44d2f957429b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5b8513fe-e643-4a7d-b83c-9ab52cd9646f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "3ca40424-5f1a-4c83-8e60-87dc99f7cc60"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2666996f-e2b5-458b-b54d-0980b753febb"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "2a33948f-21a3-419f-a1cb-57024dc2d6fa"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "5bab8beb-6e1e-4722-9eeb-12f2b8fbd053"}, "message_list": [], "variable_list": [], "uuid": "d9ab285e-aca9-4fc3-a9ca-5f95090d36f1"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "edd0b271-850a-44bd-bc99-e19684235202", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "cd2c1922-b627-4719-a645-563f9cee8e2a"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a61b7941-9656-455a-81e6-c368e8eed12d"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "cd2c1922-b627-4719-a645-563f9cee8e2a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "a61b7941-9656-455a-81e6-c368e8eed12d"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "146f3ab5-4700-44c8-88cb-20d4e1ba53a2"}], "uuid": "b60d6b85-db80-4c15-afd9-89d0e3025ae8"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "dd45ed35-467b-4e31-9fd2-940bc7976c81", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "d04be93c-209f-4241-ae3d-36da5307d295"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9b0c5b22-3565-466c-aacf-6cf9883f81ee"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "d04be93c-209f-4241-ae3d-36da5307d295"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "9b0c5b22-3565-466c-aacf-6cf9883f81ee"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "6d243893-9edd-48a1-9d32-e6810a4a1fe2"}], "uuid": "3c35bc35-9fef-4105-8bc9-71c231535195"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "2b814898-3645-4c8b-82e6-f211d849d0c8", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "d9e024e3-b669-43e0-b81d-b489c2fd0d2d"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "69bb6ef3-b58e-4877-ae03-2e926b08f818"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "5fd44fc4-50e3-4619-8dc6-be0e06d42cca"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "f29d2a99-1c77-48cc-b9b4-5a6fb8be81a0"}], "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "d9e024e3-b669-43e0-b81d-b489c2fd0d2d"}, "edge_type": "inherent", "type": "", "uuid": "eb5b5384-3fee-4f8d-9a9e-5d40b6a31d57", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "69bb6ef3-b58e-4877-ae03-2e926b08f818"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "5fd44fc4-50e3-4619-8dc6-be0e06d42cca"}, "edge_type": "inherent", "type": "", "uuid": "9d0f1268-d7d0-4d7b-9e6d-f513985fa5cb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "f29d2a99-1c77-48cc-b9b4-5a6fb8be81a0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "69bb6ef3-b58e-4877-ae03-2e926b08f818"}, "edge_type": "inherent", "type": "", "uuid": "da300a2e-c189-4cae-a79c-55845447f698", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "5fd44fc4-50e3-4619-8dc6-be0e06d42cca"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "db7ea93a-22cb-4bf3-aa29-9a0b661fa779"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "0427ed21-9dac-4ea8-99c1-fc4d7b7d1b9b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d9e024e3-b669-43e0-b81d-b489c2fd0d2d"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "69bb6ef3-b58e-4877-ae03-2e926b08f818"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "bc563a94-b48b-4f11-a9b2-d1ea6cf06d75"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5fd44fc4-50e3-4619-8dc6-be0e06d42cca"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "f29d2a99-1c77-48cc-b9b4-5a6fb8be81a0"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "db7ea93a-22cb-4bf3-aa29-9a0b661fa779"}, "message_list": [], "variable_list": [], "uuid": "ebae8c68-174a-4ba1-903a-ce4d215b8334"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "49669086_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}], "substrate_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "min_replicas": "1", "variable_list": [], "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "20dfd2ed-cc4b-4d54-878b-86413098c2de", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "7b7db275-dd11-4ece-a21d-79f198992811"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "88086257-ff6d-4e58-84a3-a01f8ffcb293"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "33ff76d5-a38a-4ebf-ae3e-493678a00ce5"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "33ce9f0b-5a02-4499-8586-3b52d0b44f48"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "6df4fc3f-e6c7-4aa7-86ef-b0e70c685c47"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "33ce9f0b-5a02-4499-8586-3b52d0b44f48"}, "edge_type": "inherent", "type": "", "uuid": "702cb5f4-565e-4ebf-877f-cc1a926841b2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "6df4fc3f-e6c7-4aa7-86ef-b0e70c685c47"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "33ff76d5-a38a-4ebf-ae3e-493678a00ce5"}, "edge_type": "inherent", "type": "", "uuid": "9745f2d1-8151-470c-aed7-63c7a3feaf1a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "33ce9f0b-5a02-4499-8586-3b52d0b44f48"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "88086257-ff6d-4e58-84a3-a01f8ffcb293"}, "edge_type": "inherent", "type": "", "uuid": "5d651194-0c63-4e59-ab20-14a2f355ef6b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "33ff76d5-a38a-4ebf-ae3e-493678a00ce5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "7b7db275-dd11-4ece-a21d-79f198992811"}, "edge_type": "inherent", "type": "", "uuid": "8e15099f-8d46-43b2-8978-7a5b78d4ea5d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "88086257-ff6d-4e58-84a3-a01f8ffcb293"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0490956d-af3f-4422-b4b7-14bc9eacc504"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "7b7db275-dd11-4ece-a21d-79f198992811"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "4ba9df01-c158-4272-8749-afddb8926081"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "88086257-ff6d-4e58-84a3-a01f8ffcb293"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "11e05238-d1c5-4106-959b-08007793d420"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "33ff76d5-a38a-4ebf-ae3e-493678a00ce5"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "5730e30f_runbook", "uuid": "4a3a8eae-c03a-4779-8527-3fffc9a82c0c"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "33ce9f0b-5a02-4499-8586-3b52d0b44f48"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6df4fc3f-e6c7-4aa7-86ef-b0e70c685c47"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "0490956d-af3f-4422-b4b7-14bc9eacc504"}, "message_list": [], "variable_list": [], "uuid": "02cfd7fa-d44d-4f6c-bbde-943c1e698c55"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "f189d7ea-d354-45fd-832b-78e4759bad4b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "59b25539-c899-4184-a298-bc961d282efb"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "db349a42-1e98-4615-859f-34c4dcefad82"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "59b25539-c899-4184-a298-bc961d282efb"}, "edge_type": "inherent", "type": "", "uuid": "a45b41fb-b13d-44d4-85b5-263c0ca69cf3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "db349a42-1e98-4615-859f-34c4dcefad82"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "83623942-b71c-4add-bf36-658e6f764ee5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "f2d95d01-71c9-4a32-b982-61272b912ec8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "59b25539-c899-4184-a298-bc961d282efb"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0263f5a9_runbook", "uuid": "ec4f41c5-a12f-464b-a94f-f81c57915eff"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "db349a42-1e98-4615-859f-34c4dcefad82"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "83623942-b71c-4add-bf36-658e6f764ee5"}, "message_list": [], "variable_list": [], "uuid": "32a22ad2-56a4-4c04-89d4-9d729a457faa"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "a438d396-e45a-427c-ab0f-1136f2b19b24", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "1c3617a8-57b7-4b75-a2bd-6820eadb5e17"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "e85bca91-1140-4c32-8d5e-a7023484ae9a"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "1c3617a8-57b7-4b75-a2bd-6820eadb5e17"}, "edge_type": "inherent", "type": "", "uuid": "08aa8383-c804-44ba-a2c3-9011de65c129", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "e85bca91-1140-4c32-8d5e-a7023484ae9a"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0145873f-604e-47d8-8f7c-b8a5466e7898"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "f635fcc1-d3f8-459e-aa05-df344d310dc5"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1c3617a8-57b7-4b75-a2bd-6820eadb5e17"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "a059f54d_runbook", "uuid": "1617b3ea-3974-4bf5-87c0-ce246b212025"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e85bca91-1140-4c32-8d5e-a7023484ae9a"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "0145873f-604e-47d8-8f7c-b8a5466e7898"}, "message_list": [], "variable_list": [], "uuid": "8bcacfde-a950-4129-842f-98445c70c205"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "a0fe6f9f-b353-4553-8d9b-ae4936082832", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "6171bf93-d334-43ab-a742-30fe1231bfe8"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7bc47ff6-e7fb-49d3-ac75-82a66a9254ec"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "6171bf93-d334-43ab-a742-30fe1231bfe8"}, "edge_type": "inherent", "type": "", "uuid": "679412f1-df47-4f40-8e1f-5dd762ca1dc2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7bc47ff6-e7fb-49d3-ac75-82a66a9254ec"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7bf233b9-b92b-442a-b537-9f719e05fec6"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6171bf93-d334-43ab-a742-30fe1231bfe8"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "7331e991-21f7-4e7b-8806-32bc848571f9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7bc47ff6-e7fb-49d3-ac75-82a66a9254ec"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "7bf233b9-b92b-442a-b537-9f719e05fec6"}, "message_list": [], "variable_list": [], "uuid": "5103913f-a3d1-4b55-aa75-460e5fbdbc28"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "1e8f5497-b20c-443e-b7f2-e2328113bbb9", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "b7092e82-d54d-459e-8cf3-0e952a87e2f6"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "2bbdb53e-069d-4f38-8673-0f93c319bff3"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b23cb03e-b662-40df-8644-c8cdd3647147"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "eb803f94-d783-49f2-a822-402033d60816"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "011ebb5f-7044-4337-b6af-cad3d2d394bc"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "b7092e82-d54d-459e-8cf3-0e952a87e2f6"}, "edge_type": "inherent", "type": "", "uuid": "7b92dc83-8543-4958-8901-a8032b2f831b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "2bbdb53e-069d-4f38-8673-0f93c319bff3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "2bbdb53e-069d-4f38-8673-0f93c319bff3"}, "edge_type": "inherent", "type": "", "uuid": "16ef0f67-113c-474e-a56b-553a55306293", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b23cb03e-b662-40df-8644-c8cdd3647147"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "eb803f94-d783-49f2-a822-402033d60816"}, "edge_type": "inherent", "type": "", "uuid": "dff0b29a-42c9-4403-a50a-68f9e296452a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "011ebb5f-7044-4337-b6af-cad3d2d394bc"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b23cb03e-b662-40df-8644-c8cdd3647147"}, "edge_type": "inherent", "type": "", "uuid": "7744b72f-6299-49f0-b9cc-b8c94909c84c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "eb803f94-d783-49f2-a822-402033d60816"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5f5de504-a5eb-4d45-bce9-3bafb096b157"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "8aadc288_runbook", "uuid": "f8c7ce27-e6f3-417e-94fe-001bf8188f26"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b7092e82-d54d-459e-8cf3-0e952a87e2f6"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b01e7edf_runbook", "uuid": "a39a58b5-a90e-4a67-a43e-7c3232e9b262"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2bbdb53e-069d-4f38-8673-0f93c319bff3"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "b92967fc-5b86-4a9d-94c2-44d2f957429b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b23cb03e-b662-40df-8644-c8cdd3647147"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "3ca40424-5f1a-4c83-8e60-87dc99f7cc60"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "eb803f94-d783-49f2-a822-402033d60816"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "011ebb5f-7044-4337-b6af-cad3d2d394bc"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "5f5de504-a5eb-4d45-bce9-3bafb096b157"}, "message_list": [], "variable_list": [], "uuid": "fbcbcbec-93e2-4f27-b7c4-f4472ff38d4c"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "e2cedade-8bb8-4108-a2cd-eab013c810f3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "8604dc97-30e1-4579-902d-0154ffa6c1e8"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "184e6217-7a7e-45fc-bedd-11bc817b07e6"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "ebfebfdf-7928-4f96-85ce-49e0b1dd7c43"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "41858ab5-5c54-4d37-ad79-f781c560cacd"}], "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "8604dc97-30e1-4579-902d-0154ffa6c1e8"}, "edge_type": "inherent", "type": "", "uuid": "9c28e559-a40a-4c95-b3bd-5969e89358f9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "184e6217-7a7e-45fc-bedd-11bc817b07e6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "ebfebfdf-7928-4f96-85ce-49e0b1dd7c43"}, "edge_type": "inherent", "type": "", "uuid": "4dd5018e-57de-4d43-9753-ba933fbf03f0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "uuid": "41858ab5-5c54-4d37-ad79-f781c560cacd"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "uuid": "184e6217-7a7e-45fc-bedd-11bc817b07e6"}, "edge_type": "inherent", "type": "", "uuid": "ce81f345-25e7-490c-ab38-d275b387a822", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "ebfebfdf-7928-4f96-85ce-49e0b1dd7c43"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f5f75189-853f-4fb2-9a32-99d042c8da57"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "5ce1c536-f980-48b7-bbbf-18f3165a3031"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5ce1c536_f980_48b7_bbbf_18f3165a3031", "uuid": "0427ed21-9dac-4ea8-99c1-fc4d7b7d1b9b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8604dc97-30e1-4579-902d-0154ffa6c1e8"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage", "uuid": "80b71fb4-3750-4e00-9045-9ee0b4f3807f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80b71fb4_3750_4e00_9045_9ee0b4f3807f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "184e6217-7a7e-45fc-bedd-11bc817b07e6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "MSSQL2014", "uuid": "54b6ef12-2f6a-4a2e-aebf-9e9ee7c5fa67"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_54b6ef12_2f6a_4a2e_aebf_9e9ee7c5fa67", "uuid": "bc563a94-b48b-4f11-a9b2-d1ea6cf06d75"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ebfebfdf-7928-4f96-85ce-49e0b1dd7c43"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "49669086_deployment", "uuid": "5f3e4522-122e-4399-83bb-649c49c221c2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_5f3e4522_122e_4399_83bb_649c49c221c2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "41858ab5-5c54-4d37-ad79-f781c560cacd"}], "description": "", "name": "SYS_GEN__Runbook_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_82786e80_5e77_4287_b4d2_c39edeea9963", "uuid": "f5f75189-853f-4fb2-9a32-99d042c8da57"}, "message_list": [], "variable_list": [], "uuid": "29c83893-d366-4f25-936f-3d9d655c9ca2"}, "message_list": [], "name": "action_soft_delete"}], "name": "Nutanix", "state": "ACTIVE", "message_list": [], "dependency_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "AD_IP", "type": "LOCAL", "value": "10.5.73.68", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "15fbc17c-0850-4fad-b1ad-4d8c80f5d882"}, {"val_type": "STRING", "description": "", "name": "DOMAIN", "type": "LOCAL", "value": "nucalm.com", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "9f0096be-6d8f-4016-b194-4a76e7cb1be3"}, {"val_type": "STRING", "description": "", "name": "INCLUDE_BPG", "type": "LOCAL", "value": "yes", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "8fde175f-2435-9c9f-d770-f55e1b8d69d8"}, {"val_type": "STRING", "description": "", "name": "BPG_RKTOOLS_URL", "type": "LOCAL", "value": "http://download.microsoft.com/download/8/e/c/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057/rktools.exe", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "d0df32f0-6455-c218-7a26-6fe859b0f7ee"}], "uuid": "82786e80-5e77-4287-b4d2-c39edeea9963"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL", "uuid": "cc035909-5ef9-440f-937a-93173b772d35"}, "type": "USER"}, "name": "MSSQL2014"}, "spec": {"description": "", "resources": {"service_definition_list": [{"singleton": false, "name": "MSSQL", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "030017c3_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "030017c3_dag"}, "name": "5730e30f_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes created VMs as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "6f5f997d_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "6f5f997d_dag"}, "name": "b01e7edf_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "c2b90e7d_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "c2b90e7d_dag"}, "name": "0263f5a9_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "00b1cc9f_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "00b1cc9f_dag"}, "name": "8aadc288_runbook"}}, {"critical": false, "type": "system", "description": "System action for restarting an application", "name": "action_restart", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "6c4b7c3b_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "6c4b7c3b_dag"}, "name": "a059f54d_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [{"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "EXECUTION_MODE"}], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "POWERSHELL", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "300", "connection_port": 5985}, "editables": {"readiness_probe": {"connection_type": true, "connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"1": {"data_source_reference": true, "device_properties": {"device_type": true, "disk_address": {"adapter_type": true}}}, "0": {"data_source_reference": true, "device_properties": {"disk_address": {"adapter_type": true}, "device_type": true}}, "3": {"disk_size_mib": true}, "2": {"disk_size_mib": true}, "5": {"disk_size_mib": true}, "4": {"disk_size_mib": true}, "7": {"disk_size_mib": true}, "6": {"disk_size_mib": true}, "9": {"disk_size_mib": true}, "8": {"disk_size_mib": true}}}}}, "os_type": "Windows", "type": "AHV_VM", "create_spec": {"name": "MSSQL-@@{calm_application_name}@@", "categories": "", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cbc0c43a-5b92-49b2-9851-5a10041b6d1b"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>MSSQL@@{calm_random}@@</ComputerName>\n         <RegisteredOrganization>Nutanix</RegisteredOrganization>\n         <RegisteredOwner>Acropolis</RegisteredOwner>\n         <TimeZone>UTC</TimeZone>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}}, {"data_source_reference": {"kind": "image", "type": "", "name": "SQLServer2014SP2-FullSlipstream-x64-ENU", "uuid": "0be4cd78-184b-4319-96fa-d949c686ccde"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "device_type": "CDROM", "disk_address": {"adapter_type": "IDE", "device_index": 0, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 51200, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 1, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 153600, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 2, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 3, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 307200, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 4, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 5, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 6, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 7, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 8, "type": ""}}}]}}, "variable_list": [], "name": "MSSQL2014"}], "credential_definition_list": [{"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "LOCAL"}, {"username": "administrator@nucalm.com", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "DOMAIN_CRED"}, {"username": "nucalm\\administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "SQL_CRED"}, {"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "KARAN"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "MSSQL"}], "version": "", "type": "DEB", "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Enable Credssp"}, {"kind": "app_task", "name": "AddToDomain"}, {"kind": "app_task", "name": "EnableLocalMode"}, {"kind": "app_task", "name": "InitializeDisk"}, {"kind": "app_task", "name": "InstallSQL"}, {"kind": "app_task", "name": "ApplyOSBPG"}, {"kind": "app_task", "name": "ApplySQLBPG"}, {"kind": "app_task", "name": "FirewallRules"}], "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Enable Credssp"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "AddToDomain"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "InitializeDisk"}}, {"from_task_reference": {"kind": "app_task", "name": "InitializeDisk"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "InstallSQL"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallSQL"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "ApplyOSBPG"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplyOSBPG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "ApplySQLBPG"}}, {"from_task_reference": {"kind": "app_task", "name": "ApplySQLBPG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "FirewallRules"}}], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "87d54973_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "Enable-WSManCredSSP -Role Server -Force"}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "Enable Credssp"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n"}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "AddToDomain"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "SET_VARIABLE", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(60)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "EnableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $start_time = Get-Date\n\n  Get-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\n  Get-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n  # Format SQL binaries disk\n  New-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format SQL backup/restore disk\n  New-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB DATA drives\n  New-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB TEMP drives\n  New-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  # Format DB LOGS drives\n  New-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n  New-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n  #Format drive with 64K block size, assigns Label and drive letter\n  Format-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \n  Format-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \n  Format-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \n  Format-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \n  Format-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \n  Format-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \n  Format-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \n  Format-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "InitializeDisk"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  $DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n  $edition = \"Standard\"\n  $HOSTNAME=$(hostname)\n  $PackageName = \"MsSqlServer2014Standard\"\n  $Prerequisites = \"Net-Framework-Core\"\n  $silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL /SECURITYMODE=sql /SAPWD=`\"@@{SQL_CRED.secret}@@`\" /ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=False /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n  $setupDriveLetter = \"D:\"\n  $setupPath = \"$setupDriveLetter\\setup.exe\"\n  $validExitCodes = @(0)\n\n  if ($Prerequisites){\n  Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n  }\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "InstallSQL"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $RktTemp = \"$TempDirectory\\rktools.2003\"\n\n  $url = \"@@{BPG_RKTOOLS_URL}@@\"\n  $filePath = \"$TempDirectory\\rktools.exe\"\n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  & $filePath /Q /T:\"$RktTemp\" /C\n  \n  Start-Sleep 10\n\n  $PackageName = \"rktools.2003\"\n  $setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n  $silentArgs = \"/i $RktTemp\\rktools.msi /qn\"\n  $validExitCodes = @(0)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n  Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  exit 1\n  }\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n  & $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "ApplyOSBPG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\n  New-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n  \n  Set-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n    ## The parameter you wish to add\n    [Parameter(Mandatory = $true)]\n    $StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n    $inst = $_.Value;\n    $regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n    $props = Get-ItemProperty $regKey\n    $params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n    #$params | ft -AutoSize\n    $hasFlag = $false\n    foreach ($param in $params) {\n        if($param.Value -eq $StartupParameter) {\n            $hasFlag = $true\n            break;\n        }\n    }\n    if (-not $hasFlag) {\n        \"Adding $StartupParameter\"\n        $newRegProp = \"SQLArg\"+($params.Count)\n        Set-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n    } else {\n        \"$StartupParameter already set\"\n    }\n}'\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n        @total_mem decimal (10,0),`r`n\n\t\t@min int,`r`n\n\t\t@max int`r`n\nSELECT `r`n\n   --SELECT (physical_memory_kb/1024) AS Server_Physical_Memory_MB`r`n\n  @total_mem = (physical_memory_kb/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\n  Set-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n  #create directories\n  mkdir G:\\SQLDATA01\\\n  mkdir H:\\SQLDATA02\\\n  mkdir I:\\TEMPDB01\\\n  mkdir J:\\TEMPDB02\\\n  mkdir L:\\UserDB-logs01\\\n  mkdir T:\\TempDB-logs01\\\n  mkdir R:\\SQLBACK\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  stop-service MSSQL* \n  Start-Sleep 5\n  rm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "ApplySQLBPG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\nNew-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger/RPC\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 2382 -Action allow\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "FirewallRules"}], "description": "", "state": "ACTIVE", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "87d54973_dag"}, "name": "b58c360f_runbook"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "MSSQLPackage"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "c5e51cfd_dag"}], "description": "", "state": "ACTIVE", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "c5e51cfd_dag"}, "name": "8cc4ed37_runbook"}}, "variable_list": [], "name": "MSSQLPackage"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "MSSQLPackage"}], "min_replicas": "1", "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "MSSQL2014"}, "type": "GREENFIELD", "variable_list": [], "name": "49669086_deployment"}], "variable_list": [{"val_type": "STRING", "description": "", "value": "10.5.73.68", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "AD_IP"}, {"val_type": "STRING", "description": "", "value": "nucalm.com", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "DOMAIN"}, {"val_type": "STRING", "description": "", "value": "yes", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "INCLUDE_BPG"}, {"val_type": "STRING", "description": "", "value": "http://download.microsoft.com/download/8/e/c/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057/rktools.exe", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "BPG_RKTOOLS_URL"}], "description": "", "action_list": [], "name": "Nutanix"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL"}, "type": "USER", "client_attrs": {"MSSQL": {"y": 100, "x": 480}}}, "name": "MSSQL2014"}, "api_version": "3.0", "metadata": {"last_update_time": "1528454975169694", "creation_time": "1526634862024188", "kind": "blueprint", "spec_version": 42, "name": "MSSQL2014"}}