{"status": {"state": "ACTIVE", "message_list": [], "description": "", "resources": {"service_definition_list": [{"singleton": false, "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "998cb8de-bd49-43fc-866a-d9d4c08a5a0d", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "98f8161b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4ac3add9-9132-4e12-87ba-b1a542ebbde4"}], "description": "", "name": "dade7481_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "98f8161b_dag", "uuid": "4ac3add9-9132-4e12-87ba-b1a542ebbde4"}, "message_list": [], "variable_list": [], "uuid": "7b57f32e-7ebe-4047-bba3-03953b384a73"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "5b75bf72-a89f-4be3-adba-d6ee66190ca0", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "02628fa5_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c9244d40-e09f-4984-a226-8776905afc8b"}], "description": "", "name": "59afb4f4_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "02628fa5_dag", "uuid": "c9244d40-e09f-4984-a226-8776905afc8b"}, "message_list": [], "variable_list": [], "uuid": "25534166-3b0a-4d2a-93e7-f46b0905610d"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "e0eea5d4-21fb-4cfa-bc0c-dc146b239b2b", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "8e5f51b4_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ccd205bc-00db-45c6-bef8-95fbd83e92bf"}], "description": "", "name": "11876906_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "8e5f51b4_dag", "uuid": "ccd205bc-00db-45c6-bef8-95fbd83e92bf"}, "message_list": [], "variable_list": [], "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "4ba9bd05-33a2-445b-9926-1fbfa9184089", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "1a17e568_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7e407c12-ffb8-453b-9e27-6adae472fe7b"}], "description": "", "name": "d2728354_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "1a17e568_dag", "uuid": "7e407c12-ffb8-453b-9e27-6adae472fe7b"}, "message_list": [], "variable_list": [], "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "239427b2-848b-4026-9802-8ce53a88fda5", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "27dfdc04_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "97b1e916-0a96-4307-9dbc-74e031ec2e23"}], "description": "", "name": "4150545e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "27dfdc04_dag", "uuid": "97b1e916-0a96-4307-9dbc-74e031ec2e23"}, "message_list": [], "variable_list": [], "uuid": "3e34379f-79c5-479c-b9a3-aad6349d9d10"}, "message_list": [], "name": "action_restart"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "45f7e990-949a-44c0-989b-8584583081df", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Service_Element_Delete_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "b2305c44-5a14-4ac2-aee9-a00a9c16c9d6"}], "name": "SYS_GEN__DAG_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "13f8556d-daa7-4e5b-b6aa-89a734c861b8"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Service_Element_Delete_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "b2305c44-5a14-4ac2-aee9-a00a9c16c9d6"}], "description": "", "name": "SYS_GEN__Runbook_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "13f8556d-daa7-4e5b-b6aa-89a734c861b8"}, "message_list": [], "variable_list": [], "uuid": "d8317ffe-bbec-4ea4-bacb-4a7c51b4862b"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "MSSQL", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "EXECUTION_MODE", "type": "LOCAL", "value": "", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "6641bf48-94e1-ffe9-7a02-0ca7f0019061"}], "description": ""}, {"singleton": false, "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "7338bb22-c4fb-49ad-8605-c3aa5f1822b2", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SiteCreation", "uuid": "36ffa7ab-b752-4915-8bff-a54f367f52ca"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "010473db-dc8e-4356-8ada-7bc853098c3a"}, {"kind": "app_task", "name": "JoinRemainingNodes", "uuid": "bb46be87-cf61-4ed0-b116-f9ee1126f163"}, {"kind": "app_task", "name": "DIsableLocalMode", "uuid": "a4d14d89-9104-49a1-a1ff-d10b88dd07d2"}, {"kind": "app_task", "name": "CreateResources", "uuid": "b9b9615f-9122-40b9-bd24-88bb54679ec6"}, {"kind": "app_task", "name": "GetFQDN", "uuid": "6a8dc676-933f-4746-813b-5c987c6598be"}], "name": "aaa51f8e_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SiteCreation", "uuid": "36ffa7ab-b752-4915-8bff-a54f367f52ca"}, "edge_type": "user_defined", "type": "", "uuid": "9371c22a-c2db-403f-b503-f2d91ad6e720", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "010473db-dc8e-4356-8ada-7bc853098c3a"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "010473db-dc8e-4356-8ada-7bc853098c3a"}, "edge_type": "user_defined", "type": "", "uuid": "2b28c05d-c2f9-4ead-ae76-c7e891e729df", "to_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes", "uuid": "bb46be87-cf61-4ed0-b116-f9ee1126f163"}}, {"from_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes", "uuid": "bb46be87-cf61-4ed0-b116-f9ee1126f163"}, "edge_type": "user_defined", "type": "", "uuid": "d414b444-cfba-4486-9cdd-4ed0380910b4", "to_task_reference": {"kind": "app_task", "name": "DIsableLocalMode", "uuid": "a4d14d89-9104-49a1-a1ff-d10b88dd07d2"}}, {"from_task_reference": {"kind": "app_task", "name": "DIsableLocalMode", "uuid": "a4d14d89-9104-49a1-a1ff-d10b88dd07d2"}, "edge_type": "user_defined", "type": "", "uuid": "ccdda267-f171-4ff3-b56d-f9e4b42ea78f", "to_task_reference": {"kind": "app_task", "name": "CreateResources", "uuid": "b9b9615f-9122-40b9-bd24-88bb54679ec6"}}, {"from_task_reference": {"kind": "app_task", "name": "CreateResources", "uuid": "b9b9615f-9122-40b9-bd24-88bb54679ec6"}, "edge_type": "user_defined", "type": "", "uuid": "1471b9b2-941b-4a01-bc1d-6bc56d7fe8db", "to_task_reference": {"kind": "app_task", "name": "GetFQDN", "uuid": "6a8dc676-933f-4746-813b-5c987c6598be"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "658d22f1-b4f9-4561-808d-4c040f9fc5b1"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SiteCreation", "state": "ACTIVE", "attrs": {"script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n  echo exiting\n  exit\n}\necho \"@@{MSSQL.address}@@\"\n$DatabaseServer = \"@@{SQL_CLUSTER_NAME}@@\"\n$DatabaseName_Site = \"@@{XD_SITE_NAME}@@\" + \"_Site\"\n$DatabaseName_Logging = \"@@{XD_SITE_NAME}@@\" + \"_Logging\"\n$DatabaseName_Monitor = \"@@{XD_SITE_NAME}@@\" + \"_Monitor\"\n\n# Database user must be sysadmin on db server\n$DatabaseUser = \"@@{SQL_CREDS.username}@@\"\n$DatabasePassword = \"@@{SQL_CREDS.secret}@@\"\n\n$XD7Site = \"@@{XD_SITE_NAME}@@\"\n\n$DatabasePassword = $DatabasePassword | ConvertTo-SecureString -asPlainText -Force\n$Database_CredObject = New-Object System.Management.Automation.PSCredential($DatabaseUser,$DatabasePassword)\n\nAdd-PSSnapin Citrix.*\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Site -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Site -DatabaseCredentials $Database_CredObject\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Logging -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Logging -DatabaseCredentials $Database_CredObject\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Monitor -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Monitor -DatabaseCredentials $Database_CredObject\n\nNew-XDSite -DatabaseServer $DatabaseServer -LoggingDatabaseName $DatabaseName_Logging -MonitorDatabaseName $DatabaseName_Monitor -SiteDatabaseName $DatabaseName_Site -SiteName $XD7Site -AdminAddress $env:COMPUTERNAME \n\nSet-XDLicensing -LicenseServerAddress $ENV:COMPUTERNAME -LicenseServerPort 27000\n$netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n$FullAdminGroup = \"$netbios\\Domain Admins\"\n\nNew-AdminAdministrator -AdminAddress $env:COMPUTERNAME -Name $FullAdminGroup\nAdd-AdminRight -AdminAddress $env:COMPUTERNAME -Administrator $FullAdminGroup -Role 'Full Administrator' -All", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "36ffa7ab-b752-4915-8bff-a54f367f52ca"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "010473db-dc8e-4356-8ada-7bc853098c3a"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "JoinRemainingNodes", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -eq \"0\"){\n  echo \"exiting\"\n  exit\n}\n$script = {\n\t$DatabaseUser = \"@@{SQL_CREDS.username}@@\"\n\t$DatabasePassword = \"@@{SQL_CREDS.secret}@@\"\n    $DatabasePassword = $DatabasePassword | ConvertTo-SecureString -asPlainText -Force\n    $Database_CredObject = New-Object System.Management.Automation.PSCredential($DatabaseUser,$DatabasePassword)\n\n    Add-XDController -AdminAddress @@{address}@@ -SiteControllerAddress @@{calm_array_address[0]}@@ -DatabaseCredentials $Database_CredObject\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "bb46be87-cf61-4ed0-b116-f9ee1126f163"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DIsableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "a4d14d89-9104-49a1-a1ff-d10b88dd07d2"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "CreateResources", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n  exit\n}\n[string]$ConnectionName = \"NutanixAcropolis\"\n[string]$HostingUnitName = \"NutanixResources\"\n[string]$AHVIP = \"@@{CVM_IP}@@\"\n[string]$Username = \"@@{CVM_USERNAME}@@\"\n[string]$Password = \"@@{CVM_PASSWORD}@@\"\n[string]$NetworkId = \"@@{CVM_NETWORK}@@\"\n[string]$ConnectionType = \"Custom\"\n[string]$PluginId = \"AcropolisFactory\"\n\n\n$ErrorActionPreference = \"Stop\"\nAdd-PSSnapin -Name Citrix.*\n\n$connection = Get-Item -Path \"xdhyp:\\Connections\\*\" | Where-Object {$_.PSChildName -eq $ConnectionName}\nif ($connection -eq $null) {\n\n   $connection = New-Item -Path \"xdhyp:\\Connections\" -Name $ConnectionName -ConnectionType $ConnectionType -PluginId $PluginId -HypervisorAddress $AHVIP -UserName $Username -Password $Password -Persist\n\n   New-BrokerHypervisorConnection -HypHypervisorConnectionUid $connection.HypervisorConnectionUid\n\n   $hupath = \"xdhyp:\\HostingUnits\\$HostingUnitName\"\n\n   $rootpath = \"$($connection | select -ExpandProperty FullPath)\" + '\\'\n\n   New-Item -Path $hupath -HypervisorConnectionName $ConnectionName -NetworkPath \"XDHyp:\\Connections\\Nutanix\\$($NetworkId).network\" -RootPath $rootpath\n\n} else {\n    Write-Output \"Connection $ConnectionName already exists\"\n}", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED", "uuid": "1c453aaf-7d3e-4e32-846c-38cbc79f9281"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b9b9615f-9122-40b9-bd24-88bb54679ec6"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "GetFQDN", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "Write-Output \"FQDN=$env:computername.$env:userdnsdomain\"", "eval_variables": ["FQDN"], "eval_scope": "local", "script_type": "sh", "type": "", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED", "uuid": "1c453aaf-7d3e-4e32-846c-38cbc79f9281"}}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "6a8dc676-933f-4746-813b-5c987c6598be"}], "description": "", "name": "29e91e9c_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "aaa51f8e_dag", "uuid": "658d22f1-b4f9-4561-808d-4c040f9fc5b1"}, "message_list": [], "variable_list": [], "uuid": "cf908f54-a25f-4d85-b320-d88fd7d5f906"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "fc7ccaf8-31ef-4a20-876c-9311429a8d66", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "3cea26c0_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8c76e8c9-28c7-43c7-bf0f-fbb3b6da3670"}], "description": "", "name": "22428294_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "3cea26c0_dag", "uuid": "8c76e8c9-28c7-43c7-bf0f-fbb3b6da3670"}, "message_list": [], "variable_list": [], "uuid": "b5c778af-c027-4561-9fef-22b4f7c4ced4"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "f47e2198-7f34-477c-a70c-da0257d2454a", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "dc2f4c2e_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b3d35a65-3a30-4da3-aa50-326801db024a"}], "description": "", "name": "c1427948_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "dc2f4c2e_dag", "uuid": "b3d35a65-3a30-4da3-aa50-326801db024a"}, "message_list": [], "variable_list": [], "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "ddb8e4a4-fe71-4434-a4e0-0e9819e29487", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "2d568762_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5a03a43e-aa6d-4458-ab50-72e9ee4f6eeb"}], "description": "", "name": "b2d07af0_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "2d568762_dag", "uuid": "5a03a43e-aa6d-4458-ab50-72e9ee4f6eeb"}, "message_list": [], "variable_list": [], "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "b56e6c61-0b5f-4b3c-8d7d-4e8bd9589113", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "0038d36c_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "71bcf357-82d8-46df-b8f7-853bc46058ac"}], "description": "", "name": "73c06dcc_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "0038d36c_dag", "uuid": "71bcf357-82d8-46df-b8f7-853bc46058ac"}, "message_list": [], "variable_list": [], "uuid": "84d981c6-1e68-4ef9-867f-b153b4dcf8ad"}, "message_list": [], "name": "action_restart"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "3fd98363-ac76-4be0-9a9e-a6a82f412e13", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Service_Element_Delete_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "8e7fe8b4-f500-41ba-94b1-8bb5e9980978"}], "name": "SYS_GEN__DAG_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f7bdd7ff-28bc-4f21-b9be-3a62a3755e7a"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Service_Element_Delete_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "8e7fe8b4-f500-41ba-94b1-8bb5e9980978"}], "description": "", "name": "SYS_GEN__Runbook_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f7bdd7ff-28bc-4f21-b9be-3a62a3755e7a"}, "message_list": [], "variable_list": [], "uuid": "524cd2ca-0de7-4b00-b2e7-b4f22081e7f4"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "DDC", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "EXECUTION_MODE", "type": "LOCAL", "value": "", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "ba9dceae-0d51-d7cd-d665-4f0913d3c0bd"}, {"val_type": "STRING", "description": "", "name": "FQDN", "type": "LOCAL", "value": "", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "2d3e62a2-8cae-e154-9c4d-46dbf9b89a93"}], "description": ""}, {"singleton": false, "uuid": "813e8187-94f3-440b-8779-cf16c13129b8", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "31dba377-3cb8-4cf6-a3eb-e547db1ef7d2", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "CreateStore", "uuid": "7fb21c7a-56d0-47ab-8a69-6b1e00172682"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "9029a79a-2c7d-4104-b0ba-e53deb811843"}, {"kind": "app_task", "name": "JoinRemainingNodes", "uuid": "1912f790-04de-4b69-aea2-c5fc28adb0ff"}], "name": "52ea23b6_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "CreateStore", "uuid": "7fb21c7a-56d0-47ab-8a69-6b1e00172682"}, "edge_type": "user_defined", "type": "", "uuid": "81d6170b-f2c5-4d74-a708-df3d634d7d7e", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "9029a79a-2c7d-4104-b0ba-e53deb811843"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "9029a79a-2c7d-4104-b0ba-e53deb811843"}, "edge_type": "user_defined", "type": "", "uuid": "0095f4f0-3649-49e2-8504-e45a04ec5879", "to_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes", "uuid": "1912f790-04de-4b69-aea2-c5fc28adb0ff"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "206b7542-ac9d-4f80-8a54-d566c8714a12"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "CreateStore", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$FQDN = \"$env:computername.$env:userdnsdomain\"\n$HostbaseUrl = \"http://\" + $FQDN\n$StoreFriendlyName = \"$env:USERDOMAIN\"\n$StoreFriendlyNameWithoutSpaces = $StoreFriendlyName -replace '\\s',''\n$SiteId = 1\n$Farmtype = \"XenDesktop\"\n$FarmServers = \"@@{DDC.FQDN}@@\".Split(',')\n$StoreVirtualPath = \"/Citrix/\" + $StoreFriendlyNameWithoutSpaces\n$LoadbalanceServers = $false\n$Port = 80\n$SSLRelayPort = 443\n$TransportType = \"HTTP\"\n\n$GatewayUrl = \"\"\n$GatewayCallbackUrl = \"\"\n$GatewaySTAUrls = \"\"\n$GatewaySubnetIP = \"\"\n$GatewayName = \"\"\n\nSet-StrictMode -Version 2.0\n\n# Any failure is a terminating failure.\n$ErrorActionPreference = 'Stop'\n$ReportErrorShowStackTrace = $true\n$ReportErrorShowInnerException = $true\n\n# Import StoreFront modules. Required for versions of PowerShell earlier than 3.0 that do not support autoloading\nImport-Module Citrix.StoreFront\nImport-Module Citrix.StoreFront.Stores\nImport-Module Citrix.StoreFront.Authentication\nImport-Module Citrix.StoreFront.WebReceiver\nImport-Module Citrix.StoreFront.Roaming\n\n# Determine the Authentication and Receiver virtual path to use based of the Store\n$authenticationVirtualPath = \"$($StoreVirtualPath.TrimEnd('/'))Auth\"\n$receiverVirtualPath = \"$($StoreVirtualPath.TrimEnd('/'))Web\"\n\n# Determine if the deployment already exists\n$existingDeployment = Get-STFDeployment\n\nif(-not $existingDeployment)\n{\n    # Install the required StoreFront components\n    Add-STFDeployment -HostBaseUrl $HostbaseUrl -SiteId $SiteId -Confirm:$false\n}\nelseif($existingDeployment.HostbaseUrl -eq $HostbaseUrl)\n{\n    # The deployment exists but it is configured to the desired hostbase url\n    Write-Output \"A deployment has already been created with the specified hostbase url on this server and will be used.\"\n}\nelse\n{\n    Write-Error \"A deployment has already been created on this server with a different host base url.\"\n}\n\n# Determine if the authentication service at the specified virtual path exists\n$authentication = Get-STFAuthenticationService -VirtualPath $authenticationVirtualPath\n\nif(-not $authentication)\n{\n    # Add an Authentication service using the IIS path of the Store appended with Auth\n    $authentication = Add-STFAuthenticationService $authenticationVirtualPath\n}\nelse\n{\n    Write-Output \"An Authentication service already exists at the specified virtual path and will be used.\"\n}\n\n# Determine if the store service at the specified virtual path exists\n$store = Get-STFStoreService -VirtualPath $StoreVirtualPath\n\nif(-not $store)\n{\n    # Add a Store that uses the new Authentication service configured to publish resources from the supplied servers\n    $store = Add-STFStoreService -VirtualPath $StoreVirtualPath -AuthenticationService $authentication -FarmName $Farmtype -FarmType $Farmtype -Servers $FarmServers -LoadBalance $LoadbalanceServers `\n        -Port $Port -SSLRelayPort $SSLRelayPort -TransportType $TransportType\n}\nelse\n{\n    Write-Output \"A Store service already exists at the specified virtual path and will be used. Farm and servers will be appended to this store.\"\n    # Get the number of farms configured in the store\n    $farmCount = (Get-STFStoreFarmConfiguration $store).Farms.Count\n\n    # Append the farm to the store with a unique name\n    Add-STFStoreFarm -StoreService $store -FarmName \"Controller$($farmCount + 1)\" -FarmType $Farmtype -Servers $FarmServers -LoadBalance $LoadbalanceServers -Port $Port `\n        -SSLRelayPort $SSLRelayPort -TransportType $TransportType\n}\n\n# Determine if the receiver service at the specified virtual path exists\n$receiver = Get-STFWebReceiverService -VirtualPath $receiverVirtualPath\n\nif(-not $receiver)\n{\n    # Add a Receiver for Web site so users can access the applications and desktops in the published in the Store\n    $receiver = Add-STFWebReceiverService -VirtualPath $receiverVirtualPath -StoreService $store\n}\nelse\n{\n    Write-Output \"A Web Receiver service already exists at the specified virtual path and will be used.\"\n}\n\n# Determine if PNA is configured for the Store service\n$storePnaSettings = Get-STFStorePna -StoreService $store\n\nif(-not $storePnaSettings.PnaEnabled)\n{\n    # Enable XenApp services on the Store and make it the default for this server\n    Enable-STFStorePna -StoreService $store -AllowUserPasswordChange -DefaultPnaService\n}\n\n# Determine the Authentication and Receiver sites based on the Store\n$store = Get-STFStoreService -VirtualPath $StoreVirtualPath\n$authentication = Get-STFAuthenticationService -StoreService $store\n$receiverForWeb = Get-STFWebReceiverService -StoreService $store\n\n# Get the Web Receiver CitrixAGBasic and ExplicitForms authentication method from the supported protocols\n# Included for demonstration purposes as the protocol name can be used directly if known\n$receiverMethods = Get-STFWebReceiverAuthenticationMethodsAvailable | Where-Object { $_ -match \"Explicit\" -or $_ -match \"CitrixAG\" }\n\n# Enable CitrixAGBasic in Receiver for Web (required for remote access)\nSet-STFWebReceiverAuthenticationMethods -WebReceiverService $receiverForWeb -AuthenticationMethods $receiverMethods\n\n# Get the CitrixAGBasic authentication method from the protocols installed.\n# Included for demonstration purposes as the protocol name can be used directly if known\n$citrixAGBasic = Get-STFAuthenticationProtocolsAvailable | Where-Object { $_ -match \"CitrixAGBasic\" }\n\n# Enable CitrixAGBasic in the Authentication service (required for remote access)\nEnable-STFAuthenticationServiceProtocol -AuthenticationService $authentication -Name $citrixAGBasic\n<#\n# Add a new Gateway used to access the new Store remotely\nAdd-STFRoamingGateway -Name $GatewayName -LogonType Domain -Version Version10_0_69_4 -GatewayUrl $GatewayUrl `\n-CallbackUrl $GatewayCallbackUrl -SecureTicketAuthorityUrls $GatewaySTAUrls\n\n# Get the new Gateway from the configuration (Add-STFRoamingGateway will return the new Gateway if -PassThru is supplied as a parameter)\n$gateway = Get-STFRoamingGateway -Name $GatewayName\n\n# If the gateway subnet was provided then set it on the gateway object\nif($GatewaySubnetIP)\n{\n    Set-STFRoamingGateway -Gateway $gateway -SubnetIPAddress $GatewaySubnetIP\n}\n\n# Register the Gateway with the new Store\nRegister-STFStoreGateway -Gateway $gateway -StoreService $store -DefaultGateway\n\nWrite-Host \"Remote Access Deployment complete\"\n#>", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED", "uuid": "1c453aaf-7d3e-4e32-846c-38cbc79f9281"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7fb21c7a-56d0-47ab-8a69-6b1e00172682"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\n", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "9029a79a-2c7d-4104-b0ba-e53deb811843"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "JoinRemainingNodes", "state": "ACTIVE", "attrs": {"script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n    if((Test-Path C:\\_CONFIG) -eq 0 ) {\n\t\tmkdir C:\\_CONFIG\n    }\n    $RemotePasscodeScript=\"C:\\_CONFIG\\SFPasscodeScript.ps1\"\n    if((Test-Path $RemotePasscodeScript) -ne 0) {\n\t\tRemove-Item $RemotePasscodeScript\n\t}\n    Add-Content $RemotePasscodeScript \"Import-Module Citrix.StoreFront\"\n    Add-Content $RemotePasscodeScript \"`$status = Start-STFServerGroupJoin -IsAuthorizingServer -Confirm:`$false\"\n    Add-Content $RemotePasscodeScript \"`$Passcode = `$status.Passcode\"\n    Add-Content $RemotePasscodeScript \"`$Passcode.ToString() > C:\\_CONFIG\\Passcode.txt\"\n    Add-Content $RemotePasscodeScript \"Wait-STFServerGroupJoin -Confirm:`$false\"\n    Add-Content $RemotePasscodeScript \"Stop-STFServerGroupJoin\"\n    Add-Content $RemotePasscodeScript \"Publish-STFServerGroupConfiguration -Confirm:`$false\"\n}\n\n$LocalPasscodeScript=\"C:\\_CONFIG\\SFPasscodeScript.ps1\"\nschtasks /Create /F /TN SFPasscodeScript /S @@{address}@@ /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /RU \"SYSTEM\" /TR \"powershell.exe -File $LocalPasscodeScript\" /SC once /ST 23:30\nschtasks /Run /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN SFPasscodeScript /S @@{address}@@\nStart-Sleep -seconds 30\n\n$passcode = Invoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tGet-Content -Path \"C:\\_CONFIG\\Passcode.txt\"\n}\n\nif ($passcode -eq \"\"){\n\tWrite-Output \"Passcode is empty\"\n    exit 1\n}\n\n$fqdn = Invoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tWrite-Output \"$env:computername.$env:userdnsdomain\"\n}\n\nInvoke-Command -ComputerName @@{calm_array_address[1]}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tparam($Server,$Passcode)\n    if((Test-Path C:\\_CONFIG) -eq 0 ) {\n\t\tmkdir C:\\_CONFIG\n    }\n    $RemoteSTFServerGroupJoinRem=\"C:\\_CONFIG\\STFServerGroupJoinRem.ps1\"\n    if((Test-Path $RemoteSTFServerGroupJoinRem) -ne 0) {\n\t\tRemove-Item $RemoteSTFServerGroupJoinRem\n\t}\n    Add-Content $RemoteSTFServerGroupJoinRem \"Import-Module Citrix.StoreFront\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Start-STFServerGroupJoin -AuthorizerHostName $Server -Passcode $Passcode -Confirm:`$false\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Wait-STFServerGroupJoin\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Stop-STFServerGroupJoin\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Wait-STFPublishServerGroupConfiguration\"\n} -ArgumentList $fqdn,$passcode\n\n$LocalSTFServerGroupJoinRem=\"C:\\_CONFIG\\STFServerGroupJoinRem.ps1\"\nschtasks /Create /F /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@ /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /RU \"SYSTEM\" /TR \"powershell.exe -File $LocalSTFServerGroupJoinRem\" /SC once /ST 23:30\nschtasks /Run /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@\n\nschtasks /Delete /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN SFPasscodeScript /S @@{address}@@ /F\nschtasks /Delete /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@ /F", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "1912f790-04de-4b69-aea2-c5fc28adb0ff"}], "description": "", "name": "21430fdc_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "52ea23b6_dag", "uuid": "206b7542-ac9d-4f80-8a54-d566c8714a12"}, "message_list": [], "variable_list": [], "uuid": "8fca9db6-0af3-40a8-83ba-cd35b4043da6"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "06cb69d6-1e42-4074-a8a4-b458bc34611e", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6fd63783_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "fcd73d9e-227e-4800-9629-14fb308b21b3"}], "description": "", "name": "6c029928_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6fd63783_dag", "uuid": "fcd73d9e-227e-4800-9629-14fb308b21b3"}, "message_list": [], "variable_list": [], "uuid": "8495a517-0c6e-409e-b97f-7303682d515f"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "d0135b2d-3887-4f9a-9e96-1bd5d11994dd", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "a8287d2f_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2c8596cd-60b3-4c4e-8461-1db811474495"}], "description": "", "name": "fee4dd3c_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "a8287d2f_dag", "uuid": "2c8596cd-60b3-4c4e-8461-1db811474495"}, "message_list": [], "variable_list": [], "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "71827179-1210-47c7-98f5-3f5ac89f1a32", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "a14c3309_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "39dd4aaf-df6a-45d3-9e95-e4d068f33ff0"}], "description": "", "name": "b2eeaf76_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "a14c3309_dag", "uuid": "39dd4aaf-df6a-45d3-9e95-e4d068f33ff0"}, "message_list": [], "variable_list": [], "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "951179bd-5878-45d3-972a-3f95cbe0dd53", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "b10ebd95_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "379192b2-f18c-4208-a95d-ff1a5e8bceee"}], "description": "", "name": "e915c064_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "b10ebd95_dag", "uuid": "379192b2-f18c-4208-a95d-ff1a5e8bceee"}, "message_list": [], "variable_list": [], "uuid": "e8aaa89d-9411-4575-8c8f-0862d714df89"}, "message_list": [], "name": "action_restart"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "e4d5cb72-75f3-4347-8f10-00dcb54689c2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Service_Element_Delete_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "f8ee7ff2-9d11-4c46-85e6-4cdd072c4998"}], "name": "SYS_GEN__DAG_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9c31639f-9b41-41cf-b9b1-c6f9ac58c322"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Service_Element_Delete_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f8ee7ff2-9d11-4c46-85e6-4cdd072c4998"}], "description": "", "name": "SYS_GEN__Runbook_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "9c31639f-9b41-41cf-b9b1-c6f9ac58c322"}, "message_list": [], "variable_list": [], "uuid": "c41c6de2-353a-418a-bdf9-d946e0ded239"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "StoreFront", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "EXECUTION_MODE", "type": "LOCAL", "value": "", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "81b15380-0769-8fc5-6995-12ef0c41112b"}], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "b6879ca6-c2d9-40b3-b1d9-6ee28afe0d41", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "eb805b13-0898-44f6-9962-83363bef693d"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a9c97ef9-a6be-48ff-ac6e-3f33952d5f1f"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "eb805b13-0898-44f6-9962-83363bef693d"}, "edge_type": "inherent", "type": "", "uuid": "dbe841ae-0c67-418e-8923-13fe9cd6f05a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a9c97ef9-a6be-48ff-ac6e-3f33952d5f1f"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "67621702-a0da-4a42-98c4-a0b9faa0d5e0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"name": "MSSQL-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}, {"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "SQLServer2014SP2-FullSlipstream-x64-ENU", "uuid": "b881b441-208f-4bbd-a24f-7a37052d6b58"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "eb805b13-0898-44f6-9962-83363bef693d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "a9c97ef9-a6be-48ff-ac6e-3f33952d5f1f"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "67621702-a0da-4a42-98c4-a0b9faa0d5e0"}, "message_list": [], "variable_list": [], "uuid": "ba756e57-c4b8-4b3e-a0da-3d835cc4b9a2"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "4c6814b2-04ee-4e51-b864-db9562502ea9", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "8663d2e8-35e2-40c0-ab0a-ddcd37c3fe7e"}, {"kind": "app_task", "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "215e05c5-66e6-42de-bfee-92bc2cfe60d1"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "8663d2e8-35e2-40c0-ab0a-ddcd37c3fe7e"}, "edge_type": "inherent", "type": "", "uuid": "0793fa8d-8f13-478f-9c86-38625fb151c5", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "215e05c5-66e6-42de-bfee-92bc2cfe60d1"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7083e2b0-d153-4b33-ab4b-44a7392acc4d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "8663d2e8-35e2-40c0-ab0a-ddcd37c3fe7e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "215e05c5-66e6-42de-bfee-92bc2cfe60d1"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "7083e2b0-d153-4b33-ab4b-44a7392acc4d"}, "message_list": [], "variable_list": [], "uuid": "544adc65-a5f1-461a-a91b-1cc9161d59c8"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for restarting an application", "type": "system", "uuid": "2b0ef836-fc80-432d-951c-998dd9a732fb", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e6a2012c-4c48-4f51-a051-c0ec955601fc"}, {"kind": "app_task", "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "9e43e8b2-2037-42d6-9a0e-489bcca40084"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e6a2012c-4c48-4f51-a051-c0ec955601fc"}, "edge_type": "inherent", "type": "", "uuid": "9d40a903-40da-4d6e-bbd0-09db9a355235", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "9e43e8b2-2037-42d6-9a0e-489bcca40084"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "424db036-5a47-430b-b939-b629a999a5c7"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_Restart_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "e6a2012c-4c48-4f51-a051-c0ec955601fc"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_MSSQL_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "9e43e8b2-2037-42d6-9a0e-489bcca40084"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "424db036-5a47-430b-b939-b629a999a5c7"}, "message_list": [], "variable_list": [], "uuid": "c118eb75-afa6-4792-b383-ddec6609e12d"}, "message_list": [], "name": "action_restart"}, {"description": "System action for suspending an application", "type": "system", "uuid": "6b337a55-8f1b-4769-9244-392893e89b13", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "bccfadb3-f400-4010-a5f6-7e1adcd9d961"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "bccfadb3-f400-4010-a5f6-7e1adcd9d961"}, "message_list": [], "variable_list": [], "uuid": "d143ed82-35d6-4fbb-a7c0-77d22d93d7e2"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "4a8d42ca-f396-4888-ae32-e5e97c2ff1d1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "77a9a0c3-4c1c-424a-8afa-85d3d88b87d2"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "77a9a0c3-4c1c-424a-8afa-85d3d88b87d2"}, "message_list": [], "variable_list": [], "uuid": "c8df2887-e417-4355-a3ef-7fd6015b6517"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "6ca236fc-d416-4fdf-a266-ab770699183a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "beff3b69-923b-4c37-aafd-22dbe7f03d68"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "28ea3aee-4e67-4a9a-ab38-0b7902289f88"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "beff3b69-923b-4c37-aafd-22dbe7f03d68"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "28ea3aee-4e67-4a9a-ab38-0b7902289f88"}, "message_list": [], "variable_list": [], "uuid": "c160e91a-aacf-4e25-b3ab-ff5e1eeae258"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "9536e41a-abb5-4b5f-869f-bc48e2a8df39", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "48c5cce4-f5bc-4483-bb9d-09729a971e5c"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c6dc7c13-a161-4d5d-8e6c-023f7107e5b6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "48c5cce4-f5bc-4483-bb9d-09729a971e5c"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c6dc7c13-a161-4d5d-8e6c-023f7107e5b6"}, "message_list": [], "variable_list": [], "uuid": "c75d601d-84bb-476e-8a47-c24404e625c8"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "d60be369-9950-4142-96f0-673497903190", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "f6eff871-2c74-427d-b89e-44142deca643"}], "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e009d5d5-0b82-4c75-a983-4d0f630de807"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f6eff871-2c74-427d-b89e-44142deca643"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e009d5d5-0b82-4c75-a983-4d0f630de807"}, "message_list": [], "variable_list": [], "uuid": "924e5e19-dfd0-416a-b854-176edcc41157"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "AHV_MSSQL", "state": "ACTIVE", "readiness_probe": {"connection_type": "POWERSHELL", "disable_readiness_probe": false, "connection_port": 5985, "timeout_secs": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"create_spec": {"resources": {"nic_list": {}, "disk_list": {}}}}, "os_type": "Windows", "message_list": [], "create_spec": {"name": "MSSQL-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}, {"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "SQLServer2014SP2-FullSlipstream-x64-ENU", "uuid": "b881b441-208f-4bbd-a24f-7a37052d6b58"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 204800, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 102400, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "7e20bf02-89f2-40aa-bf93-52674c50a1f5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9067f1b1-8347-413c-9327-340bcc845e51"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b3182148-c3f2-4f75-9ceb-1eb1454a86cb"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9067f1b1-8347-413c-9327-340bcc845e51"}, "edge_type": "inherent", "type": "", "uuid": "22493374-de43-40a4-9c33-82643545cf07", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b3182148-c3f2-4f75-9ceb-1eb1454a86cb"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "73972c59-a261-4cad-b0eb-c1f1820e0cb1"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"name": "DDC-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "XenApp_and_XenDesktop_7_16", "uuid": "b0d075e7-8ee4-4168-9f9a-b2978d622c40"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "9067f1b1-8347-413c-9327-340bcc845e51"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "b3182148-c3f2-4f75-9ceb-1eb1454a86cb"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "73972c59-a261-4cad-b0eb-c1f1820e0cb1"}, "message_list": [], "variable_list": [], "uuid": "ca07949d-be68-49b7-9593-9024986eddbd"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "fca780f4-c16e-4768-94fe-740bbc212756", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a963d6c5-4470-49f8-a459-94dcdea495cb"}, {"kind": "app_task", "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "89ef98c1-c170-4cbe-a74e-fb84c64a5887"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a963d6c5-4470-49f8-a459-94dcdea495cb"}, "edge_type": "inherent", "type": "", "uuid": "622402cd-7de0-49d1-88ce-2520285a3c70", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "89ef98c1-c170-4cbe-a74e-fb84c64a5887"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b2d50e50-9dc6-4d3d-89e7-d9868db29e47"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "a963d6c5-4470-49f8-a459-94dcdea495cb"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "89ef98c1-c170-4cbe-a74e-fb84c64a5887"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b2d50e50-9dc6-4d3d-89e7-d9868db29e47"}, "message_list": [], "variable_list": [], "uuid": "c46d356f-7641-475f-8f42-01a154ad2b03"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for restarting an application", "type": "system", "uuid": "b49e5f58-f1e7-4d51-b765-4980f167d231", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "bb1cfc87-9b6b-436a-919b-67f9ea9362cd"}, {"kind": "app_task", "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "2e6ce1c4-382b-4f5a-b9e5-11044199ae8b"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "bb1cfc87-9b6b-436a-919b-67f9ea9362cd"}, "edge_type": "inherent", "type": "", "uuid": "8576d89d-90c7-4872-868d-dadee6fe033a", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "2e6ce1c4-382b-4f5a-b9e5-11044199ae8b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ec398e1e-fc4d-4d7f-bc63-a86b642a4f6b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_Restart_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "bb1cfc87-9b6b-436a-919b-67f9ea9362cd"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_DDC_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "2e6ce1c4-382b-4f5a-b9e5-11044199ae8b"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "ec398e1e-fc4d-4d7f-bc63-a86b642a4f6b"}, "message_list": [], "variable_list": [], "uuid": "db68e8b2-9f34-41ba-a06b-432691d64c0a"}, "message_list": [], "name": "action_restart"}, {"description": "System action for suspending an application", "type": "system", "uuid": "c5a8d13d-0a87-44e9-9cce-5efee6fa12ca", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d77908d7-d33f-45a8-aa62-bad8ccce86cc"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "d77908d7-d33f-45a8-aa62-bad8ccce86cc"}, "message_list": [], "variable_list": [], "uuid": "64162fca-d96a-4363-856e-141ea24cd217"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "2fe2d84d-8422-4dc5-9c32-cff4f0bbaccc", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "900d2d90-0a59-426e-8ecb-5e38fce660ec"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "900d2d90-0a59-426e-8ecb-5e38fce660ec"}, "message_list": [], "variable_list": [], "uuid": "9a5a2332-afd3-4811-8fa9-61e2c4a77745"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "2499db62-dd4f-493e-aaf0-aa913830f9e9", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a415ad61-18c3-41fb-a033-068267bf0cb7"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9f1e1aac-7404-4ca4-a348-510cc8edaf0c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "a415ad61-18c3-41fb-a033-068267bf0cb7"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9f1e1aac-7404-4ca4-a348-510cc8edaf0c"}, "message_list": [], "variable_list": [], "uuid": "275e990b-764e-4b8f-9d1b-51079bb057cc"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "6b2fa567-63f7-4c50-8fbd-8ccff20e4c26", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a156df86-f3c8-4d4e-a915-c5ab6fef01ed"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "07684110-e96c-49dc-ad14-ba495b3da851"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "a156df86-f3c8-4d4e-a915-c5ab6fef01ed"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "07684110-e96c-49dc-ad14-ba495b3da851"}, "message_list": [], "variable_list": [], "uuid": "db8cc698-a3cd-4243-926f-e8888f897125"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "0e8e22c6-b035-4eda-9853-3bf4c52316da", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "84f2507a-2a0f-4007-b2fc-81b5010068b8"}], "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c2ed9c78-3384-4f48-959c-b9d4e4a724d9"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "84f2507a-2a0f-4007-b2fc-81b5010068b8"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "c2ed9c78-3384-4f48-959c-b9d4e4a724d9"}, "message_list": [], "variable_list": [], "uuid": "6e09c9f4-603b-4ff8-baa2-9641887c94bf"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "AHV_DDC", "state": "ACTIVE", "readiness_probe": {"connection_type": "POWERSHELL", "disable_readiness_probe": false, "connection_port": 5985, "timeout_secs": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"create_spec": {"resources": {"nic_list": {}, "disk_list": {}}}}, "os_type": "Windows", "message_list": [], "create_spec": {"name": "DDC-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "XenApp_and_XenDesktop_7_16", "uuid": "b0d075e7-8ee4-4168-9f9a-b2978d622c40"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "4b7e6cb5-fbbc-4314-a247-422fb9b8fa70", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "3f60b374-e182-427e-987f-681c127d0df0"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "872b5a9d-7663-4281-8fc2-8b170aa97384"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "3f60b374-e182-427e-987f-681c127d0df0"}, "edge_type": "inherent", "type": "", "uuid": "766a8a7b-9bbe-43f4-a506-119fa774ce06", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "872b5a9d-7663-4281-8fc2-8b170aa97384"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c038b62b-fc87-4276-a987-473b3e64b9bb"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"name": "StoreFront-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "XenApp_and_XenDesktop_7_16", "uuid": "b0d075e7-8ee4-4168-9f9a-b2978d622c40"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "3f60b374-e182-427e-987f-681c127d0df0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "872b5a9d-7663-4281-8fc2-8b170aa97384"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "c038b62b-fc87-4276-a987-473b3e64b9bb"}, "message_list": [], "variable_list": [], "uuid": "7f64f8a3-ed1b-47e3-b3b6-73757e7bacd4"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "a42d9ef9-f414-4d9f-ac61-5e2964a09a10", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "ca66265d-1db1-4482-9745-8e2ada63da9a"}, {"kind": "app_task", "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "f1d2fe40-2b52-4cb4-838d-f4232bb36992"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "ca66265d-1db1-4482-9745-8e2ada63da9a"}, "edge_type": "inherent", "type": "", "uuid": "5a34e607-51b4-4d15-8462-1ac2d826f786", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "f1d2fe40-2b52-4cb4-838d-f4232bb36992"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "bbe75d0e-e795-479d-bf05-f9e14fc113b6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "ca66265d-1db1-4482-9745-8e2ada63da9a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "f1d2fe40-2b52-4cb4-838d-f4232bb36992"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "bbe75d0e-e795-479d-bf05-f9e14fc113b6"}, "message_list": [], "variable_list": [], "uuid": "10aa8e23-d175-4be1-bb84-cd0c2aa2b121"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for restarting an application", "type": "system", "uuid": "667fd2b4-d6d3-453a-b601-e57ec0ad34f7", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "d584b7c1-7248-4bfa-a23a-0189b443532d"}, {"kind": "app_task", "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "1e3f1b77-3b53-4efc-80a8-04ad0e94ba50"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "d584b7c1-7248-4bfa-a23a-0189b443532d"}, "edge_type": "inherent", "type": "", "uuid": "a46e4328-944a-4808-83bd-8b05414b568a", "to_task_reference": {"kind": "app_task", "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "1e3f1b77-3b53-4efc-80a8-04ad0e94ba50"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6b5be16f-9b09-42fa-ba5b-16f144dce1d9"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_Restart_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "d584b7c1-7248-4bfa-a23a-0189b443532d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_AHV_StoreFront_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "1e3f1b77-3b53-4efc-80a8-04ad0e94ba50"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "6b5be16f-9b09-42fa-ba5b-16f144dce1d9"}, "message_list": [], "variable_list": [], "uuid": "f19ee7ad-2388-4f03-9a66-57c4b1b9f69e"}, "message_list": [], "name": "action_restart"}, {"description": "System action for suspending an application", "type": "system", "uuid": "550359a5-414e-4169-bfda-9c20542010e2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "eeb4e942-af09-4fbf-8599-d9a6a8ddf3f3"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "eeb4e942-af09-4fbf-8599-d9a6a8ddf3f3"}, "message_list": [], "variable_list": [], "uuid": "e58b3182-5f6e-4bf4-b873-a8aba61f2af1"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "cb007276-a5f7-41a1-a1d7-14e8272c6c98", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b71a767b-22e3-4be1-8fcd-17bf71571667"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "b71a767b-22e3-4be1-8fcd-17bf71571667"}, "message_list": [], "variable_list": [], "uuid": "219db81b-4e3d-4768-8b6c-372121a45bfc"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "c3c1da7c-c0aa-42f0-bee5-95d4cc65193b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "f4fa1916-257c-42c9-84ea-6021ec24ab3d"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4eba4b2c-b57e-4367-b633-a45d1639dd77"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "f4fa1916-257c-42c9-84ea-6021ec24ab3d"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "4eba4b2c-b57e-4367-b633-a45d1639dd77"}, "message_list": [], "variable_list": [], "uuid": "b31737c8-703f-4dfb-adda-b330abefc704"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "8f2c4743-70a3-4f8f-8ccd-60a89681a1b7", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "61f10e93-ded6-4919-8fc5-df1ca2f899e4"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "36f0ab76-38d4-412a-b041-0e8df2624757"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "61f10e93-ded6-4919-8fc5-df1ca2f899e4"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "36f0ab76-38d4-412a-b041-0e8df2624757"}, "message_list": [], "variable_list": [], "uuid": "c6b874eb-6eab-471a-8ed3-4f162eb03086"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "f631dd96-d732-4fa0-8810-b12143636f75", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "ce2421e1-7392-4d9b-bbd5-1522f327b1f5"}], "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a03998ad-d5df-428f-9078-8d51c3c498b2"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "ce2421e1-7392-4d9b-bbd5-1522f327b1f5"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "a03998ad-d5df-428f-9078-8d51c3c498b2"}, "message_list": [], "variable_list": [], "uuid": "616c17fa-e60e-45c7-b861-d4668264cfbc"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "AHV_StoreFront", "state": "ACTIVE", "readiness_probe": {"connection_type": "POWERSHELL", "disable_readiness_probe": false, "connection_port": 5985, "timeout_secs": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"create_spec": {"resources": {"nic_list": {}, "disk_list": {}}}}, "os_type": "Windows", "message_list": [], "create_spec": {"name": "StoreFront-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "6c77ac9e-1519-4901-b788-d6d1c6e2588e"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 4, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": null, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016", "uuid": "76c25344-ecde-44da-bc33-6b3da966675f"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": {"kind": "image", "type": "", "name": "XenApp_and_XenDesktop_7_16", "uuid": "b0d075e7-8ee4-4168-9f9a-b2978d622c40"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "IDE"}, "device_type": "CDROM"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}], "credential_definition_list": [{"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "LOCAL", "state": "ACTIVE", "editables": {}, "type": "PASSWORD", "uuid": "3d593880-4d04-4b2b-900d-f261d2b7f489"}, {"username": "administrator@example.com", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "DOMAIN_CRED", "state": "ACTIVE", "editables": {}, "type": "PASSWORD", "uuid": "1c453aaf-7d3e-4e32-846c-38cbc79f9281"}, {"username": "admin", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "PE_CREDS", "state": "ACTIVE", "editables": {}, "type": "PASSWORD", "uuid": "89b2b2f0-34cd-462f-b81e-326dfb46d6d6"}, {"username": "example\\administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "SQL_CREDS", "state": "ACTIVE", "editables": {}, "type": "PASSWORD", "uuid": "1ecf5a33-46f7-4eb4-b985-b264bdeaa391"}, {"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "KARAN_CRED", "state": "ACTIVE", "editables": {}, "type": "PASSWORD", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}], "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "164dbba1-809a-42e2-87c1-90daeb2912c1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "f24394a5-bcf4-4097-bc8e-99dae92926da"}], "name": "SYS_GEN__DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "04d2624d-2d46-4554-8a49-ace4acec538e"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "name": "ddaf74d2_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, "edge_type": "user_defined", "type": "", "uuid": "fe356a6d-7146-43b1-a402-3b5de7372afc", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, "edge_type": "user_defined", "type": "", "uuid": "5a1fcdaa-f0c5-e689-6f57-2f3394cd1c68", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, "edge_type": "user_defined", "type": "", "uuid": "5ea3eb83-f815-1597-430f-bcc72b43566a", "to_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}}, {"from_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, "edge_type": "user_defined", "type": "", "uuid": "a4d0a000-fd87-bc34-1eb0-15974f830110", "to_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}}, {"from_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, "edge_type": "user_defined", "type": "", "uuid": "75f4ac9e-752c-d735-a3b7-a5ea413413da", "to_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}}, {"from_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, "edge_type": "user_defined", "type": "", "uuid": "eef3eda3-a7c1-79c6-1387-1dda79274871", "to_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}}, {"from_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, "edge_type": "user_defined", "type": "", "uuid": "d391e611-03bf-0c6b-77bb-0e1c21fdeebc", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, "edge_type": "user_defined", "type": "", "uuid": "698e4c3c-0b5f-4413-b7c3-e744d697d6c9", "to_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}}, {"from_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, "edge_type": "user_defined", "type": "", "uuid": "a1274d9d-b71d-b476-93e4-89a48ec63826", "to_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}}, {"from_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, "edge_type": "user_defined", "type": "", "uuid": "3e4745e1-66c8-3ea3-b60c-e4975d1f72e0", "to_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, "edge_type": "user_defined", "type": "", "uuid": "e7930a02-5868-7b0b-8b66-59abfebd3fac", "to_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, "edge_type": "user_defined", "type": "", "uuid": "af2e01c5-7a94-eca1-211c-76b432a319b3", "to_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}}, {"from_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, "edge_type": "user_defined", "type": "", "uuid": "173e8b8d-8067-4803-4c3c-4edce75a387e", "to_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}}, {"from_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, "edge_type": "user_defined", "type": "", "uuid": "fe64d42d-6bba-6cf5-fd95-bf1d3142726a", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n# -*- Enabling and starting 'msiscsi'\nSet-Service -Name msiscsi -StartupType Automatic\nStart-Service msiscsi\n# -*- Change first Ehternet adapter name to 'Production'\nGet-NetAdapter -Name \"Ethernet\" | Rename-NetAdapter -NewName \"Production\" -ErrorAction SilentlyContinue\n# -*- Download SQL Updates\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/ISOs/SQLServer2014-KB4052725-x64.exe\",\"$TempDirectory\\SQLServer2014-KB4052725-x64.exe\")", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create VG", "state": "ACTIVE", "attrs": {"script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\n$ContainerURL = $BaseURL+\"storage_containers\"\n\ntry {\n  $ContainerList = invoke-RestMethod -Uri $ContainerURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n  $ContainerUUID = $ContainerList.entities | where { $_.name -eq \"@@{Nutanix_Container_Name}@@\"} | select storage_container_uuid\n  $ContainerUUID = $ContainerUUID.storage_container_uuid\n\n$Body = @\"\n{\n  \"disk_list\": [\n    {\n      \"create_config\": {\n        \"size\": 1073741824,\n\t\"storage_container_uuid\": \"$ContainerUUID\"\n      },\n      \"index\": 0\n    }\n  ],\n  \"is_shared\": true,\n  \"name\": \"@@{Volume_GroupName}@@\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.task_uuid -eq $null) {\n    Write-Output \"Error while creating volume group\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Attach VG", "state": "ACTIVE", "attrs": {"script": "\n$MsSQL1_iSCSI_IQN = (Get-InitiatorPort).NodeAddress\n\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\ntry {\n\t$VolumeGroupList = invoke-RestMethod -Uri $VolumeGroupURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n\t$VolumeGroupUUID = $VolumeGroupList.entities | where { $_.name -eq \"@@{Volume_GroupName}@@\"} | select uuid\n\t$VolumeGroupUUID = $VolumeGroupUUID.uuid\n\n\t$VolumeGroupAttachURL = $VolumeGroupURL+\"/$VolumeGroupUUID\"+\"/open\"\n\n$Body = @\"\n{\n  \"iscsi_client\": {\n    \"client_address\": \"$MsSQL1_iSCSI_IQN\"\n  },\n  \"operation\": \"ATTACH\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupAttachURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.value -ne $true) {\n    Write-Output \"Error while attaching volume group \"\n    exit 1\n}\nsleep 3", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Connect Mount VG", "state": "ACTIVE", "attrs": {"script": "New-IscsiTargetPortal -TargetPortalAddress @@{PE_DATA_SERVICE_IP}@@\nGet-IscsiTarget | Connect-IscsiTarget -IsPersistent $true\n\n#Initialize Disks\nif (((Get-Disk -Number 1 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\") -and ((Get-Disk -Number 2 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\")) {\n\tGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n\tGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n\tNew-Partition -DiskNumber 1 -UseMaximumSize -DriveLetter E -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Data\" \n\tNew-Partition -DiskNumber 2 -UseMaximumSize -DriveLetter F -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Logs\"\n} else {\n\tWrite-Ou tput \"Disks does not exists or not healthy.`nIf you havent added disks please add 2 disk.`n `t - Data : 200GB`n `t - Logs : 100GB\"\n\texit 1\n}\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  if ((Get-Disk -Number 3 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\"){\n      Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n      New-Partition -DiskNumber 3 -UseMaximumSize -DriveLetter G -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Witness\" \n  } else {\n      Write-Output \"Witness Disk does not exists or not healthy.`nIf you havent added disks please add a volume group and attach.`n `t - Witness : 1GB\"\n      exit 1\n  }\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install FC", "state": "ACTIVE", "attrs": {"script": "Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools\n\nif (-not (get-WindowsFeature -Name Failover-Clustering -ErrorAction SilentlyContinue | select -ExpandProperty Installed)){\n\tWrite-output \"Failover Clustering is not installed\"\n\texit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Configure WSFC", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminname=\"@@{DOMAIN_CRED.username}@@\"\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n\n$testScript = {\n\t$Nodes=\"@@{calm_array_address}@@\".split(',')\n    if(Test-Cluster -Node $Nodes){\n        Return $True\n    }\n    else\n    {\n        Return $False\n    }\n} \n\n$TestStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $testScript\n\nif ($TestStatus -eq $false){\nWrite-Output \"Failed\"\nExit 1\n}\n\n$ClusterCreate = {\n    #Import-Module FailoverClusters\n    $Nodes=\"@@{calm_array_address}@@\".split(',')\n    New-Cluster -Name @@{FAILOVER_CLUSTER_NAME}@@ -Node $Nodes -StaticAddress @@{FAILOVER_VIP}@@\n} \n\n$ClusterStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $ClusterCreate\n\nif (!$ClusterStatus.Name){\n    Write-Output \"Failed creating CLuster\"\n}\n\n$RenameClusterDisks = {\n    #Rename Cluster Disks\n    $ClusterDisks =  Get-CimInstance -ClassName MSCluster_Resource -Namespace root/mscluster -Filter \"type = 'Physical Disk'\"\n    foreach ($Disk in $ClusterDisks) {\n    $DiskResource = Get-CimAssociatedInstance -InputObject $Disk -ResultClass MSCluster_DiskPartition\n        if (-not ($DiskResource.VolumeLabel -eq $Disk.Name)) {\n        Invoke-CimMethod -InputObject $Disk -MethodName Rename -Arguments @{newName = $DiskResource.VolumeLabel}\n        }\n    }\n} \n\nInvoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $RenameClusterDisks", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install SQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n    Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop \"Net-Framework-Core\"\n    $DOMAINNAME=(Get-WmiObject Win32_ComputerSystem).Domain\n    $setupDriveLetter = \"D:\"\n    $setupPath = \"$setupDriveLetter\\setup.exe\"\n    #$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,REPLICATION,FULLTEXT,DQ,AS,RS,RS_SHP,RS_SHPWFE,DQC,CONN,IS,BC,SDK,BOL,SSMS,ADV_SSMS,DREPLAY_CTLR,DREPLAY_CLT,SNAC_SDK,MDS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,FULLTEXT,SSMS,ADV_SSMS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$validExitCodes = @(0)\n\n    $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n    $install.WaitForExit()\n    $exitCode = $install.ExitCode\n    $install.Dispose()\n    \n    Write-Output \"SQL Failover Cluster Installation exited with `'$exitCode`'.\"\n      if ($validExitCodes -notcontains $exitCode) {\n          Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n\t\t  exit 1\n    }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply OS BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.7.1.7/data1/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $ntrights_cli = \"$TempDirectory\\Utils\\ntrights.exe\"\n  $PackageName = \"SQL Server Management Studio\"\n  $silentArgs = \"/install /quiet /norestart\"\n\n  #download utils\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  #unpack utils\n\n  Add-Type -assembly \"system.io.compression.filesystem\"\n  [io.compression.zipfile]::ExtractToDirectory($FilePath, $TempDirectory)\n\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $selockmemoryprivilege = 'NT SERVICE\\MSSQLSERVER +r SeLockMemoryPrivilege'\n  $semanagevolumeprivilege = 'NT SERVICE\\MSSQLSERVER +r SeManageVolumePrivilege'\n\n  & $ntrights_cli -u $selockmemoryprivilege \n  & $ntrights_cli -u $semanagevolumeprivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply SQL BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.68.88.221/calm/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $sqladdparms_cli = \"$TempDirectory\\Utils\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"c:\\temp\\utils\\TSQL_Scripts\\All_versions\"\n  \n  #create directories\n  #mkdir F:\\SQLDATA01\\\n  #mkdir G:\\SQLDATA02\\\n  #mkdir H:\\TEMPDB01\\\n  #mkdir I:\\TEMPDB02\\\n  #mkdir L:\\UserDB-logs01\\\n  #mkdir T:\\TempDB-logs01\\\n  #mkdir R:\\SQLBACK\n\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  #stop-service MSSQL* \n  #rm \"E:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  #start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  Enable-SqlAlwaysOn -ServerInstance $(hostname) -Force \n  New-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\" -Name \"Endpoint_AG\" -Port 5022 -EncryptionAlgorithm Aes -Encryption Required \n  Set-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\\Endpoints\\Endpoint_AG\" -State Started\n  Invoke-SqlCmd -Server $node.Name -Query $createLogin\n  Invoke-SqlCmd -Server $(hostname) -Query $grantConnectPermissions\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  if (\"$(Get-ClusterNode | where {$_.Id -eq 1} | select -ExpandProperty Name)\" -ne \"$(hostname)\"){\n      exit\n  }\n  #Import-Module SQLPS -DisableNameCheckin\n  $AGName = '@@{SQL_CLUSTER_NAME}@@'\n  $PrimaryNode = $(hostname)\n  $IP = '@@{MSSQL_VIP}@@/255.255.240.0'\n  $replicas = @()\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  $cname = (Get-Cluster -name $PrimaryNode).name\n  $nodes = (get-clusternode -Cluster $cname).name\n\n  #List all of the WSFC nodes all WSFC nodes; all SQL Server instances run DEFAULT instances\n  foreach($node in $nodes)\n  {\n      $replicas += New-SqlAvailabilityReplica -Name $node -EndpointUrl \"TCP://$node.example.com:5022\" -AvailabilityMode \"SynchronousCommit\" -FailoverMode \"Automatic\" -AsTemplate -Version 12 \n  }\n\n\n  New-SqlAvailabilityGroup -Name $AGName -Path \"SQLSERVER:\\SQL\\$PrimaryNode\\DEFAULT\" -AvailabilityReplica $replicas\n  $nodes | Where-Object {$_ -ne $PrimaryNode} | ForEach-Object {Join-SqlAvailabilityGroup -path \"SQLSERVER:\\SQL\\$_\\DEFAULT\" -Name $AGName}\n  New-SqlAvailabilityGroupListener -Name $AGName -staticIP $IP -Port 1433 -Path \"SQLSERVER:\\Sql\\$PrimaryNode\\DEFAULT\\AvailabilityGroups\\$AGName\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "description": "", "name": "0561ade3_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "ddaf74d2_dag", "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, "message_list": [], "variable_list": [], "uuid": "4c520cc3-69c0-4511-9532-fc37ebf881b2"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "7bf7eecb_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}], "description": "", "name": "f564b0c1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7bf7eecb_dag", "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}, "message_list": [], "variable_list": [], "uuid": "1eedce51-5dc1-4f77-9367-a3e2811f35e3"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "f24394a5-bcf4-4097-bc8e-99dae92926da"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "04d2624d-2d46-4554-8a49-ace4acec538e"}, "message_list": [], "variable_list": [], "uuid": "70ba5d3a-2ef5-4b7d-b88e-d551c9d46b31"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "8b22c500-9f97-455c-8266-6144baa357bc", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "2a45032d-5d02-46d1-98ce-3e0859cd35ac"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "97846049-9158-4a2c-a3c5-b68b1343637b"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "e74e178d-3b83-44a2-9c3c-918cb3e8a54b"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "97846049-9158-4a2c-a3c5-b68b1343637b"}, "edge_type": "inherent", "type": "", "uuid": "5bd4b23a-26ab-49e0-8d6d-9dcad75417f7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "e74e178d-3b83-44a2-9c3c-918cb3e8a54b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "2a45032d-5d02-46d1-98ce-3e0859cd35ac"}, "edge_type": "inherent", "type": "", "uuid": "2fd4108b-efd1-4323-977a-c0f507a8c980", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "97846049-9158-4a2c-a3c5-b68b1343637b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "140cb232-9540-4846-a20f-8c24e00fb609"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "70ba5d3a-2ef5-4b7d-b88e-d551c9d46b31"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2a45032d-5d02-46d1-98ce-3e0859cd35ac"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "dade7481_runbook", "uuid": "7b57f32e-7ebe-4047-bba3-03953b384a73"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "97846049-9158-4a2c-a3c5-b68b1343637b"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e74e178d-3b83-44a2-9c3c-918cb3e8a54b"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "140cb232-9540-4846-a20f-8c24e00fb609"}, "message_list": [], "variable_list": [], "uuid": "42f7b47e-f2e6-4afa-8962-97411190274d"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "82e8eabc-06cd-4542-89e3-26a530226ba0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "ca6dff53-8fe1-4bd8-9157-e6209171d0be"}], "name": "SYS_GEN__DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4650154e-55c3-40ae-9f0a-48d395743f04"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "name": "ddaf74d2_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, "edge_type": "user_defined", "type": "", "uuid": "fe356a6d-7146-43b1-a402-3b5de7372afc", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, "edge_type": "user_defined", "type": "", "uuid": "5a1fcdaa-f0c5-e689-6f57-2f3394cd1c68", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, "edge_type": "user_defined", "type": "", "uuid": "5ea3eb83-f815-1597-430f-bcc72b43566a", "to_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}}, {"from_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, "edge_type": "user_defined", "type": "", "uuid": "a4d0a000-fd87-bc34-1eb0-15974f830110", "to_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}}, {"from_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, "edge_type": "user_defined", "type": "", "uuid": "75f4ac9e-752c-d735-a3b7-a5ea413413da", "to_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}}, {"from_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, "edge_type": "user_defined", "type": "", "uuid": "eef3eda3-a7c1-79c6-1387-1dda79274871", "to_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}}, {"from_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, "edge_type": "user_defined", "type": "", "uuid": "d391e611-03bf-0c6b-77bb-0e1c21fdeebc", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, "edge_type": "user_defined", "type": "", "uuid": "698e4c3c-0b5f-4413-b7c3-e744d697d6c9", "to_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}}, {"from_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, "edge_type": "user_defined", "type": "", "uuid": "a1274d9d-b71d-b476-93e4-89a48ec63826", "to_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}}, {"from_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, "edge_type": "user_defined", "type": "", "uuid": "3e4745e1-66c8-3ea3-b60c-e4975d1f72e0", "to_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, "edge_type": "user_defined", "type": "", "uuid": "e7930a02-5868-7b0b-8b66-59abfebd3fac", "to_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, "edge_type": "user_defined", "type": "", "uuid": "af2e01c5-7a94-eca1-211c-76b432a319b3", "to_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}}, {"from_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, "edge_type": "user_defined", "type": "", "uuid": "173e8b8d-8067-4803-4c3c-4edce75a387e", "to_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}}, {"from_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, "edge_type": "user_defined", "type": "", "uuid": "fe64d42d-6bba-6cf5-fd95-bf1d3142726a", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n# -*- Enabling and starting 'msiscsi'\nSet-Service -Name msiscsi -StartupType Automatic\nStart-Service msiscsi\n# -*- Change first Ehternet adapter name to 'Production'\nGet-NetAdapter -Name \"Ethernet\" | Rename-NetAdapter -NewName \"Production\" -ErrorAction SilentlyContinue\n# -*- Download SQL Updates\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/ISOs/SQLServer2014-KB4052725-x64.exe\",\"$TempDirectory\\SQLServer2014-KB4052725-x64.exe\")", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create VG", "state": "ACTIVE", "attrs": {"script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\n$ContainerURL = $BaseURL+\"storage_containers\"\n\ntry {\n  $ContainerList = invoke-RestMethod -Uri $ContainerURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n  $ContainerUUID = $ContainerList.entities | where { $_.name -eq \"@@{Nutanix_Container_Name}@@\"} | select storage_container_uuid\n  $ContainerUUID = $ContainerUUID.storage_container_uuid\n\n$Body = @\"\n{\n  \"disk_list\": [\n    {\n      \"create_config\": {\n        \"size\": 1073741824,\n\t\"storage_container_uuid\": \"$ContainerUUID\"\n      },\n      \"index\": 0\n    }\n  ],\n  \"is_shared\": true,\n  \"name\": \"@@{Volume_GroupName}@@\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.task_uuid -eq $null) {\n    Write-Output \"Error while creating volume group\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Attach VG", "state": "ACTIVE", "attrs": {"script": "\n$MsSQL1_iSCSI_IQN = (Get-InitiatorPort).NodeAddress\n\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\ntry {\n\t$VolumeGroupList = invoke-RestMethod -Uri $VolumeGroupURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n\t$VolumeGroupUUID = $VolumeGroupList.entities | where { $_.name -eq \"@@{Volume_GroupName}@@\"} | select uuid\n\t$VolumeGroupUUID = $VolumeGroupUUID.uuid\n\n\t$VolumeGroupAttachURL = $VolumeGroupURL+\"/$VolumeGroupUUID\"+\"/open\"\n\n$Body = @\"\n{\n  \"iscsi_client\": {\n    \"client_address\": \"$MsSQL1_iSCSI_IQN\"\n  },\n  \"operation\": \"ATTACH\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupAttachURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.value -ne $true) {\n    Write-Output \"Error while attaching volume group \"\n    exit 1\n}\nsleep 3", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Connect Mount VG", "state": "ACTIVE", "attrs": {"script": "New-IscsiTargetPortal -TargetPortalAddress @@{PE_DATA_SERVICE_IP}@@\nGet-IscsiTarget | Connect-IscsiTarget -IsPersistent $true\n\n#Initialize Disks\nif (((Get-Disk -Number 1 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\") -and ((Get-Disk -Number 2 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\")) {\n\tGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n\tGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n\tNew-Partition -DiskNumber 1 -UseMaximumSize -DriveLetter E -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Data\" \n\tNew-Partition -DiskNumber 2 -UseMaximumSize -DriveLetter F -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Logs\"\n} else {\n\tWrite-Ou tput \"Disks does not exists or not healthy.`nIf you havent added disks please add 2 disk.`n `t - Data : 200GB`n `t - Logs : 100GB\"\n\texit 1\n}\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  if ((Get-Disk -Number 3 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\"){\n      Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n      New-Partition -DiskNumber 3 -UseMaximumSize -DriveLetter G -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Witness\" \n  } else {\n      Write-Output \"Witness Disk does not exists or not healthy.`nIf you havent added disks please add a volume group and attach.`n `t - Witness : 1GB\"\n      exit 1\n  }\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install FC", "state": "ACTIVE", "attrs": {"script": "Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools\n\nif (-not (get-WindowsFeature -Name Failover-Clustering -ErrorAction SilentlyContinue | select -ExpandProperty Installed)){\n\tWrite-output \"Failover Clustering is not installed\"\n\texit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Configure WSFC", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminname=\"@@{DOMAIN_CRED.username}@@\"\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n\n$testScript = {\n\t$Nodes=\"@@{calm_array_address}@@\".split(',')\n    if(Test-Cluster -Node $Nodes){\n        Return $True\n    }\n    else\n    {\n        Return $False\n    }\n} \n\n$TestStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $testScript\n\nif ($TestStatus -eq $false){\nWrite-Output \"Failed\"\nExit 1\n}\n\n$ClusterCreate = {\n    #Import-Module FailoverClusters\n    $Nodes=\"@@{calm_array_address}@@\".split(',')\n    New-Cluster -Name @@{FAILOVER_CLUSTER_NAME}@@ -Node $Nodes -StaticAddress @@{FAILOVER_VIP}@@\n} \n\n$ClusterStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $ClusterCreate\n\nif (!$ClusterStatus.Name){\n    Write-Output \"Failed creating CLuster\"\n}\n\n$RenameClusterDisks = {\n    #Rename Cluster Disks\n    $ClusterDisks =  Get-CimInstance -ClassName MSCluster_Resource -Namespace root/mscluster -Filter \"type = 'Physical Disk'\"\n    foreach ($Disk in $ClusterDisks) {\n    $DiskResource = Get-CimAssociatedInstance -InputObject $Disk -ResultClass MSCluster_DiskPartition\n        if (-not ($DiskResource.VolumeLabel -eq $Disk.Name)) {\n        Invoke-CimMethod -InputObject $Disk -MethodName Rename -Arguments @{newName = $DiskResource.VolumeLabel}\n        }\n    }\n} \n\nInvoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $RenameClusterDisks", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install SQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n    Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop \"Net-Framework-Core\"\n    $DOMAINNAME=(Get-WmiObject Win32_ComputerSystem).Domain\n    $setupDriveLetter = \"D:\"\n    $setupPath = \"$setupDriveLetter\\setup.exe\"\n    #$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,REPLICATION,FULLTEXT,DQ,AS,RS,RS_SHP,RS_SHPWFE,DQC,CONN,IS,BC,SDK,BOL,SSMS,ADV_SSMS,DREPLAY_CTLR,DREPLAY_CLT,SNAC_SDK,MDS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,FULLTEXT,SSMS,ADV_SSMS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$validExitCodes = @(0)\n\n    $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n    $install.WaitForExit()\n    $exitCode = $install.ExitCode\n    $install.Dispose()\n    \n    Write-Output \"SQL Failover Cluster Installation exited with `'$exitCode`'.\"\n      if ($validExitCodes -notcontains $exitCode) {\n          Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n\t\t  exit 1\n    }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply OS BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.7.1.7/data1/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $ntrights_cli = \"$TempDirectory\\Utils\\ntrights.exe\"\n  $PackageName = \"SQL Server Management Studio\"\n  $silentArgs = \"/install /quiet /norestart\"\n\n  #download utils\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  #unpack utils\n\n  Add-Type -assembly \"system.io.compression.filesystem\"\n  [io.compression.zipfile]::ExtractToDirectory($FilePath, $TempDirectory)\n\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $selockmemoryprivilege = 'NT SERVICE\\MSSQLSERVER +r SeLockMemoryPrivilege'\n  $semanagevolumeprivilege = 'NT SERVICE\\MSSQLSERVER +r SeManageVolumePrivilege'\n\n  & $ntrights_cli -u $selockmemoryprivilege \n  & $ntrights_cli -u $semanagevolumeprivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply SQL BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.68.88.221/calm/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $sqladdparms_cli = \"$TempDirectory\\Utils\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"c:\\temp\\utils\\TSQL_Scripts\\All_versions\"\n  \n  #create directories\n  #mkdir F:\\SQLDATA01\\\n  #mkdir G:\\SQLDATA02\\\n  #mkdir H:\\TEMPDB01\\\n  #mkdir I:\\TEMPDB02\\\n  #mkdir L:\\UserDB-logs01\\\n  #mkdir T:\\TempDB-logs01\\\n  #mkdir R:\\SQLBACK\n\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  #stop-service MSSQL* \n  #rm \"E:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  #start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  Enable-SqlAlwaysOn -ServerInstance $(hostname) -Force \n  New-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\" -Name \"Endpoint_AG\" -Port 5022 -EncryptionAlgorithm Aes -Encryption Required \n  Set-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\\Endpoints\\Endpoint_AG\" -State Started\n  Invoke-SqlCmd -Server $node.Name -Query $createLogin\n  Invoke-SqlCmd -Server $(hostname) -Query $grantConnectPermissions\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  if (\"$(Get-ClusterNode | where {$_.Id -eq 1} | select -ExpandProperty Name)\" -ne \"$(hostname)\"){\n      exit\n  }\n  #Import-Module SQLPS -DisableNameCheckin\n  $AGName = '@@{SQL_CLUSTER_NAME}@@'\n  $PrimaryNode = $(hostname)\n  $IP = '@@{MSSQL_VIP}@@/255.255.240.0'\n  $replicas = @()\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  $cname = (Get-Cluster -name $PrimaryNode).name\n  $nodes = (get-clusternode -Cluster $cname).name\n\n  #List all of the WSFC nodes all WSFC nodes; all SQL Server instances run DEFAULT instances\n  foreach($node in $nodes)\n  {\n      $replicas += New-SqlAvailabilityReplica -Name $node -EndpointUrl \"TCP://$node.example.com:5022\" -AvailabilityMode \"SynchronousCommit\" -FailoverMode \"Automatic\" -AsTemplate -Version 12 \n  }\n\n\n  New-SqlAvailabilityGroup -Name $AGName -Path \"SQLSERVER:\\SQL\\$PrimaryNode\\DEFAULT\" -AvailabilityReplica $replicas\n  $nodes | Where-Object {$_ -ne $PrimaryNode} | ForEach-Object {Join-SqlAvailabilityGroup -path \"SQLSERVER:\\SQL\\$_\\DEFAULT\" -Name $AGName}\n  New-SqlAvailabilityGroupListener -Name $AGName -staticIP $IP -Port 1433 -Path \"SQLSERVER:\\Sql\\$PrimaryNode\\DEFAULT\\AvailabilityGroups\\$AGName\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "description": "", "name": "0561ade3_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "ddaf74d2_dag", "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, "message_list": [], "variable_list": [], "uuid": "4c520cc3-69c0-4511-9532-fc37ebf881b2"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "7bf7eecb_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}], "description": "", "name": "f564b0c1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7bf7eecb_dag", "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}, "message_list": [], "variable_list": [], "uuid": "1eedce51-5dc1-4f77-9367-a3e2811f35e3"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "ca6dff53-8fe1-4bd8-9157-e6209171d0be"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "4650154e-55c3-40ae-9f0a-48d395743f04"}, "message_list": [], "variable_list": [], "uuid": "723dd749-0da0-468b-b95b-4799cfe40092"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "15b308fc-2232-4f53-a7c3-cefc28020c05", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "febcd131-c2b2-4172-b114-872aefd9d6cf"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "f5a546a4-aa3c-4ab4-8f61-955eb1f50e38"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "79db88fe-7716-4938-9743-5bef5818da63"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "febcd131-c2b2-4172-b114-872aefd9d6cf"}, "edge_type": "inherent", "type": "", "uuid": "0f53fcfc-4d8c-4816-9963-04aec0b5c32e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "f5a546a4-aa3c-4ab4-8f61-955eb1f50e38"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "f5a546a4-aa3c-4ab4-8f61-955eb1f50e38"}, "edge_type": "inherent", "type": "", "uuid": "f7406774-d30a-438c-9465-0abd3f397d46", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "79db88fe-7716-4938-9743-5bef5818da63"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6abdd290-2e9f-4295-ae21-ac6bceb24afe"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "febcd131-c2b2-4172-b114-872aefd9d6cf"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "59afb4f4_runbook", "uuid": "25534166-3b0a-4d2a-93e7-f46b0905610d"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f5a546a4-aa3c-4ab4-8f61-955eb1f50e38"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "723dd749-0da0-468b-b95b-4799cfe40092"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "79db88fe-7716-4938-9743-5bef5818da63"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "6abdd290-2e9f-4295-ae21-ac6bceb24afe"}, "message_list": [], "variable_list": [], "uuid": "cc00eaf6-14f5-445f-9e4e-4982a91d88df"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "1ede7ffa-9cf7-4d9c-ba3d-197ade8ae7f5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "d80e912b-b33b-4ac7-b634-f6d77b9d9028"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "d4a0dbab-8edd-4ce7-a683-0adb4c9c042e"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "d80e912b-b33b-4ac7-b634-f6d77b9d9028"}, "edge_type": "inherent", "type": "", "uuid": "5fa70248-367e-421a-9e82-16c26fd08d67", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "d4a0dbab-8edd-4ce7-a683-0adb4c9c042e"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e9fff3c6-9d92-4eb9-9be2-6092e7e9d8c8"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "d8317ffe-bbec-4ea4-bacb-4a7c51b4862b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d80e912b-b33b-4ac7-b634-f6d77b9d9028"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d4a0dbab-8edd-4ce7-a683-0adb4c9c042e"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "e9fff3c6-9d92-4eb9-9be2-6092e7e9d8c8"}, "message_list": [], "variable_list": [], "uuid": "8939add8-349f-4cdc-8f17-b98b78d8f9aa"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "31cfcb50-802a-4e0a-97da-b0e895dcdff0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "5d89b028-93b4-4ab1-ab55-715ae93d15f4"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5f29825c-2c01-42ce-a939-86147d98cbac"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5d89b028-93b4-4ab1-ab55-715ae93d15f4"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "5f29825c-2c01-42ce-a939-86147d98cbac"}, "message_list": [], "variable_list": [], "uuid": "c72dcdba-7da6-4506-a58a-f4e543e6cde6"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "4795cf07-072c-471a-be2f-55de044f8732", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "27aeec75-fd1d-478e-b4d1-0eb80c56ae17"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "19715d04-339c-49bb-9918-8d672ca82dce"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4150545e_runbook", "uuid": "3e34379f-79c5-479c-b9a3-aad6349d9d10"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "27aeec75-fd1d-478e-b4d1-0eb80c56ae17"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "19715d04-339c-49bb-9918-8d672ca82dce"}, "message_list": [], "variable_list": [], "uuid": "ffd88eeb-2a56-4ef5-bed9-4956d57fae75"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "1a35bbac-5704-4a08-b607-87a75ad4e34c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "ffd713e5-969b-49c6-ac3c-cabd2ef26fb0"}], "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4d9cf489-785b-4f55-a65a-21634f33a9a2"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ffd713e5-969b-49c6-ac3c-cabd2ef26fb0"}], "description": "", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "4d9cf489-785b-4f55-a65a-21634f33a9a2"}, "message_list": [], "variable_list": [], "uuid": "6658eb9b-cf95-4de0-b7f4-cc4256a57b17"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}], "name": "AHV MSSQL Package", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "name": "ddaf74d2_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, "edge_type": "user_defined", "type": "", "uuid": "fe356a6d-7146-43b1-a402-3b5de7372afc", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, "edge_type": "user_defined", "type": "", "uuid": "5a1fcdaa-f0c5-e689-6f57-2f3394cd1c68", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, "edge_type": "user_defined", "type": "", "uuid": "5ea3eb83-f815-1597-430f-bcc72b43566a", "to_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}}, {"from_task_reference": {"kind": "app_task", "name": "Create VG", "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, "edge_type": "user_defined", "type": "", "uuid": "a4d0a000-fd87-bc34-1eb0-15974f830110", "to_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}}, {"from_task_reference": {"kind": "app_task", "name": "Attach VG", "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, "edge_type": "user_defined", "type": "", "uuid": "75f4ac9e-752c-d735-a3b7-a5ea413413da", "to_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}}, {"from_task_reference": {"kind": "app_task", "name": "Connect Mount VG", "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, "edge_type": "user_defined", "type": "", "uuid": "eef3eda3-a7c1-79c6-1387-1dda79274871", "to_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}}, {"from_task_reference": {"kind": "app_task", "name": "Install FC", "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, "edge_type": "user_defined", "type": "", "uuid": "d391e611-03bf-0c6b-77bb-0e1c21fdeebc", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, "edge_type": "user_defined", "type": "", "uuid": "698e4c3c-0b5f-4413-b7c3-e744d697d6c9", "to_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}}, {"from_task_reference": {"kind": "app_task", "name": "Configure WSFC", "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, "edge_type": "user_defined", "type": "", "uuid": "a1274d9d-b71d-b476-93e4-89a48ec63826", "to_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}}, {"from_task_reference": {"kind": "app_task", "name": "Install SQL", "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, "edge_type": "user_defined", "type": "", "uuid": "3e4745e1-66c8-3ea3-b60c-e4975d1f72e0", "to_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply OS BPG", "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, "edge_type": "user_defined", "type": "", "uuid": "e7930a02-5868-7b0b-8b66-59abfebd3fac", "to_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply SQL BPG", "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, "edge_type": "user_defined", "type": "", "uuid": "af2e01c5-7a94-eca1-211c-76b432a319b3", "to_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}}, {"from_task_reference": {"kind": "app_task", "name": "Enable AAG", "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, "edge_type": "user_defined", "type": "", "uuid": "173e8b8d-8067-4803-4c3c-4edce75a387e", "to_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}}, {"from_task_reference": {"kind": "app_task", "name": "Create AAG", "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, "edge_type": "user_defined", "type": "", "uuid": "fe64d42d-6bba-6cf5-fd95-bf1d3142726a", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n# -*- Enabling and starting 'msiscsi'\nSet-Service -Name msiscsi -StartupType Automatic\nStart-Service msiscsi\n# -*- Change first Ehternet adapter name to 'Production'\nGet-NetAdapter -Name \"Ethernet\" | Rename-NetAdapter -NewName \"Production\" -ErrorAction SilentlyContinue\n# -*- Download SQL Updates\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/ISOs/SQLServer2014-KB4052725-x64.exe\",\"$TempDirectory\\SQLServer2014-KB4052725-x64.exe\")", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0b04e48b-1276-4851-991f-dd3893d5d783"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4119a683-ab5e-ceab-78ae-497a45746838"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2307698d-ec6e-c049-4f94-2a08bcfa1111"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create VG", "state": "ACTIVE", "attrs": {"script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\n$ContainerURL = $BaseURL+\"storage_containers\"\n\ntry {\n  $ContainerList = invoke-RestMethod -Uri $ContainerURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n  $ContainerUUID = $ContainerList.entities | where { $_.name -eq \"@@{Nutanix_Container_Name}@@\"} | select storage_container_uuid\n  $ContainerUUID = $ContainerUUID.storage_container_uuid\n\n$Body = @\"\n{\n  \"disk_list\": [\n    {\n      \"create_config\": {\n        \"size\": 1073741824,\n\t\"storage_container_uuid\": \"$ContainerUUID\"\n      },\n      \"index\": 0\n    }\n  ],\n  \"is_shared\": true,\n  \"name\": \"@@{Volume_GroupName}@@\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.task_uuid -eq $null) {\n    Write-Output \"Error while creating volume group\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cbba6085-ade1-1dd4-864f-9a64753fd218"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Attach VG", "state": "ACTIVE", "attrs": {"script": "\n$MsSQL1_iSCSI_IQN = (Get-InitiatorPort).NodeAddress\n\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\ntry {\n\t$VolumeGroupList = invoke-RestMethod -Uri $VolumeGroupURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n\t$VolumeGroupUUID = $VolumeGroupList.entities | where { $_.name -eq \"@@{Volume_GroupName}@@\"} | select uuid\n\t$VolumeGroupUUID = $VolumeGroupUUID.uuid\n\n\t$VolumeGroupAttachURL = $VolumeGroupURL+\"/$VolumeGroupUUID\"+\"/open\"\n\n$Body = @\"\n{\n  \"iscsi_client\": {\n    \"client_address\": \"$MsSQL1_iSCSI_IQN\"\n  },\n  \"operation\": \"ATTACH\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupAttachURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.value -ne $true) {\n    Write-Output \"Error while attaching volume group \"\n    exit 1\n}\nsleep 3", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "445c5b45-f3c2-77cf-9973-fe1b92c4f778"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Connect Mount VG", "state": "ACTIVE", "attrs": {"script": "New-IscsiTargetPortal -TargetPortalAddress @@{PE_DATA_SERVICE_IP}@@\nGet-IscsiTarget | Connect-IscsiTarget -IsPersistent $true\n\n#Initialize Disks\nif (((Get-Disk -Number 1 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\") -and ((Get-Disk -Number 2 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\")) {\n\tGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n\tGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n\tNew-Partition -DiskNumber 1 -UseMaximumSize -DriveLetter E -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Data\" \n\tNew-Partition -DiskNumber 2 -UseMaximumSize -DriveLetter F -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Logs\"\n} else {\n\tWrite-Ou tput \"Disks does not exists or not healthy.`nIf you havent added disks please add 2 disk.`n `t - Data : 200GB`n `t - Logs : 100GB\"\n\texit 1\n}\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  if ((Get-Disk -Number 3 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\"){\n      Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n      New-Partition -DiskNumber 3 -UseMaximumSize -DriveLetter G -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Witness\" \n  } else {\n      Write-Output \"Witness Disk does not exists or not healthy.`nIf you havent added disks please add a volume group and attach.`n `t - Witness : 1GB\"\n      exit 1\n  }\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "048c16a7-3438-e705-00c1-577e52224a41"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install FC", "state": "ACTIVE", "attrs": {"script": "Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools\n\nif (-not (get-WindowsFeature -Name Failover-Clustering -ErrorAction SilentlyContinue | select -ExpandProperty Installed)){\n\tWrite-output \"Failover Clustering is not installed\"\n\texit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2b98a1e9-313a-53a6-7661-63b1341c5067"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "f5e2c678-41e0-56ec-8794-cf2bf993d7c4"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Configure WSFC", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminname=\"@@{DOMAIN_CRED.username}@@\"\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n\n$testScript = {\n\t$Nodes=\"@@{calm_array_address}@@\".split(',')\n    if(Test-Cluster -Node $Nodes){\n        Return $True\n    }\n    else\n    {\n        Return $False\n    }\n} \n\n$TestStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $testScript\n\nif ($TestStatus -eq $false){\nWrite-Output \"Failed\"\nExit 1\n}\n\n$ClusterCreate = {\n    #Import-Module FailoverClusters\n    $Nodes=\"@@{calm_array_address}@@\".split(',')\n    New-Cluster -Name @@{FAILOVER_CLUSTER_NAME}@@ -Node $Nodes -StaticAddress @@{FAILOVER_VIP}@@\n} \n\n$ClusterStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $ClusterCreate\n\nif (!$ClusterStatus.Name){\n    Write-Output \"Failed creating CLuster\"\n}\n\n$RenameClusterDisks = {\n    #Rename Cluster Disks\n    $ClusterDisks =  Get-CimInstance -ClassName MSCluster_Resource -Namespace root/mscluster -Filter \"type = 'Physical Disk'\"\n    foreach ($Disk in $ClusterDisks) {\n    $DiskResource = Get-CimAssociatedInstance -InputObject $Disk -ResultClass MSCluster_DiskPartition\n        if (-not ($DiskResource.VolumeLabel -eq $Disk.Name)) {\n        Invoke-CimMethod -InputObject $Disk -MethodName Rename -Arguments @{newName = $DiskResource.VolumeLabel}\n        }\n    }\n} \n\nInvoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $RenameClusterDisks", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4c0c453c-b23e-a5b2-7a1d-c5c9b242e5b1"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Install SQL", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n    Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop \"Net-Framework-Core\"\n    $DOMAINNAME=(Get-WmiObject Win32_ComputerSystem).Domain\n    $setupDriveLetter = \"D:\"\n    $setupPath = \"$setupDriveLetter\\setup.exe\"\n    #$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,REPLICATION,FULLTEXT,DQ,AS,RS,RS_SHP,RS_SHPWFE,DQC,CONN,IS,BC,SDK,BOL,SSMS,ADV_SSMS,DREPLAY_CTLR,DREPLAY_CLT,SNAC_SDK,MDS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,FULLTEXT,SSMS,ADV_SSMS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$validExitCodes = @(0)\n\n    $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n    $install.WaitForExit()\n    $exitCode = $install.ExitCode\n    $install.Dispose()\n    \n    Write-Output \"SQL Failover Cluster Installation exited with `'$exitCode`'.\"\n      if ($validExitCodes -notcontains $exitCode) {\n          Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n\t\t  exit 1\n    }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b2ca1bb0-467e-8bd2-df51-f15aa1021b39"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply OS BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.7.1.7/data1/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $ntrights_cli = \"$TempDirectory\\Utils\\ntrights.exe\"\n  $PackageName = \"SQL Server Management Studio\"\n  $silentArgs = \"/install /quiet /norestart\"\n\n  #download utils\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  #unpack utils\n\n  Add-Type -assembly \"system.io.compression.filesystem\"\n  [io.compression.zipfile]::ExtractToDirectory($FilePath, $TempDirectory)\n\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $selockmemoryprivilege = 'NT SERVICE\\MSSQLSERVER +r SeLockMemoryPrivilege'\n  $semanagevolumeprivilege = 'NT SERVICE\\MSSQLSERVER +r SeManageVolumePrivilege'\n\n  & $ntrights_cli -u $selockmemoryprivilege \n  & $ntrights_cli -u $semanagevolumeprivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "b503d637-ab95-3d55-ec43-4ffab30747d9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Apply SQL BPG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.68.88.221/calm/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $sqladdparms_cli = \"$TempDirectory\\Utils\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"c:\\temp\\utils\\TSQL_Scripts\\All_versions\"\n  \n  #create directories\n  #mkdir F:\\SQLDATA01\\\n  #mkdir G:\\SQLDATA02\\\n  #mkdir H:\\TEMPDB01\\\n  #mkdir I:\\TEMPDB02\\\n  #mkdir L:\\UserDB-logs01\\\n  #mkdir T:\\TempDB-logs01\\\n  #mkdir R:\\SQLBACK\n\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  #stop-service MSSQL* \n  #rm \"E:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  #start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "469df15e-03ee-ee51-9e6b-f52878d59bc7"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Enable AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  Enable-SqlAlwaysOn -ServerInstance $(hostname) -Force \n  New-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\" -Name \"Endpoint_AG\" -Port 5022 -EncryptionAlgorithm Aes -Encryption Required \n  Set-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\\Endpoints\\Endpoint_AG\" -State Started\n  Invoke-SqlCmd -Server $node.Name -Query $createLogin\n  Invoke-SqlCmd -Server $(hostname) -Query $grantConnectPermissions\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "7f9501e8-850f-6f14-0406-fab5e2b05546"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Create AAG", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "$Script = {\n  if (\"$(Get-ClusterNode | where {$_.Id -eq 1} | select -ExpandProperty Name)\" -ne \"$(hostname)\"){\n      exit\n  }\n  #Import-Module SQLPS -DisableNameCheckin\n  $AGName = '@@{SQL_CLUSTER_NAME}@@'\n  $PrimaryNode = $(hostname)\n  $IP = '@@{MSSQL_VIP}@@/255.255.240.0'\n  $replicas = @()\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  $cname = (Get-Cluster -name $PrimaryNode).name\n  $nodes = (get-clusternode -Cluster $cname).name\n\n  #List all of the WSFC nodes all WSFC nodes; all SQL Server instances run DEFAULT instances\n  foreach($node in $nodes)\n  {\n      $replicas += New-SqlAvailabilityReplica -Name $node -EndpointUrl \"TCP://$node.example.com:5022\" -AvailabilityMode \"SynchronousCommit\" -FailoverMode \"Automatic\" -AsTemplate -Version 12 \n  }\n\n\n  New-SqlAvailabilityGroup -Name $AGName -Path \"SQLSERVER:\\SQL\\$PrimaryNode\\DEFAULT\" -AvailabilityReplica $replicas\n  $nodes | Where-Object {$_ -ne $PrimaryNode} | ForEach-Object {Join-SqlAvailabilityGroup -path \"SQLSERVER:\\SQL\\$_\\DEFAULT\" -Name $AGName}\n  New-SqlAvailabilityGroupListener -Name $AGName -staticIP $IP -Port 1433 -Path \"SQLSERVER:\\Sql\\$PrimaryNode\\DEFAULT\\AvailabilityGroups\\$AGName\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cc8cbaa1-3eb0-c069-be5e-9cbe9ec74f54"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "b7a20e21-9766-5f0c-2175-5190f913dd46"}], "description": "", "name": "0561ade3_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "ddaf74d2_dag", "uuid": "8ad710ca-70ee-4ddf-84c6-166fbdfeb074"}, "message_list": [], "variable_list": [], "uuid": "4c520cc3-69c0-4511-9532-fc37ebf881b2"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "7bf7eecb_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}], "description": "", "name": "f564b0c1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7bf7eecb_dag", "uuid": "051cc434-4b8c-48fc-b216-f391115761cb"}, "message_list": [], "variable_list": [], "uuid": "1eedce51-5dc1-4f77-9367-a3e2811f35e3"}}, "variable_list": [], "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "989722e7-1e1c-460d-8243-47cb6e6add6f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "3249a847-8826-4c0c-bb19-b8837b137a8c"}], "name": "SYS_GEN__DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "07c94d91-a7d1-4e73-adad-f5cff858e204"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "name": "7fcb2293_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, "edge_type": "user_defined", "type": "", "uuid": "c46fc701-e7e6-98ae-276c-e5e56326a6e9", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, "edge_type": "user_defined", "type": "", "uuid": "e91d5fa0-884b-c11f-63d4-a58a5dd3f314", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, "edge_type": "user_defined", "type": "", "uuid": "8e467dfb-5d74-7c2a-6a12-c2684578d6a6", "to_task_reference": {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"DDC-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallController", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nFirst instance would be installed with CONTROLLER,DESKTOPSTUDIO,LICENSESERVER.\nAnd remaining instances would be installed with CONTROLLER,DESKTOPSTUDIO.\n#>\n\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO,LICENSESERVER\"\n}\nelse{\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO\"\n}\n\n<#\nDownloads and installs nutanix citrix plugin\n#>\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n$NutanixAcropolisPlugin = \"@@{NutanixAcropolisPlugin}@@\"\n$NutanixAcropolisPluginFilePath = \"$TempDirectory\\NutanixAcropolis.msi\"\n$NutanixAcropolisPluginInstallPath = \"@@{NutanixAcropolis_Installed_Path}@@\"\n\nWrite-Output \"Downloading the pulgin\"\ntry{\n  (New-Object System.Net.WebClient).DownloadFile($NutanixAcropolisPlugin,$NutanixAcropolisPluginFilePath)\n  Write-Output \"Pulgin has been downloaded\"\n\n  msiexec /i $NutanixAcropolisPluginFilePath /qn\n  sleep(40)\n  Rename-Item -LiteralPath C:\\[INSTALLFOLDER] -NewName \"NutanixAcropolis\"\n  Move-Item -Path C:\\NutanixAcropolis -Destination \"$NutanixAcropolisPluginInstallPath\"\n\n  & \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\RegisterPlugins.exe\" -PluginsRoot \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0\"\n\n  Restart-Service -Name \"Citrix Host Service\"\n  Restart-Service -Name \"Citrix Broker Service\"\n  Restart-Service -Name \"Citrix Machine Creation Service\"\n}\ncatch\n{\n\tWrite-Output \"$_\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "description": "", "name": "ff975c07_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7fcb2293_dag", "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, "message_list": [], "variable_list": [], "uuid": "e94b3342-244c-4335-82c2-93149bb1e6a4"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "5d9a3914_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}], "description": "", "name": "086f090e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "5d9a3914_dag", "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}, "message_list": [], "variable_list": [], "uuid": "66c87e8e-3ff0-4273-be7c-5af1ac3760c6"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "3249a847-8826-4c0c-bb19-b8837b137a8c"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "07c94d91-a7d1-4e73-adad-f5cff858e204"}, "message_list": [], "variable_list": [], "uuid": "e22ab84f-6715-4d12-a9cf-e8b41565845b"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "0137019d-80db-4611-a1e2-71b179bd3abb", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "8e82a3b9-2800-453e-820f-a9ab8cd091b5"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "59827921-c4c3-4020-8c5c-414b24177654"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f42b52af-4f20-49db-a855-5a88cf3442b8"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "59827921-c4c3-4020-8c5c-414b24177654"}, "edge_type": "inherent", "type": "", "uuid": "cc963f31-e4d0-4faf-9314-e75c3d6ecdf5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f42b52af-4f20-49db-a855-5a88cf3442b8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "8e82a3b9-2800-453e-820f-a9ab8cd091b5"}, "edge_type": "inherent", "type": "", "uuid": "73e95aad-4b75-4f6d-b219-65098f1fe7dc", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "59827921-c4c3-4020-8c5c-414b24177654"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1ce8d037-03d7-44c5-8dc1-555b4602f81c"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "e22ab84f-6715-4d12-a9cf-e8b41565845b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8e82a3b9-2800-453e-820f-a9ab8cd091b5"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "29e91e9c_runbook", "uuid": "cf908f54-a25f-4d85-b320-d88fd7d5f906"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "59827921-c4c3-4020-8c5c-414b24177654"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f42b52af-4f20-49db-a855-5a88cf3442b8"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "1ce8d037-03d7-44c5-8dc1-555b4602f81c"}, "message_list": [], "variable_list": [], "uuid": "a8168d56-4050-412a-ab7d-01443d6ac7dd"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "bd433157-3310-4c43-bdbb-185f182daecd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "6dfdeae0-f30f-4c36-bdb3-16f22475cdbb"}], "name": "SYS_GEN__DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "18fbbfbb-7fcd-42eb-a747-47a43ab5a099"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "name": "7fcb2293_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, "edge_type": "user_defined", "type": "", "uuid": "c46fc701-e7e6-98ae-276c-e5e56326a6e9", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, "edge_type": "user_defined", "type": "", "uuid": "e91d5fa0-884b-c11f-63d4-a58a5dd3f314", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, "edge_type": "user_defined", "type": "", "uuid": "8e467dfb-5d74-7c2a-6a12-c2684578d6a6", "to_task_reference": {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"DDC-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallController", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nFirst instance would be installed with CONTROLLER,DESKTOPSTUDIO,LICENSESERVER.\nAnd remaining instances would be installed with CONTROLLER,DESKTOPSTUDIO.\n#>\n\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO,LICENSESERVER\"\n}\nelse{\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO\"\n}\n\n<#\nDownloads and installs nutanix citrix plugin\n#>\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n$NutanixAcropolisPlugin = \"@@{NutanixAcropolisPlugin}@@\"\n$NutanixAcropolisPluginFilePath = \"$TempDirectory\\NutanixAcropolis.msi\"\n$NutanixAcropolisPluginInstallPath = \"@@{NutanixAcropolis_Installed_Path}@@\"\n\nWrite-Output \"Downloading the pulgin\"\ntry{\n  (New-Object System.Net.WebClient).DownloadFile($NutanixAcropolisPlugin,$NutanixAcropolisPluginFilePath)\n  Write-Output \"Pulgin has been downloaded\"\n\n  msiexec /i $NutanixAcropolisPluginFilePath /qn\n  sleep(40)\n  Rename-Item -LiteralPath C:\\[INSTALLFOLDER] -NewName \"NutanixAcropolis\"\n  Move-Item -Path C:\\NutanixAcropolis -Destination \"$NutanixAcropolisPluginInstallPath\"\n\n  & \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\RegisterPlugins.exe\" -PluginsRoot \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0\"\n\n  Restart-Service -Name \"Citrix Host Service\"\n  Restart-Service -Name \"Citrix Broker Service\"\n  Restart-Service -Name \"Citrix Machine Creation Service\"\n}\ncatch\n{\n\tWrite-Output \"$_\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "description": "", "name": "ff975c07_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7fcb2293_dag", "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, "message_list": [], "variable_list": [], "uuid": "e94b3342-244c-4335-82c2-93149bb1e6a4"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "5d9a3914_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}], "description": "", "name": "086f090e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "5d9a3914_dag", "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}, "message_list": [], "variable_list": [], "uuid": "66c87e8e-3ff0-4273-be7c-5af1ac3760c6"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "6dfdeae0-f30f-4c36-bdb3-16f22475cdbb"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "18fbbfbb-7fcd-42eb-a747-47a43ab5a099"}, "message_list": [], "variable_list": [], "uuid": "ad26ecb5-1912-47d5-980d-c6b41468c5f0"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "aa0a865a-68ac-4fc2-82ef-8c8c2996db34", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "de27c2f9-19df-4e81-8fdd-c0663c431028"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "70b09486-6bb0-48c0-a92f-149a3f8280af"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "d29538e4-8ee2-4d57-8ae1-abff7fa7c6b9"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "de27c2f9-19df-4e81-8fdd-c0663c431028"}, "edge_type": "inherent", "type": "", "uuid": "588662a7-1629-4b41-8785-c92806656f14", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "70b09486-6bb0-48c0-a92f-149a3f8280af"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "70b09486-6bb0-48c0-a92f-149a3f8280af"}, "edge_type": "inherent", "type": "", "uuid": "bdf7174a-b82f-4370-9005-24ccc56bc056", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "d29538e4-8ee2-4d57-8ae1-abff7fa7c6b9"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c7a06d02-7de1-48b1-adbc-b018bd753e26"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "de27c2f9-19df-4e81-8fdd-c0663c431028"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "22428294_runbook", "uuid": "b5c778af-c027-4561-9fef-22b4f7c4ced4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "70b09486-6bb0-48c0-a92f-149a3f8280af"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ad26ecb5-1912-47d5-980d-c6b41468c5f0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d29538e4-8ee2-4d57-8ae1-abff7fa7c6b9"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "c7a06d02-7de1-48b1-adbc-b018bd753e26"}, "message_list": [], "variable_list": [], "uuid": "4291c6a7-4c2e-4588-a56f-b96c68aa18ba"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "734f132b-9508-474d-be9b-479e02a8467e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d4a4014d-8d97-4011-9781-03834b7a1d4e"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "31408978-180e-433b-8da6-36ac55da4039"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d4a4014d-8d97-4011-9781-03834b7a1d4e"}, "edge_type": "inherent", "type": "", "uuid": "9ce16fb4-66a0-469d-87e6-54b9be39c1c2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "31408978-180e-433b-8da6-36ac55da4039"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a5cd0180-22cb-4486-85a3-00f647708f76"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "524cd2ca-0de7-4b00-b2e7-b4f22081e7f4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d4a4014d-8d97-4011-9781-03834b7a1d4e"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "31408978-180e-433b-8da6-36ac55da4039"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "a5cd0180-22cb-4486-85a3-00f647708f76"}, "message_list": [], "variable_list": [], "uuid": "21f9d03f-d054-4d5a-9923-19a27926d055"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "ab4f4d5f-0067-4f75-b2ba-a85421c05692", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f4b133a7-9fd3-4a30-9e85-0e6a95d5c485"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a4a2d415-f9cc-42e1-be8e-d5c0b05b1e09"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f4b133a7-9fd3-4a30-9e85-0e6a95d5c485"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "a4a2d415-f9cc-42e1-be8e-d5c0b05b1e09"}, "message_list": [], "variable_list": [], "uuid": "8bb7a4c5-e877-4a88-ad92-1e0eab59978e"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "e53f0bf7-fe18-480c-a331-7ddc61fe37e3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "cc3fb95d-02bc-4441-ad78-d1450c572da7"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "09780db6-f792-4b40-aa32-df7618b0e41c"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73c06dcc_runbook", "uuid": "84d981c6-1e68-4ef9-867f-b153b4dcf8ad"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cc3fb95d-02bc-4441-ad78-d1450c572da7"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "09780db6-f792-4b40-aa32-df7618b0e41c"}, "message_list": [], "variable_list": [], "uuid": "c3ad1577-99eb-4db4-b74f-182fca515874"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "f0c18a37-904d-4ca4-8a49-663df6f83490", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "a8ad24ff-e63d-47a1-9312-d62e43fce88a"}], "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e518dc47-01c9-43f9-ae0c-013aca46749f"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a8ad24ff-e63d-47a1-9312-d62e43fce88a"}], "description": "", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "e518dc47-01c9-43f9-ae0c-013aca46749f"}, "message_list": [], "variable_list": [], "uuid": "9b4e0f37-89b0-4aaf-99de-e8ec3d393eb3"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}], "name": "AHV DDC Package", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "name": "7fcb2293_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, "edge_type": "user_defined", "type": "", "uuid": "c46fc701-e7e6-98ae-276c-e5e56326a6e9", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, "edge_type": "user_defined", "type": "", "uuid": "e91d5fa0-884b-c11f-63d4-a58a5dd3f314", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, "edge_type": "user_defined", "type": "", "uuid": "8e467dfb-5d74-7c2a-6a12-c2684578d6a6", "to_task_reference": {"kind": "app_task", "name": "InstallController", "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "6723e50b-13a5-4eda-97be-633d266a7329"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"DDC-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d46ec10d-b2c2-d17a-69b1-bee54819da21"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4e212dfa-dbaa-a45f-e7b4-991a26d1c890"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallController", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nFirst instance would be installed with CONTROLLER,DESKTOPSTUDIO,LICENSESERVER.\nAnd remaining instances would be installed with CONTROLLER,DESKTOPSTUDIO.\n#>\n\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO,LICENSESERVER\"\n}\nelse{\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO\"\n}\n\n<#\nDownloads and installs nutanix citrix plugin\n#>\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n$NutanixAcropolisPlugin = \"@@{NutanixAcropolisPlugin}@@\"\n$NutanixAcropolisPluginFilePath = \"$TempDirectory\\NutanixAcropolis.msi\"\n$NutanixAcropolisPluginInstallPath = \"@@{NutanixAcropolis_Installed_Path}@@\"\n\nWrite-Output \"Downloading the pulgin\"\ntry{\n  (New-Object System.Net.WebClient).DownloadFile($NutanixAcropolisPlugin,$NutanixAcropolisPluginFilePath)\n  Write-Output \"Pulgin has been downloaded\"\n\n  msiexec /i $NutanixAcropolisPluginFilePath /qn\n  sleep(40)\n  Rename-Item -LiteralPath C:\\[INSTALLFOLDER] -NewName \"NutanixAcropolis\"\n  Move-Item -Path C:\\NutanixAcropolis -Destination \"$NutanixAcropolisPluginInstallPath\"\n\n  & \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\RegisterPlugins.exe\" -PluginsRoot \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0\"\n\n  Restart-Service -Name \"Citrix Host Service\"\n  Restart-Service -Name \"Citrix Broker Service\"\n  Restart-Service -Name \"Citrix Machine Creation Service\"\n}\ncatch\n{\n\tWrite-Output \"$_\"\n    exit 1\n}", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "342b607c-2462-5e96-4538-21e183b929ad"}], "description": "", "name": "ff975c07_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7fcb2293_dag", "uuid": "72b7ae07-135a-4b3e-86bd-490d927c7632"}, "message_list": [], "variable_list": [], "uuid": "e94b3342-244c-4335-82c2-93149bb1e6a4"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "5d9a3914_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}], "description": "", "name": "086f090e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "5d9a3914_dag", "uuid": "314fffd3-e2c6-450f-8bae-915cb72ee125"}, "message_list": [], "variable_list": [], "uuid": "66c87e8e-3ff0-4273-be7c-5af1ac3760c6"}}, "variable_list": [], "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "04b13441-9899-4dbd-aceb-3bb71690c230", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "ab7fd313-a645-4f2b-ba53-0612424d1576"}], "name": "SYS_GEN__DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8b7093ef-35fe-4250-b101-b0fe5a23d437"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "name": "7f665a14_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, "edge_type": "user_defined", "type": "", "uuid": "fd0001a8-0a30-8520-fc3a-b8e75308a523", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, "edge_type": "user_defined", "type": "", "uuid": "e2b38140-d834-584e-f1b1-4d5203e6b376", "to_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}}, {"from_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, "edge_type": "user_defined", "type": "", "uuid": "d563f454-e0df-0cf1-5d2f-997c39ae5609", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}}, {"from_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, "edge_type": "user_defined", "type": "", "uuid": "56021345-29f1-da05-3164-ecb34a8efa36", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, "edge_type": "user_defined", "type": "", "uuid": "a92db77b-9302-244b-b69f-890b726d8c87", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, "edge_type": "user_defined", "type": "", "uuid": "ae8168dd-0836-1117-743f-149ab8cc9425", "to_task_reference": {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n<#\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n#(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/software/Citrix-XD/XenApp_and_XenDesktop_7_11.iso\",\"$TempDirectory\\XenApp_and_XenDesktop_7_11.iso\")\n\nWrite-Output \"Installing Dotnet 4.5.2\"\n\n$FileContent = {\n  # DotNet542 install\n\n  $version = \"DotNet542\"\n  $TempDirectory = \"C:\\Temp\"\n  $HOSTNAME=$(hostname)\n  if ($version -eq \"DotNet542\"){\n      $PackageName = \"DotNet542\"\n      $url = \"http://download.microsoft.com/download/E/2/1/E21644B5-2DF2-47C2-91BD-63C560427900/NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $silentArgs = \"/Passive /NoRestart /Log $TempDirectory\\net452.log\"\n      $filePath = \"$TempDirectory\\NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $setupPath = $filePath\n      $fileType = 'exe'\n      $validExitCodes = @(0, 3010)\n  } \n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $secpasswd = ConvertTo-SecureString \"@@{LOCAL.secret}@@\" -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$secpasswd)\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru -Credential $credential\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n      Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  }\n  Restart-Computer -Force\n}\nAdd-Content \"$TempDirectory\\DotnetInstall.ps1\" -Value $FileContent\n\nNew-ItemProperty -Path HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce -Name DotnetInstall -PropertyType String -Value \"powershell.exe -file $TempDirectory\\DotnetInstall.ps1\"\n\nWrite-Output \"Getting ready for autologin\"\n$DefaultUsername = \"@@{LOCAL.username}@@\"\n$DefaultPassword = \"@@{LOCAL.secret}@@\"\n$AutoLogonCount = 1\n\n$RegPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\"\n$RegROPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\"\nSet-ItemProperty $RegPath \"AutoAdminLogon\" -Value \"1\" -type String  \nSet-ItemProperty $RegPath \"DefaultUsername\" -Value \"$DefaultUsername\" -type String  \nSet-ItemProperty $RegPath \"DefaultPassword\" -Value \"$DefaultPassword\" -type String\nSet-ItemProperty $RegPath \"AutoLogonCount\" -Value \"$AutoLogonCount\" -type DWord            \nRestart-Computer -Force\n#>", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(1)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DotNetCheck", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "exit 0\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\n$Script = {\n\tGet-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full' -Name Release -ErrorAction SilentlyContinue | select -ExpandProperty Release -ErrorAction SilentlyContinue\n}\n$Version=$Null\nDo{\n\t$Version = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -ErrorAction SilentlyContinue -ScriptBlock $Script\n\tStart-Sleep -Seconds 10\n\tWrite-Output \"Dotnet version is '$Version', has to be '379893'\"\n}Until ($Version -eq \"379893\")\n\nWrite-output \"Dotnet installed properly\"", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"StoreFront-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallStoreFront", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nAll the instances would be installed with STOREFRONT.\n#>\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nInstallCitrixComponents $XenDesktopServerSetup \"STOREFRONT\"", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "description": "", "name": "113a7553_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7f665a14_dag", "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, "message_list": [], "variable_list": [], "uuid": "afbce8bf-bfca-49d3-89d0-36aacfb8582b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f2933d9_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}], "description": "", "name": "04e28c7a_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f2933d9_dag", "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}, "message_list": [], "variable_list": [], "uuid": "ba42f734-3991-4d38-91b6-6de051052382"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "ab7fd313-a645-4f2b-ba53-0612424d1576"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "8b7093ef-35fe-4250-b101-b0fe5a23d437"}, "message_list": [], "variable_list": [], "uuid": "0c5950c2-8e30-4839-b0f6-1232cad5866a"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "212c2c23-4083-47a8-8ca4-dbae4d800c3b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "dff019c5-d0ca-4696-b50f-2d220bfcf70f"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "154bc4db-b6da-4f67-846e-afdfbe9e24a7"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "5c5ad920-337b-456b-93eb-294219076720"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "154bc4db-b6da-4f67-846e-afdfbe9e24a7"}, "edge_type": "inherent", "type": "", "uuid": "ba5381c2-3511-44be-b0fb-dd86dae8d19e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "5c5ad920-337b-456b-93eb-294219076720"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "dff019c5-d0ca-4696-b50f-2d220bfcf70f"}, "edge_type": "inherent", "type": "", "uuid": "7c607aca-936d-4d03-a957-34b5f5ebd39c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "154bc4db-b6da-4f67-846e-afdfbe9e24a7"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5052a91e-da5d-48ab-82e4-9c97eb2d9a68"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0c5950c2-8e30-4839-b0f6-1232cad5866a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "dff019c5-d0ca-4696-b50f-2d220bfcf70f"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "21430fdc_runbook", "uuid": "8fca9db6-0af3-40a8-83ba-cd35b4043da6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "154bc4db-b6da-4f67-846e-afdfbe9e24a7"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5c5ad920-337b-456b-93eb-294219076720"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "5052a91e-da5d-48ab-82e4-9c97eb2d9a68"}, "message_list": [], "variable_list": [], "uuid": "d5fa3353-7740-4588-9a7d-9a16f2dfa81b"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "7f357014-3017-4606-9bfb-eadb3521beab", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "453c8a19-30ac-400a-8077-debc3735b056"}], "name": "SYS_GEN__DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "92f7489a-f064-4c39-8136-69d93d98695f"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "name": "7f665a14_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, "edge_type": "user_defined", "type": "", "uuid": "fd0001a8-0a30-8520-fc3a-b8e75308a523", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, "edge_type": "user_defined", "type": "", "uuid": "e2b38140-d834-584e-f1b1-4d5203e6b376", "to_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}}, {"from_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, "edge_type": "user_defined", "type": "", "uuid": "d563f454-e0df-0cf1-5d2f-997c39ae5609", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}}, {"from_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, "edge_type": "user_defined", "type": "", "uuid": "56021345-29f1-da05-3164-ecb34a8efa36", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, "edge_type": "user_defined", "type": "", "uuid": "a92db77b-9302-244b-b69f-890b726d8c87", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, "edge_type": "user_defined", "type": "", "uuid": "ae8168dd-0836-1117-743f-149ab8cc9425", "to_task_reference": {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n<#\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n#(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/software/Citrix-XD/XenApp_and_XenDesktop_7_11.iso\",\"$TempDirectory\\XenApp_and_XenDesktop_7_11.iso\")\n\nWrite-Output \"Installing Dotnet 4.5.2\"\n\n$FileContent = {\n  # DotNet542 install\n\n  $version = \"DotNet542\"\n  $TempDirectory = \"C:\\Temp\"\n  $HOSTNAME=$(hostname)\n  if ($version -eq \"DotNet542\"){\n      $PackageName = \"DotNet542\"\n      $url = \"http://download.microsoft.com/download/E/2/1/E21644B5-2DF2-47C2-91BD-63C560427900/NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $silentArgs = \"/Passive /NoRestart /Log $TempDirectory\\net452.log\"\n      $filePath = \"$TempDirectory\\NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $setupPath = $filePath\n      $fileType = 'exe'\n      $validExitCodes = @(0, 3010)\n  } \n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $secpasswd = ConvertTo-SecureString \"@@{LOCAL.secret}@@\" -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$secpasswd)\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru -Credential $credential\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n      Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  }\n  Restart-Computer -Force\n}\nAdd-Content \"$TempDirectory\\DotnetInstall.ps1\" -Value $FileContent\n\nNew-ItemProperty -Path HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce -Name DotnetInstall -PropertyType String -Value \"powershell.exe -file $TempDirectory\\DotnetInstall.ps1\"\n\nWrite-Output \"Getting ready for autologin\"\n$DefaultUsername = \"@@{LOCAL.username}@@\"\n$DefaultPassword = \"@@{LOCAL.secret}@@\"\n$AutoLogonCount = 1\n\n$RegPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\"\n$RegROPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\"\nSet-ItemProperty $RegPath \"AutoAdminLogon\" -Value \"1\" -type String  \nSet-ItemProperty $RegPath \"DefaultUsername\" -Value \"$DefaultUsername\" -type String  \nSet-ItemProperty $RegPath \"DefaultPassword\" -Value \"$DefaultPassword\" -type String\nSet-ItemProperty $RegPath \"AutoLogonCount\" -Value \"$AutoLogonCount\" -type DWord            \nRestart-Computer -Force\n#>", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(1)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DotNetCheck", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "exit 0\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\n$Script = {\n\tGet-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full' -Name Release -ErrorAction SilentlyContinue | select -ExpandProperty Release -ErrorAction SilentlyContinue\n}\n$Version=$Null\nDo{\n\t$Version = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -ErrorAction SilentlyContinue -ScriptBlock $Script\n\tStart-Sleep -Seconds 10\n\tWrite-Output \"Dotnet version is '$Version', has to be '379893'\"\n}Until ($Version -eq \"379893\")\n\nWrite-output \"Dotnet installed properly\"", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"StoreFront-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallStoreFront", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nAll the instances would be installed with STOREFRONT.\n#>\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nInstallCitrixComponents $XenDesktopServerSetup \"STOREFRONT\"", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "description": "", "name": "113a7553_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7f665a14_dag", "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, "message_list": [], "variable_list": [], "uuid": "afbce8bf-bfca-49d3-89d0-36aacfb8582b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f2933d9_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}], "description": "", "name": "04e28c7a_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f2933d9_dag", "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}, "message_list": [], "variable_list": [], "uuid": "ba42f734-3991-4d38-91b6-6de051052382"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "453c8a19-30ac-400a-8077-debc3735b056"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "92f7489a-f064-4c39-8136-69d93d98695f"}, "message_list": [], "variable_list": [], "uuid": "1d9cd3f8-9adb-4801-82bf-daf9af7b78bd"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "a812870b-8960-4535-ab06-06869cce9da5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "2370fcb7-b97e-43aa-a278-035f91751042"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "e98f1bd5-ad20-4dbf-9eed-ac88d552f43a"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "5224d715-d753-49a4-b7d2-648b4e7225ce"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "2370fcb7-b97e-43aa-a278-035f91751042"}, "edge_type": "inherent", "type": "", "uuid": "15f96553-5780-4153-b785-c6f85f21d320", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "e98f1bd5-ad20-4dbf-9eed-ac88d552f43a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "e98f1bd5-ad20-4dbf-9eed-ac88d552f43a"}, "edge_type": "inherent", "type": "", "uuid": "a4382401-00f8-486b-915a-26b093d04ade", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "5224d715-d753-49a4-b7d2-648b4e7225ce"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2b8c3f09-abd5-4ebf-b1dd-93d568113a23"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2370fcb7-b97e-43aa-a278-035f91751042"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6c029928_runbook", "uuid": "8495a517-0c6e-409e-b97f-7303682d515f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e98f1bd5-ad20-4dbf-9eed-ac88d552f43a"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "1d9cd3f8-9adb-4801-82bf-daf9af7b78bd"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5224d715-d753-49a4-b7d2-648b4e7225ce"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "2b8c3f09-abd5-4ebf-b1dd-93d568113a23"}, "message_list": [], "variable_list": [], "uuid": "1cdbd540-09a4-46f7-bd34-f0e43395c3e9"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "cbc748d9-1f9e-4d7e-9635-2250e7a62fcd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3eabd212-0623-4325-ac00-bef4b3dcd900"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "6e0dec91-d98b-40ec-b4d8-8180f343f4e8"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3eabd212-0623-4325-ac00-bef4b3dcd900"}, "edge_type": "inherent", "type": "", "uuid": "5e7ba0e4-1fb6-4d11-9ae7-e0be47d06865", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "6e0dec91-d98b-40ec-b4d8-8180f343f4e8"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a132587b-562f-4b7d-b804-61bb2d21d239"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "c41c6de2-353a-418a-bdf9-d946e0ded239"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3eabd212-0623-4325-ac00-bef4b3dcd900"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "6e0dec91-d98b-40ec-b4d8-8180f343f4e8"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "a132587b-562f-4b7d-b804-61bb2d21d239"}, "message_list": [], "variable_list": [], "uuid": "031087c2-2fe0-41b3-ad91-8f2f2b97de64"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "d83f985e-9c13-440a-9224-dd6f1a0738de", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "2952b3c7-0a7e-4af6-a68b-5b80dc0c38b7"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ec812473-57c1-4fe6-a5ac-f02834a818f9"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2952b3c7-0a7e-4af6-a68b-5b80dc0c38b7"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "ec812473-57c1-4fe6-a5ac-f02834a818f9"}, "message_list": [], "variable_list": [], "uuid": "6d223f57-f378-4c87-814f-522e57bc3e76"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "0def578e-b4e5-45a1-92d2-6d09c28f6914", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "0f7e2b41-291a-48be-aecb-c5934a9ca2e3"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c6d1d6dc-d263-40b0-a28d-11e5682bb4fc"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e915c064_runbook", "uuid": "e8aaa89d-9411-4575-8c8f-0862d714df89"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0f7e2b41-291a-48be-aecb-c5934a9ca2e3"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "c6d1d6dc-d263-40b0-a28d-11e5682bb4fc"}, "message_list": [], "variable_list": [], "uuid": "48628336-64b3-41fb-9a94-265c20401845"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "07be35ce-1fb8-4415-b805-5aa797fd837c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "dacc1a22-3984-415e-b2b3-fe11dc0ec6b7"}], "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0db85ed9-8921-4b65-a137-9f05d0832bfc"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "dacc1a22-3984-415e-b2b3-fe11dc0ec6b7"}], "description": "", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0db85ed9-8921-4b65-a137-9f05d0832bfc"}, "message_list": [], "variable_list": [], "uuid": "a5124285-856b-4984-af84-52ab46f34112"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}], "name": "AHV StoreFront Package", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "name": "7f665a14_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask", "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, "edge_type": "user_defined", "type": "", "uuid": "fd0001a8-0a30-8520-fc3a-b8e75308a523", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode", "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, "edge_type": "user_defined", "type": "", "uuid": "e2b38140-d834-584e-f1b1-4d5203e6b376", "to_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}}, {"from_task_reference": {"kind": "app_task", "name": "DotNetCheck", "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, "edge_type": "user_defined", "type": "", "uuid": "d563f454-e0df-0cf1-5d2f-997c39ae5609", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}}, {"from_task_reference": {"kind": "app_task", "name": "DisableLocalMode", "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, "edge_type": "user_defined", "type": "", "uuid": "56021345-29f1-da05-3164-ecb34a8efa36", "to_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain", "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, "edge_type": "user_defined", "type": "", "uuid": "a92db77b-9302-244b-b69f-890b726d8c87", "to_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, "edge_type": "user_defined", "type": "", "uuid": "ae8168dd-0836-1117-743f-149ab8cc9425", "to_task_reference": {"kind": "app_task", "name": "InstallStoreFront", "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n<#\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n#(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/software/Citrix-XD/XenApp_and_XenDesktop_7_11.iso\",\"$TempDirectory\\XenApp_and_XenDesktop_7_11.iso\")\n\nWrite-Output \"Installing Dotnet 4.5.2\"\n\n$FileContent = {\n  # DotNet542 install\n\n  $version = \"DotNet542\"\n  $TempDirectory = \"C:\\Temp\"\n  $HOSTNAME=$(hostname)\n  if ($version -eq \"DotNet542\"){\n      $PackageName = \"DotNet542\"\n      $url = \"http://download.microsoft.com/download/E/2/1/E21644B5-2DF2-47C2-91BD-63C560427900/NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $silentArgs = \"/Passive /NoRestart /Log $TempDirectory\\net452.log\"\n      $filePath = \"$TempDirectory\\NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $setupPath = $filePath\n      $fileType = 'exe'\n      $validExitCodes = @(0, 3010)\n  } \n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $secpasswd = ConvertTo-SecureString \"@@{LOCAL.secret}@@\" -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$secpasswd)\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru -Credential $credential\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n      Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  }\n  Restart-Computer -Force\n}\nAdd-Content \"$TempDirectory\\DotnetInstall.ps1\" -Value $FileContent\n\nNew-ItemProperty -Path HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce -Name DotnetInstall -PropertyType String -Value \"powershell.exe -file $TempDirectory\\DotnetInstall.ps1\"\n\nWrite-Output \"Getting ready for autologin\"\n$DefaultUsername = \"@@{LOCAL.username}@@\"\n$DefaultPassword = \"@@{LOCAL.secret}@@\"\n$AutoLogonCount = 1\n\n$RegPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\"\n$RegROPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\"\nSet-ItemProperty $RegPath \"AutoAdminLogon\" -Value \"1\" -type String  \nSet-ItemProperty $RegPath \"DefaultUsername\" -Value \"$DefaultUsername\" -type String  \nSet-ItemProperty $RegPath \"DefaultPassword\" -Value \"$DefaultPassword\" -type String\nSet-ItemProperty $RegPath \"AutoLogonCount\" -Value \"$AutoLogonCount\" -type DWord            \nRestart-Computer -Force\n#>", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "d3b98232-459b-47f0-b047-089a9fffdbbe"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "EnableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(1)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "be0afaee-6fcd-04d1-9534-415c51b63a8d"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DotNetCheck", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "exit 0\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\n$Script = {\n\tGet-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full' -Name Release -ErrorAction SilentlyContinue | select -ExpandProperty Release -ErrorAction SilentlyContinue\n}\n$Version=$Null\nDo{\n\t$Version = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -ErrorAction SilentlyContinue -ScriptBlock $Script\n\tStart-Sleep -Seconds 10\n\tWrite-Output \"Dotnet version is '$Version', has to be '379893'\"\n}Until ($Version -eq \"379893\")\n\nWrite-output \"Dotnet installed properly\"", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED", "uuid": "0793062d-5e1b-461b-9779-fca9283dc76d"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0384a952-0996-e5f4-3a1d-1f6341d63ead"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "DisableLocalMode", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "cfb08964-7626-21c7-9f3c-aaf3d9d5b439"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "AddToDomain", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"StoreFront-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9df55ac1-0c90-192f-be35-7aa6fae9f3cb"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "ACTIVE", "attrs": {"script": "#script\nsleep(30)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "9e41c4b9-797c-8074-d26b-ee594cf8ae60"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallStoreFront", "state": "ACTIVE", "attrs": {"script": "<#\nInstalls Xendesktop components.\nAll the instances would be installed with STOREFRONT.\n#>\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nInstallCitrixComponents $XenDesktopServerSetup \"STOREFRONT\"", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "63119c98-993c-0afc-cc60-5107f5a76647"}], "description": "", "name": "113a7553_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7f665a14_dag", "uuid": "46462846-9cd9-4dbb-91e1-6eede4cda20a"}, "message_list": [], "variable_list": [], "uuid": "afbce8bf-bfca-49d3-89d0-36aacfb8582b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f2933d9_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}], "description": "", "name": "04e28c7a_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f2933d9_dag", "uuid": "2abbac23-e1b2-4ec1-8f0e-5d6cf38e9e7a"}, "message_list": [], "variable_list": [], "uuid": "ba42f734-3991-4d38-91b6-6de051052382"}}, "variable_list": [], "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}], "app_profile_list": [{"deployment_create_list": [{"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "fc07a920-3e9a-4d24-8649-7dcf4161ef47", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "7a297732-f041-43e1-a156-3ecaea0a5c3c"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e8298de6-8afd-42eb-9838-491ba1fa5b18"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0547ec6d-088f-489b-95e4-ff6ee9933bdf"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "92ed86e1-03a7-4ad8-8324-3c262806484e"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "fa61cfb2-e45c-4ac7-9482-887da50d480b"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "92ed86e1-03a7-4ad8-8324-3c262806484e"}, "edge_type": "inherent", "type": "", "uuid": "0955302c-416b-46ea-be4c-a4f92091d871", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "fa61cfb2-e45c-4ac7-9482-887da50d480b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0547ec6d-088f-489b-95e4-ff6ee9933bdf"}, "edge_type": "inherent", "type": "", "uuid": "d006e20d-f706-4b83-9db5-c979a095f5fe", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "92ed86e1-03a7-4ad8-8324-3c262806484e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "7a297732-f041-43e1-a156-3ecaea0a5c3c"}, "edge_type": "inherent", "type": "", "uuid": "154e89aa-afef-456e-bd18-72d49a2b6b17", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e8298de6-8afd-42eb-9838-491ba1fa5b18"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "e8298de6-8afd-42eb-9838-491ba1fa5b18"}, "edge_type": "inherent", "type": "", "uuid": "6de26f5e-6df6-4510-9b8a-5c87d7b71833", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0547ec6d-088f-489b-95e4-ff6ee9933bdf"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b9e7ee3a-fa6d-42ea-a46d-9f7d0a07f2d9"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "7a297732-f041-43e1-a156-3ecaea0a5c3c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "ba756e57-c4b8-4b3e-a0da-3d835cc4b9a2"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e8298de6-8afd-42eb-9838-491ba1fa5b18"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "70ba5d3a-2ef5-4b7d-b88e-d551c9d46b31"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0547ec6d-088f-489b-95e4-ff6ee9933bdf"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "dade7481_runbook", "uuid": "7b57f32e-7ebe-4047-bba3-03953b384a73"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "92ed86e1-03a7-4ad8-8324-3c262806484e"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "fa61cfb2-e45c-4ac7-9482-887da50d480b"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "b9e7ee3a-fa6d-42ea-a46d-9f7d0a07f2d9"}, "message_list": [], "variable_list": [], "uuid": "93378860-9dba-4963-9628-4ece93eaa7a8"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "e68f5455-657a-449b-a0b1-ca083437b7d8", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "1ccee712-f696-4b35-93e1-17b9c58a99e9"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "4661b23c-35df-4db7-87b7-4e172417ba2c"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "1ccee712-f696-4b35-93e1-17b9c58a99e9"}, "edge_type": "inherent", "type": "", "uuid": "dd75d9c9-6b57-4f61-9994-9a35f5560032", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "4661b23c-35df-4db7-87b7-4e172417ba2c"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "421ec4ba-8e32-413e-82b2-0e0520cf2a3c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "544adc65-a5f1-461a-a91b-1cc9161d59c8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1ccee712-f696-4b35-93e1-17b9c58a99e9"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4661b23c-35df-4db7-87b7-4e172417ba2c"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "421ec4ba-8e32-413e-82b2-0e0520cf2a3c"}, "message_list": [], "variable_list": [], "uuid": "f520e97f-b5e3-4fd5-b786-549b31ef57e5"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "2f38012b-8bcf-4ed2-acc1-2fbf364f1647", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a0b788dd-f301-48d9-973a-03f44b58864d"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "7adf9f8f-eec8-4f79-9302-edbf73d2987a"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a0b788dd-f301-48d9-973a-03f44b58864d"}, "edge_type": "inherent", "type": "", "uuid": "393ba859-0211-4758-be32-b524f4e28e22", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "7adf9f8f-eec8-4f79-9302-edbf73d2987a"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "49a37171-cf69-44d9-a152-070939ff03d0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c118eb75-afa6-4792-b383-ddec6609e12d"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a0b788dd-f301-48d9-973a-03f44b58864d"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4150545e_runbook", "uuid": "3e34379f-79c5-479c-b9a3-aad6349d9d10"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7adf9f8f-eec8-4f79-9302-edbf73d2987a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "49a37171-cf69-44d9-a152-070939ff03d0"}, "message_list": [], "variable_list": [], "uuid": "02e3ee7e-c147-45b7-94c3-7c89468d45bf"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "b2e1897d-aa6d-43c8-b0c6-8c48851ebc9e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "cac99ed9-e39a-4c6d-bcfa-76ec7e228ad3"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "b8700fef-9e72-4b23-a396-7d7330fed7cc"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "cac99ed9-e39a-4c6d-bcfa-76ec7e228ad3"}, "edge_type": "inherent", "type": "", "uuid": "a8c4942a-3292-4db2-bab9-33b0eb29743a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "b8700fef-9e72-4b23-a396-7d7330fed7cc"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ab1a2a53-ea5e-4d16-850f-dc0d2ea94a8a"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cac99ed9-e39a-4c6d-bcfa-76ec7e228ad3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c160e91a-aacf-4e25-b3ab-ff5e1eeae258"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b8700fef-9e72-4b23-a396-7d7330fed7cc"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "ab1a2a53-ea5e-4d16-850f-dc0d2ea94a8a"}, "message_list": [], "variable_list": [], "uuid": "031d35ad-a283-40d3-8ef6-24b16a91d33d"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "987729b5-bb98-47cf-a31d-0c1a6f5e201f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "2be8f54a-7b38-48c5-8702-9660e385b184"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "8e6da79f-adf5-47ca-aa66-8923f538b0a3"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "8f05ac0d-ea18-460d-a171-30386249c0e0"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "de7af639-7fa8-4248-94c7-11c8b0304ef2"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "f03c0405-3e2d-4e74-9e72-2e628b10abfa"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "2be8f54a-7b38-48c5-8702-9660e385b184"}, "edge_type": "inherent", "type": "", "uuid": "476b3f24-1852-436a-bea4-15923a509c03", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "8e6da79f-adf5-47ca-aa66-8923f538b0a3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "8e6da79f-adf5-47ca-aa66-8923f538b0a3"}, "edge_type": "inherent", "type": "", "uuid": "9d3fbfc4-5c44-41a5-a7f6-053affa2c71d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "8f05ac0d-ea18-460d-a171-30386249c0e0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "de7af639-7fa8-4248-94c7-11c8b0304ef2"}, "edge_type": "inherent", "type": "", "uuid": "86cf9143-62e7-4abd-9304-aa8a494ad444", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "f03c0405-3e2d-4e74-9e72-2e628b10abfa"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "8f05ac0d-ea18-460d-a171-30386249c0e0"}, "edge_type": "inherent", "type": "", "uuid": "5db3570b-9dba-4d98-915b-a9eb26038a69", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "de7af639-7fa8-4248-94c7-11c8b0304ef2"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a9e83ba3-7916-467b-ab87-8a2881e3a5a7"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2be8f54a-7b38-48c5-8702-9660e385b184"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "59afb4f4_runbook", "uuid": "25534166-3b0a-4d2a-93e7-f46b0905610d"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8e6da79f-adf5-47ca-aa66-8923f538b0a3"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "723dd749-0da0-468b-b95b-4799cfe40092"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8f05ac0d-ea18-460d-a171-30386249c0e0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c75d601d-84bb-476e-8a47-c24404e625c8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "de7af639-7fa8-4248-94c7-11c8b0304ef2"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "f03c0405-3e2d-4e74-9e72-2e628b10abfa"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "a9e83ba3-7916-467b-ab87-8a2881e3a5a7"}, "message_list": [], "variable_list": [], "uuid": "bc2e3d2a-c558-44a9-b2b6-239b52a6a65f"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "a1ed6b57-01c6-4afe-aa3e-04f10e615882", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "c78c1cfe-4ab9-49b2-b377-4a94779a7f41"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "60567637-c9fc-4648-a670-365fc56d3225"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "c78c1cfe-4ab9-49b2-b377-4a94779a7f41"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "60567637-c9fc-4648-a670-365fc56d3225"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "c28b43f2-26c4-4ad6-a83e-d5ef977b6368"}], "uuid": "484bd50e-dd17-47d1-8626-cafdb50c6b32"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "40bd7288-2074-4ad0-ba75-682b3a4b8bc1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "49cb0ba2-4bda-4866-a8dc-bf64258c9237"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dbdfd022-379c-41a9-b5c4-8aa06f01110d"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "49cb0ba2-4bda-4866-a8dc-bf64258c9237"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "dbdfd022-379c-41a9-b5c4-8aa06f01110d"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "e8182be9-0650-4538-a87b-6d4aaefb5710"}], "uuid": "3a86a0a9-f4b1-4e20-b23b-cd9247590c28"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "804b5d86-9ee0-4377-9a13-63a2cff7ead2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "25a52afa-a4b3-488f-83ea-57b72c126b93"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "f21f486d-2cb0-4200-a468-e1b99eeb8ea3"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "f57b9dc8-26b7-4944-9ed9-667d5215945e"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "58ce026f-9b63-4d10-8d39-373011888b6e"}], "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "25a52afa-a4b3-488f-83ea-57b72c126b93"}, "edge_type": "inherent", "type": "", "uuid": "5e0b7bca-79a4-4890-a4a8-bdcec6adfcd7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "f21f486d-2cb0-4200-a468-e1b99eeb8ea3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "f57b9dc8-26b7-4944-9ed9-667d5215945e"}, "edge_type": "inherent", "type": "", "uuid": "c72b05d3-d6b8-448e-aa79-19b89272b47d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "58ce026f-9b63-4d10-8d39-373011888b6e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "f21f486d-2cb0-4200-a468-e1b99eeb8ea3"}, "edge_type": "inherent", "type": "", "uuid": "d00f8145-2433-4ac8-8382-3deddbfaecc4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "f57b9dc8-26b7-4944-9ed9-667d5215945e"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "c1ec3487-648b-4b5c-8f9c-030d664c7ae4"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "d8317ffe-bbec-4ea4-bacb-4a7c51b4862b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "25a52afa-a4b3-488f-83ea-57b72c126b93"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f21f486d-2cb0-4200-a468-e1b99eeb8ea3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "924e5e19-dfd0-416a-b854-176edcc41157"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f57b9dc8-26b7-4944-9ed9-667d5215945e"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "58ce026f-9b63-4d10-8d39-373011888b6e"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "c1ec3487-648b-4b5c-8f9c-030d664c7ae4"}, "message_list": [], "variable_list": [], "uuid": "d5824277-8b06-43c0-9632-fa73ba074fd8"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "5aed8000_deployment", "state": "ACTIVE", "max_replicas": "2", "package_local_reference_list": [{"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}], "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "min_replicas": "2", "variable_list": [], "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, {"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "d2a9a08c-21a1-461f-9f8d-257b9a021e91", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "14dbc054-7cbb-4f82-96cf-e4d0ed509e0f"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8beff67b-f3d2-4539-bd02-52bd7252a1d1"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "7aa0d053-44ae-45ff-95a5-8687ffb7dc57"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "06845409-77b3-44ee-a847-3eaae366f183"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "b76bb1a6-d0e2-4fc8-83ab-4a631613c70a"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "06845409-77b3-44ee-a847-3eaae366f183"}, "edge_type": "inherent", "type": "", "uuid": "08b91700-2302-4481-ae39-e86206699aa4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "b76bb1a6-d0e2-4fc8-83ab-4a631613c70a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "7aa0d053-44ae-45ff-95a5-8687ffb7dc57"}, "edge_type": "inherent", "type": "", "uuid": "496a2892-a3c5-46e7-bd66-f94631c35a9d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "06845409-77b3-44ee-a847-3eaae366f183"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "14dbc054-7cbb-4f82-96cf-e4d0ed509e0f"}, "edge_type": "inherent", "type": "", "uuid": "23566df0-dd9a-4782-9d99-640e8f1a2d61", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8beff67b-f3d2-4539-bd02-52bd7252a1d1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8beff67b-f3d2-4539-bd02-52bd7252a1d1"}, "edge_type": "inherent", "type": "", "uuid": "47af824d-71f9-4c08-8b5a-47e3e22063d2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "7aa0d053-44ae-45ff-95a5-8687ffb7dc57"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ff0b6cce-00fc-459b-9bfe-e05ff29dbb60"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "14dbc054-7cbb-4f82-96cf-e4d0ed509e0f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "ca07949d-be68-49b7-9593-9024986eddbd"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8beff67b-f3d2-4539-bd02-52bd7252a1d1"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "e22ab84f-6715-4d12-a9cf-e8b41565845b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7aa0d053-44ae-45ff-95a5-8687ffb7dc57"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "29e91e9c_runbook", "uuid": "cf908f54-a25f-4d85-b320-d88fd7d5f906"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "06845409-77b3-44ee-a847-3eaae366f183"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b76bb1a6-d0e2-4fc8-83ab-4a631613c70a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "ff0b6cce-00fc-459b-9bfe-e05ff29dbb60"}, "message_list": [], "variable_list": [], "uuid": "b22897ca-527c-48a5-9355-82739988c371"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "7e97de7e-dec4-4c7e-aa57-029bded6d294", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "5222d32c-874b-46af-b9a2-54d81f547df6"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "5181ffae-7ff1-4662-bbb2-b3d3a4a6a140"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "5222d32c-874b-46af-b9a2-54d81f547df6"}, "edge_type": "inherent", "type": "", "uuid": "cc844f51-00fa-42af-9409-a97aa06a0e3a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "5181ffae-7ff1-4662-bbb2-b3d3a4a6a140"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "55858589-3aee-43ab-bc96-150d75f6a277"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "c46d356f-7641-475f-8f42-01a154ad2b03"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5222d32c-874b-46af-b9a2-54d81f547df6"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5181ffae-7ff1-4662-bbb2-b3d3a4a6a140"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "55858589-3aee-43ab-bc96-150d75f6a277"}, "message_list": [], "variable_list": [], "uuid": "ce0acdd2-c38b-4f98-831b-bb166096cddf"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "26c05ec5-a846-4bec-a0d1-748f8f548b7d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "eafccf52-9c32-489e-94a5-9cb409270d67"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "827769b3-c75d-481b-b928-83b0f886696d"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "eafccf52-9c32-489e-94a5-9cb409270d67"}, "edge_type": "inherent", "type": "", "uuid": "9e9d29c6-7967-458d-b0da-07302bf4407e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "827769b3-c75d-481b-b928-83b0f886696d"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "36939ac3-207e-4812-aa76-cff78a346896"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "db68e8b2-9f34-41ba-a06b-432691d64c0a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "eafccf52-9c32-489e-94a5-9cb409270d67"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73c06dcc_runbook", "uuid": "84d981c6-1e68-4ef9-867f-b153b4dcf8ad"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "827769b3-c75d-481b-b928-83b0f886696d"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "36939ac3-207e-4812-aa76-cff78a346896"}, "message_list": [], "variable_list": [], "uuid": "032c9e23-ad4c-4ab6-b2a8-4565b4c802de"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "d59a1789-0ab0-4c82-b4bb-8f10763aa4d8", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "1ebc4062-6036-4520-ac42-8b0ff3499377"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a93aa2d3-c677-4994-a7a2-93e2e58bf2b8"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "1ebc4062-6036-4520-ac42-8b0ff3499377"}, "edge_type": "inherent", "type": "", "uuid": "be1e80f1-89b7-41c9-b6eb-45f80009a7be", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "a93aa2d3-c677-4994-a7a2-93e2e58bf2b8"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4dce03d5-624b-46fd-848a-cf05f3cec681"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1ebc4062-6036-4520-ac42-8b0ff3499377"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "275e990b-764e-4b8f-9d1b-51079bb057cc"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a93aa2d3-c677-4994-a7a2-93e2e58bf2b8"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "4dce03d5-624b-46fd-848a-cf05f3cec681"}, "message_list": [], "variable_list": [], "uuid": "3e0bb858-674c-43b2-a8ec-367daeb73829"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "548ae5b6-60a4-4c02-8be5-f8e17a14935b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "6d535119-a7db-479f-a1cd-cefe7e2d1243"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f0ef7412-063f-493b-9afa-688746138054"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "eb8f95c7-9c18-4794-9d30-c583a058288e"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b9ad0762-6933-47af-8d4e-edfaf05f66a1"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "ed0883b9-6c61-4721-a760-f72d8d34c349"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "6d535119-a7db-479f-a1cd-cefe7e2d1243"}, "edge_type": "inherent", "type": "", "uuid": "01b73937-52fc-4103-b855-edbff190511e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f0ef7412-063f-493b-9afa-688746138054"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "f0ef7412-063f-493b-9afa-688746138054"}, "edge_type": "inherent", "type": "", "uuid": "0c0cb1f7-dcc2-487f-bb64-743e239ed370", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "eb8f95c7-9c18-4794-9d30-c583a058288e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b9ad0762-6933-47af-8d4e-edfaf05f66a1"}, "edge_type": "inherent", "type": "", "uuid": "205f2bc0-3f26-4ed5-9815-c81b48c46a35", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "ed0883b9-6c61-4721-a760-f72d8d34c349"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "eb8f95c7-9c18-4794-9d30-c583a058288e"}, "edge_type": "inherent", "type": "", "uuid": "b331eeea-e872-452f-a19c-addfd4870396", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b9ad0762-6933-47af-8d4e-edfaf05f66a1"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "93a1a860-1a76-4246-825d-a410fb7e751d"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6d535119-a7db-479f-a1cd-cefe7e2d1243"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "22428294_runbook", "uuid": "b5c778af-c027-4561-9fef-22b4f7c4ced4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f0ef7412-063f-493b-9afa-688746138054"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ad26ecb5-1912-47d5-980d-c6b41468c5f0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "eb8f95c7-9c18-4794-9d30-c583a058288e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "db8cc698-a3cd-4243-926f-e8888f897125"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b9ad0762-6933-47af-8d4e-edfaf05f66a1"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "ed0883b9-6c61-4721-a760-f72d8d34c349"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "93a1a860-1a76-4246-825d-a410fb7e751d"}, "message_list": [], "variable_list": [], "uuid": "83578360-6a68-4aee-a82c-96185fad299e"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "9f03e2ed-2749-4b26-a97b-50ffbb71f66b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "32515893-e8c3-4115-9c63-a90fe07be231"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d0ffd153-dea5-433c-82f2-58c3b12a7c9e"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "32515893-e8c3-4115-9c63-a90fe07be231"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "d0ffd153-dea5-433c-82f2-58c3b12a7c9e"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "749c5ac5-0cff-42a8-82cc-3fdef03a95be"}], "uuid": "a6f48613-6c54-4213-8cbd-499344613200"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "7a9fcc76-a0b3-4733-91b2-beca2640b27c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "efa1f652-f4d3-4b09-bd88-066295233103"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "47e87d8b-e749-4041-8575-bce2e057cf0e"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "efa1f652-f4d3-4b09-bd88-066295233103"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "47e87d8b-e749-4041-8575-bce2e057cf0e"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "1bfcfaf4-92f3-43d7-8e0b-6eede7ca259a"}], "uuid": "460fffad-a377-4ab8-9217-27a46973daf8"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "adc308d8-5bc6-4ce4-a5a1-27d311c0f41e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "e6dab513-ddc6-4655-ab9e-a64763646cce"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "a51e282a-b7f1-494b-982c-b06eb2199aea"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8dfe9cab-2bd5-4a84-9781-890cd8380d94"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "ec94606b-d92a-412d-b9b2-f014196cb300"}], "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "e6dab513-ddc6-4655-ab9e-a64763646cce"}, "edge_type": "inherent", "type": "", "uuid": "ce206b81-9bae-42fc-9a37-93fa5ef3991e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "a51e282a-b7f1-494b-982c-b06eb2199aea"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "a51e282a-b7f1-494b-982c-b06eb2199aea"}, "edge_type": "inherent", "type": "", "uuid": "145ecf05-521c-4aea-8691-2e4ababe1b5d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8dfe9cab-2bd5-4a84-9781-890cd8380d94"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "8dfe9cab-2bd5-4a84-9781-890cd8380d94"}, "edge_type": "inherent", "type": "", "uuid": "6dc3349d-d33b-43f6-a98a-f934dfec397c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "ec94606b-d92a-412d-b9b2-f014196cb300"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "662235ed-1db1-4720-b378-da570d2aad23"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "524cd2ca-0de7-4b00-b2e7-b4f22081e7f4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e6dab513-ddc6-4655-ab9e-a64763646cce"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "a51e282a-b7f1-494b-982c-b06eb2199aea"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "6e09c9f4-603b-4ff8-baa2-9641887c94bf"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8dfe9cab-2bd5-4a84-9781-890cd8380d94"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "ec94606b-d92a-412d-b9b2-f014196cb300"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "662235ed-1db1-4720-b378-da570d2aad23"}, "message_list": [], "variable_list": [], "uuid": "845131d1-85a5-4d41-8ede-652c55379910"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "c693df12_deployment", "state": "ACTIVE", "max_replicas": "2", "package_local_reference_list": [{"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}], "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "min_replicas": "2", "variable_list": [], "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, {"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "e95f5dd2-97b2-4d1f-bcf0-266029f99db0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "618a3f34-749a-4b49-a88b-a8855124339a"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "684496b0-77ac-4d98-a13e-af8d934b9182"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "e977d240-97e9-4f5e-800b-9a2670237cda"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "4ad67b9a-9b94-40fc-8266-a821eec75530"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "d7217c1b-045e-456d-b93a-ba5cb2dbed0b"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "4ad67b9a-9b94-40fc-8266-a821eec75530"}, "edge_type": "inherent", "type": "", "uuid": "f5b5da2c-44b5-4719-a38d-62daa8f30526", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "d7217c1b-045e-456d-b93a-ba5cb2dbed0b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "e977d240-97e9-4f5e-800b-9a2670237cda"}, "edge_type": "inherent", "type": "", "uuid": "d19c91d3-e4a3-4157-9174-506985c4c4dd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "4ad67b9a-9b94-40fc-8266-a821eec75530"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "618a3f34-749a-4b49-a88b-a8855124339a"}, "edge_type": "inherent", "type": "", "uuid": "849539b2-1ba2-474b-b005-256cc008a672", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "684496b0-77ac-4d98-a13e-af8d934b9182"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "684496b0-77ac-4d98-a13e-af8d934b9182"}, "edge_type": "inherent", "type": "", "uuid": "4ef53788-1c3a-4c00-b1fa-78fbe0711798", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "e977d240-97e9-4f5e-800b-9a2670237cda"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9cfedc2f-2e58-4935-adf0-0fa03f0d8ad2"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "618a3f34-749a-4b49-a88b-a8855124339a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "7f64f8a3-ed1b-47e3-b3b6-73757e7bacd4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "684496b0-77ac-4d98-a13e-af8d934b9182"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0c5950c2-8e30-4839-b0f6-1232cad5866a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e977d240-97e9-4f5e-800b-9a2670237cda"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "21430fdc_runbook", "uuid": "8fca9db6-0af3-40a8-83ba-cd35b4043da6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4ad67b9a-9b94-40fc-8266-a821eec75530"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d7217c1b-045e-456d-b93a-ba5cb2dbed0b"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "9cfedc2f-2e58-4935-adf0-0fa03f0d8ad2"}, "message_list": [], "variable_list": [], "uuid": "ff4b9390-2a17-4217-a383-97d1c4fe7357"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "4c5d4aab-b98d-4ac5-a95e-6d016661d8b0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "9c65f93d-643f-4bc4-a10a-66ce5dda3e08"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "d094237f-21c3-4bf4-8c44-2e1413e6e959"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "9c65f93d-643f-4bc4-a10a-66ce5dda3e08"}, "edge_type": "inherent", "type": "", "uuid": "02022feb-c311-416d-9d93-ae37ec157d84", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "d094237f-21c3-4bf4-8c44-2e1413e6e959"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ee281559-9060-4aee-b011-99c46b2f28a7"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "10aa8e23-d175-4be1-bb84-cd0c2aa2b121"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9c65f93d-643f-4bc4-a10a-66ce5dda3e08"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d094237f-21c3-4bf4-8c44-2e1413e6e959"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "ee281559-9060-4aee-b011-99c46b2f28a7"}, "message_list": [], "variable_list": [], "uuid": "940c3aa6-3cda-4b64-83d2-7cf773358ff3"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "25d6b640-1692-482f-b396-852408e54f19", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "49227cfe-8313-4abd-abda-b851b570035f"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "88c2c91e-6462-4053-95de-2dfeb2130b9a"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "49227cfe-8313-4abd-abda-b851b570035f"}, "edge_type": "inherent", "type": "", "uuid": "eef2e3fa-ffaf-4ac0-a0bf-20e1cdb1f8d1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "88c2c91e-6462-4053-95de-2dfeb2130b9a"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7ab4a98a-82e0-4c5f-9c6b-ffc764dcc9af"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "f19ee7ad-2388-4f03-9a66-57c4b1b9f69e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "49227cfe-8313-4abd-abda-b851b570035f"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e915c064_runbook", "uuid": "e8aaa89d-9411-4575-8c8f-0862d714df89"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "88c2c91e-6462-4053-95de-2dfeb2130b9a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "7ab4a98a-82e0-4c5f-9c6b-ffc764dcc9af"}, "message_list": [], "variable_list": [], "uuid": "f1abc505-d48f-4d2b-8942-c27d6833c002"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "c273d0a4-dfa0-48c0-be72-869a2f43ec22", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "e42a9bcf-7ca9-434d-9153-5a85c2c4b36b"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "2e8aa5fa-5911-4a46-8046-bc877e133846"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "e42a9bcf-7ca9-434d-9153-5a85c2c4b36b"}, "edge_type": "inherent", "type": "", "uuid": "504e7117-4780-4da6-8f0d-da99b61a41d8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "2e8aa5fa-5911-4a46-8046-bc877e133846"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f88aef08-a6f0-4474-a4a4-ce238fdd1ea9"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e42a9bcf-7ca9-434d-9153-5a85c2c4b36b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "b31737c8-703f-4dfb-adda-b330abefc704"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2e8aa5fa-5911-4a46-8046-bc877e133846"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "f88aef08-a6f0-4474-a4a4-ce238fdd1ea9"}, "message_list": [], "variable_list": [], "uuid": "85ac1056-4bea-4ada-86c5-dbc9f437adb0"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "b9bef95c-c684-4ab0-aa62-83b2c7b15a08", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3871f94f-6ea3-4687-85f3-7487167726e3"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "5c5e8e8a-1a46-4d7f-b565-fedbf7572dbf"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "71bf0802-36ce-4152-bcec-bd203f2bb91f"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "4827ef4d-3cd0-49b9-8848-cc0b9c16eb35"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "81ac4543-0ca1-4401-b4e6-459639c415bf"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3871f94f-6ea3-4687-85f3-7487167726e3"}, "edge_type": "inherent", "type": "", "uuid": "081587fb-cfca-4c61-b1f9-de9a7a54c416", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "5c5e8e8a-1a46-4d7f-b565-fedbf7572dbf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "5c5e8e8a-1a46-4d7f-b565-fedbf7572dbf"}, "edge_type": "inherent", "type": "", "uuid": "2e6932ba-f148-4174-acd1-3408412676dc", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "71bf0802-36ce-4152-bcec-bd203f2bb91f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "4827ef4d-3cd0-49b9-8848-cc0b9c16eb35"}, "edge_type": "inherent", "type": "", "uuid": "80aaeff5-5093-4a64-a84f-3b646e824d89", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "81ac4543-0ca1-4401-b4e6-459639c415bf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "71bf0802-36ce-4152-bcec-bd203f2bb91f"}, "edge_type": "inherent", "type": "", "uuid": "8e5174f0-28da-4a15-a1db-46a04db8d575", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "4827ef4d-3cd0-49b9-8848-cc0b9c16eb35"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f1b9e344-fe13-4a45-bc53-2203f43a964c"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3871f94f-6ea3-4687-85f3-7487167726e3"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6c029928_runbook", "uuid": "8495a517-0c6e-409e-b97f-7303682d515f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5c5e8e8a-1a46-4d7f-b565-fedbf7572dbf"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "1d9cd3f8-9adb-4801-82bf-daf9af7b78bd"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "71bf0802-36ce-4152-bcec-bd203f2bb91f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "c6b874eb-6eab-471a-8ed3-4f162eb03086"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4827ef4d-3cd0-49b9-8848-cc0b9c16eb35"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "81ac4543-0ca1-4401-b4e6-459639c415bf"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "f1b9e344-fe13-4a45-bc53-2203f43a964c"}, "message_list": [], "variable_list": [], "uuid": "075eef5e-decf-4a46-84ea-82a88ff4824b"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "62a238a2-19f7-41e4-94a5-25a0d27a3a10", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "5ac4e9f4-612e-4c58-ab07-80880dd73291"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "660f74f5-f9ef-4ab9-a29a-fbca4d8c6072"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "5ac4e9f4-612e-4c58-ab07-80880dd73291"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "660f74f5-f9ef-4ab9-a29a-fbca4d8c6072"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "9a4782bf-04f7-4859-9423-bce66f433f50"}], "uuid": "335166be-c6e3-4b36-b16c-9da734c7a038"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "6e1b9b38-a3a2-4c97-af62-600c31e745e7", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "9694c5ab-5499-4b96-88c2-5a58d44c834b"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2d0c1223-182f-4aa1-9cdb-4b350029f5ef"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "9694c5ab-5499-4b96-88c2-5a58d44c834b"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "2d0c1223-182f-4aa1-9cdb-4b350029f5ef"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "afa14c8d-0bb2-45a7-81e3-76b501115f77"}], "uuid": "da94c69e-22de-46b4-aa5a-15a9b5a57f63"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "c8951d79-81f2-4408-a967-d8d4241b2f67", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "55042da7-e311-4d25-b253-c22c8b4b14fb"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0d809e16-6b23-448a-b16e-af3e84d285a1"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "46846488-7df0-4ea8-8c90-fe66fb84c40e"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "dc98af78-282a-431d-8b55-81eef630d071"}], "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "55042da7-e311-4d25-b253-c22c8b4b14fb"}, "edge_type": "inherent", "type": "", "uuid": "1cc8209c-7b53-4a9a-862c-1a399f8367ba", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0d809e16-6b23-448a-b16e-af3e84d285a1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "46846488-7df0-4ea8-8c90-fe66fb84c40e"}, "edge_type": "inherent", "type": "", "uuid": "a9772df4-0a8e-4cdb-be19-ba0bb68a5c4e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "dc98af78-282a-431d-8b55-81eef630d071"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0d809e16-6b23-448a-b16e-af3e84d285a1"}, "edge_type": "inherent", "type": "", "uuid": "cac940d4-8e12-4d91-b2a6-38a1c33aa0a1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "46846488-7df0-4ea8-8c90-fe66fb84c40e"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1058be16-8128-45e5-b46d-37cd33c0f1e5"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "c41c6de2-353a-418a-bdf9-d946e0ded239"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "55042da7-e311-4d25-b253-c22c8b4b14fb"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "0d809e16-6b23-448a-b16e-af3e84d285a1"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "616c17fa-e60e-45c7-b861-d4668264cfbc"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "46846488-7df0-4ea8-8c90-fe66fb84c40e"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "dc98af78-282a-431d-8b55-81eef630d071"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "1058be16-8128-45e5-b46d-37cd33c0f1e5"}, "message_list": [], "variable_list": [], "uuid": "288e3a3b-03a3-466c-adbc-dc1c460c3e87"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {"min_replicas": true, "max_replicas": true}, "name": "fc5a5e8b_deployment", "state": "ACTIVE", "max_replicas": "2", "package_local_reference_list": [{"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}], "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "min_replicas": "2", "variable_list": [], "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "6679db32-d6b2-49ed-a646-d9be51224043", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "37d8e6ce-1d35-461f-9b32-8ef540bd621d"}, {"kind": "app_task", "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "73f28d97-659e-4239-91d4-2a4b4dfb20a1"}, {"kind": "app_task", "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "80b86986-5e90-4a59-9fd9-77bd7e12dbb8"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "02fe30a2-d364-44ca-a073-4825439aec61"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9aa2fcdb-3c1c-4ab3-8345-7d1c983eb75d"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a870fafd-df8d-4f69-a83f-d5b928af821f"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "2134a39c-e113-42c3-b2d0-36bf0e29f558"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "a21d0c70-e556-474a-b811-9ea1318f8770"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "2fc89125-b940-4dd2-a4fa-49a57d687261"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "24b7790e-6ece-4d96-a84f-ae88e63e822d"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "661f7556-baa9-4d09-8172-2b1ba37b408b"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "fd0c1234-fb8d-4e5f-97a4-fe1c8570952a"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "260d0d01-c396-46d9-959e-0f17e2c258fa"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7a1feee3-8439-4d03-9273-00e29acf1b08"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "30bdc04c-4e2f-48ca-97f7-8f1b57e56256"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "24b7790e-6ece-4d96-a84f-ae88e63e822d"}, "edge_type": "inherent", "type": "", "uuid": "68cd8cef-707b-4644-bed8-e7ba480d1ae4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "661f7556-baa9-4d09-8172-2b1ba37b408b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "2134a39c-e113-42c3-b2d0-36bf0e29f558"}, "edge_type": "inherent", "type": "", "uuid": "28352263-e941-48af-8f0f-9a110a3dd201", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "24b7790e-6ece-4d96-a84f-ae88e63e822d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "37d8e6ce-1d35-461f-9b32-8ef540bd621d"}, "edge_type": "inherent", "type": "", "uuid": "d240c7eb-e488-4144-981c-534854ce0745", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a870fafd-df8d-4f69-a83f-d5b928af821f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "a870fafd-df8d-4f69-a83f-d5b928af821f"}, "edge_type": "inherent", "type": "", "uuid": "e3588262-1387-4f36-8e6f-16d73673e859", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "2134a39c-e113-42c3-b2d0-36bf0e29f558"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "fd0c1234-fb8d-4e5f-97a4-fe1c8570952a"}, "edge_type": "inherent", "type": "", "uuid": "9489df05-ae98-4bea-8277-a88c2003343e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "260d0d01-c396-46d9-959e-0f17e2c258fa"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "2fc89125-b940-4dd2-a4fa-49a57d687261"}, "edge_type": "inherent", "type": "", "uuid": "0a7c2a72-76b4-4e0b-8195-fb509538be09", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "fd0c1234-fb8d-4e5f-97a4-fe1c8570952a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "80b86986-5e90-4a59-9fd9-77bd7e12dbb8"}, "edge_type": "inherent", "type": "", "uuid": "65a8997a-3a6d-4f98-9f49-2281b874763b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9aa2fcdb-3c1c-4ab3-8345-7d1c983eb75d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "9aa2fcdb-3c1c-4ab3-8345-7d1c983eb75d"}, "edge_type": "inherent", "type": "", "uuid": "a18c3fa5-d633-450c-8ff5-2234d979c1c7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "2fc89125-b940-4dd2-a4fa-49a57d687261"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7a1feee3-8439-4d03-9273-00e29acf1b08"}, "edge_type": "inherent", "type": "", "uuid": "6fcbdc9c-e6b5-42c4-a47e-e407cc98ef73", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "30bdc04c-4e2f-48ca-97f7-8f1b57e56256"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "a21d0c70-e556-474a-b811-9ea1318f8770"}, "edge_type": "inherent", "type": "", "uuid": "4610c366-b0ec-4d21-995b-345c48b23d39", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7a1feee3-8439-4d03-9273-00e29acf1b08"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "73f28d97-659e-4239-91d4-2a4b4dfb20a1"}, "edge_type": "inherent", "type": "", "uuid": "6026bd8a-9502-4641-a056-fbdcf4290dc4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "02fe30a2-d364-44ca-a073-4825439aec61"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "02fe30a2-d364-44ca-a073-4825439aec61"}, "edge_type": "inherent", "type": "", "uuid": "1253f822-d743-4220-b888-9748ee65d693", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "a21d0c70-e556-474a-b811-9ea1318f8770"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "661f7556-baa9-4d09-8172-2b1ba37b408b"}, "edge_type": "dependency", "type": "", "uuid": "7bf1e7cb-94bb-4228-b547-6483a893a5dd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "fd0c1234-fb8d-4e5f-97a4-fe1c8570952a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "260d0d01-c396-46d9-959e-0f17e2c258fa"}, "edge_type": "dependency", "type": "", "uuid": "9371c321-5fe8-4d74-8640-d4d7ef8b09ca", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7a1feee3-8439-4d03-9273-00e29acf1b08"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "41e97a71-5d2b-4073-b43a-02b2d4656862"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "37d8e6ce-1d35-461f-9b32-8ef540bd621d"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "73f28d97-659e-4239-91d4-2a4b4dfb20a1"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "80b86986-5e90-4a59-9fd9-77bd7e12dbb8"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "7f64f8a3-ed1b-47e3-b3b6-73757e7bacd4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "02fe30a2-d364-44ca-a073-4825439aec61"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "ca07949d-be68-49b7-9593-9024986eddbd"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9aa2fcdb-3c1c-4ab3-8345-7d1c983eb75d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "ba756e57-c4b8-4b3e-a0da-3d835cc4b9a2"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a870fafd-df8d-4f69-a83f-d5b928af821f"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "70ba5d3a-2ef5-4b7d-b88e-d551c9d46b31"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2134a39c-e113-42c3-b2d0-36bf0e29f558"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "0c5950c2-8e30-4839-b0f6-1232cad5866a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a21d0c70-e556-474a-b811-9ea1318f8770"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "e22ab84f-6715-4d12-a9cf-e8b41565845b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2fc89125-b940-4dd2-a4fa-49a57d687261"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "dade7481_runbook", "uuid": "7b57f32e-7ebe-4047-bba3-03953b384a73"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "24b7790e-6ece-4d96-a84f-ae88e63e822d"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "661f7556-baa9-4d09-8172-2b1ba37b408b"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "29e91e9c_runbook", "uuid": "cf908f54-a25f-4d85-b320-d88fd7d5f906"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "fd0c1234-fb8d-4e5f-97a4-fe1c8570952a"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "260d0d01-c396-46d9-959e-0f17e2c258fa"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "21430fdc_runbook", "uuid": "8fca9db6-0af3-40a8-83ba-cd35b4043da6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7a1feee3-8439-4d03-9273-00e29acf1b08"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "30bdc04c-4e2f-48ca-97f7-8f1b57e56256"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "41e97a71-5d2b-4073-b43a-02b2d4656862"}, "message_list": [], "variable_list": [], "uuid": "5df2cead-d7e0-4147-81ef-cf2c8fcb52a7"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "d8bef1d5-eaa9-43b5-a062-294deee0b9f0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "028ae163-dfb8-458c-87f5-6fbb48955e46"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "3ac402da-6fb3-4c47-be94-0331abb43019"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "43750334-5e48-45a2-b0aa-105e2ca713ff"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "42660bc8-3517-48e6-b957-8755b41c253b"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "27ce80f8-0b50-44fa-b3f3-5c2f08177a5a"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7f03de86-c633-40cc-a159-ea7c6ed3351a"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "43750334-5e48-45a2-b0aa-105e2ca713ff"}, "edge_type": "inherent", "type": "", "uuid": "aec1189a-d23b-49c4-9f47-9e928f6ea533", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "42660bc8-3517-48e6-b957-8755b41c253b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "3ac402da-6fb3-4c47-be94-0331abb43019"}, "edge_type": "inherent", "type": "", "uuid": "da0aeab0-abce-4d5a-9b4b-30204491d7b7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "27ce80f8-0b50-44fa-b3f3-5c2f08177a5a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "028ae163-dfb8-458c-87f5-6fbb48955e46"}, "edge_type": "inherent", "type": "", "uuid": "c1c3e5a3-ac31-40c2-b13e-21f5b84e4527", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7f03de86-c633-40cc-a159-ea7c6ed3351a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "42660bc8-3517-48e6-b957-8755b41c253b"}, "edge_type": "create_action_edge", "type": "", "uuid": "527aea8a-fbff-417f-a137-3e4e2bb72802", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "27ce80f8-0b50-44fa-b3f3-5c2f08177a5a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "27ce80f8-0b50-44fa-b3f3-5c2f08177a5a"}, "edge_type": "create_action_edge", "type": "", "uuid": "81aed63e-ddc8-4321-8c64-9701e0ac4cc4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "7f03de86-c633-40cc-a159-ea7c6ed3351a"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9f67b8d5-57c2-4bbb-a722-60ae81e82bcb"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "10aa8e23-d175-4be1-bb84-cd0c2aa2b121"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "028ae163-dfb8-458c-87f5-6fbb48955e46"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "c46d356f-7641-475f-8f42-01a154ad2b03"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3ac402da-6fb3-4c47-be94-0331abb43019"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "544adc65-a5f1-461a-a91b-1cc9161d59c8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "43750334-5e48-45a2-b0aa-105e2ca713ff"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "11876906_runbook", "uuid": "8f124766-d920-4d3f-817e-a124841a9465"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "42660bc8-3517-48e6-b957-8755b41c253b"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c1427948_runbook", "uuid": "9e31b5cb-9d9e-4c0c-8ddc-afc02aec6e40"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "27ce80f8-0b50-44fa-b3f3-5c2f08177a5a"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "fee4dd3c_runbook", "uuid": "6a05da8d-3ff3-4005-8c26-b71faa7eafc6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7f03de86-c633-40cc-a159-ea7c6ed3351a"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "9f67b8d5-57c2-4bbb-a722-60ae81e82bcb"}, "message_list": [], "variable_list": [], "uuid": "af5e199e-bbab-424d-8994-ad6890a4bef5"}, "message_list": [], "name": "action_start"}, {"description": "System action for restarting an application", "type": "system", "uuid": "f08b771d-78ee-46e0-92d0-11d6b3514a93", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "592a1ed5-84dc-4ad5-99f1-334d91c023bf"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "8009d170-9c16-45f8-a90f-4b3f999d001f"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "715e3094-076c-491f-9387-036ec7eeb440"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "56ecdc8c-fb5e-4af9-8415-a0b89772c983"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "471d3ce0-9a91-451b-9610-04fa9d0d23a8"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "9321a88f-babd-4b9d-99b8-c5aa74637645"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "592a1ed5-84dc-4ad5-99f1-334d91c023bf"}, "edge_type": "inherent", "type": "", "uuid": "a0f38301-f4dd-44e8-a949-17f600e48e79", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "56ecdc8c-fb5e-4af9-8415-a0b89772c983"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "715e3094-076c-491f-9387-036ec7eeb440"}, "edge_type": "inherent", "type": "", "uuid": "bee0ada3-de76-4063-b78c-a53e2ee23a61", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "471d3ce0-9a91-451b-9610-04fa9d0d23a8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "8009d170-9c16-45f8-a90f-4b3f999d001f"}, "edge_type": "inherent", "type": "", "uuid": "4e2b1a4c-8690-4e84-95e9-fefb7ee7b116", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "9321a88f-babd-4b9d-99b8-c5aa74637645"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "56ecdc8c-fb5e-4af9-8415-a0b89772c983"}, "edge_type": "create_action_edge", "type": "", "uuid": "39cde74c-4e38-427d-8846-7da2ca980c5c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "471d3ce0-9a91-451b-9610-04fa9d0d23a8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "471d3ce0-9a91-451b-9610-04fa9d0d23a8"}, "edge_type": "create_action_edge", "type": "", "uuid": "de3cbe5f-6f5b-464d-8c51-d4775b1686e4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "9321a88f-babd-4b9d-99b8-c5aa74637645"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "74d58612-bf88-4270-938c-1aa6cdc896bd"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c118eb75-afa6-4792-b383-ddec6609e12d"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "592a1ed5-84dc-4ad5-99f1-334d91c023bf"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "f19ee7ad-2388-4f03-9a66-57c4b1b9f69e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8009d170-9c16-45f8-a90f-4b3f999d001f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "db68e8b2-9f34-41ba-a06b-432691d64c0a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "715e3094-076c-491f-9387-036ec7eeb440"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4150545e_runbook", "uuid": "3e34379f-79c5-479c-b9a3-aad6349d9d10"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "56ecdc8c-fb5e-4af9-8415-a0b89772c983"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73c06dcc_runbook", "uuid": "84d981c6-1e68-4ef9-867f-b153b4dcf8ad"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "471d3ce0-9a91-451b-9610-04fa9d0d23a8"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e915c064_runbook", "uuid": "e8aaa89d-9411-4575-8c8f-0862d714df89"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9321a88f-babd-4b9d-99b8-c5aa74637645"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "74d58612-bf88-4270-938c-1aa6cdc896bd"}, "message_list": [], "variable_list": [], "uuid": "ea0dfdbb-8e6e-4f1d-a27b-07ae2795681f"}, "message_list": [], "name": "action_restart"}, {"description": "System action for stopping an application", "type": "system", "uuid": "66739393-23ba-4803-ab49-b899629ae881", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3832f90b-c943-41c4-af24-f1f0678eb2c5"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "c448ecf9-6bf2-4f77-9ba0-affe45fc72e5"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2a880388-2865-44b4-ae84-b6f2a38a8578"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "7fc976b6-c4e8-407d-a280-8e0e6e909afd"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "307bffb7-dbee-4e41-92f7-13c96cacb386"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "aa17998f-3894-43fa-bc1c-20e64146bf4c"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "307bffb7-dbee-4e41-92f7-13c96cacb386"}, "edge_type": "inherent", "type": "", "uuid": "b59ec36a-bd45-43fc-a6c3-e16b3b58a382", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "aa17998f-3894-43fa-bc1c-20e64146bf4c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2a880388-2865-44b4-ae84-b6f2a38a8578"}, "edge_type": "inherent", "type": "", "uuid": "05a174da-bfb5-406f-9766-2dd7e21ba91f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "7fc976b6-c4e8-407d-a280-8e0e6e909afd"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3832f90b-c943-41c4-af24-f1f0678eb2c5"}, "edge_type": "inherent", "type": "", "uuid": "0de5be30-92e2-4066-af69-498eaf4d773f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "c448ecf9-6bf2-4f77-9ba0-affe45fc72e5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2a880388-2865-44b4-ae84-b6f2a38a8578"}, "edge_type": "create_action_edge", "type": "", "uuid": "764d6958-44c9-44e2-b21e-d62b9fc4f182", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "307bffb7-dbee-4e41-92f7-13c96cacb386"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "3832f90b-c943-41c4-af24-f1f0678eb2c5"}, "edge_type": "create_action_edge", "type": "", "uuid": "ffd5c548-1d69-47e8-ac14-08e8acd35bef", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2a880388-2865-44b4-ae84-b6f2a38a8578"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "af36730d-9e42-44c5-aba6-b70114d8bf9a"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3832f90b-c943-41c4-af24-f1f0678eb2c5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "b31737c8-703f-4dfb-adda-b330abefc704"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c448ecf9-6bf2-4f77-9ba0-affe45fc72e5"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2a880388-2865-44b4-ae84-b6f2a38a8578"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "275e990b-764e-4b8f-9d1b-51079bb057cc"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7fc976b6-c4e8-407d-a280-8e0e6e909afd"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "307bffb7-dbee-4e41-92f7-13c96cacb386"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c160e91a-aacf-4e25-b3ab-ff5e1eeae258"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "aa17998f-3894-43fa-bc1c-20e64146bf4c"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "af36730d-9e42-44c5-aba6-b70114d8bf9a"}, "message_list": [], "variable_list": [], "uuid": "bfbd6b7c-b20a-4349-8f4a-6ded15bd72eb"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "01c31691-a9b1-469b-ae5c-0b7a4c176bf3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "eecc5f65-f6a2-4c93-b9f6-269dfba8e62a"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "73a9e087-ac2c-490a-918f-974eee65ad57"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "cc1f2e6d-9cfb-4b96-8bb9-de0d06fb91bd"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "9d163f34-2dc6-4c87-a209-bef88aa33b1c"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2913d0ce-aab0-4cbb-b925-9bdada300094"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "cd0da6dd-41f1-4da6-9f46-44b092a36623"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "ba24d0ce-0076-4705-b017-c13529448296"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "4f776ca7-5c16-4a5d-bd72-277f3e45ba87"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "8e96840c-82a3-4eda-9441-64525fa9b173"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "df795c7f-fc90-4402-b8b9-7211a2edf2ce"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "f6e80d01-f277-4526-96f5-9919fbfb6214"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0aa8c33b-10ed-4406-9b73-b58364bfbf45"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "e8f7c70a-8cb1-4a9a-b9ee-5d04e3a41784"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "9cf2e065-87c6-44a0-9e64-8b041ce891b5"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "3d62525c-307c-419c-b242-e0f9a489e4cc"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "4f776ca7-5c16-4a5d-bd72-277f3e45ba87"}, "edge_type": "inherent", "type": "", "uuid": "5c6c0241-d265-4cf6-a69d-08c537f1c86e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "df795c7f-fc90-4402-b8b9-7211a2edf2ce"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "df795c7f-fc90-4402-b8b9-7211a2edf2ce"}, "edge_type": "inherent", "type": "", "uuid": "7b429530-fc93-4f59-9c93-01889c9b444a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0aa8c33b-10ed-4406-9b73-b58364bfbf45"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "9cf2e065-87c6-44a0-9e64-8b041ce891b5"}, "edge_type": "inherent", "type": "", "uuid": "ab4629ae-6ce0-45ba-b6b2-5315ae861655", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "3d62525c-307c-419c-b242-e0f9a489e4cc"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "0aa8c33b-10ed-4406-9b73-b58364bfbf45"}, "edge_type": "inherent", "type": "", "uuid": "973dd382-c3ec-4fe0-9b99-a6c82e093b48", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "9cf2e065-87c6-44a0-9e64-8b041ce891b5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "cc1f2e6d-9cfb-4b96-8bb9-de0d06fb91bd"}, "edge_type": "inherent", "type": "", "uuid": "db8f16c3-1229-4992-8982-eba6d4f6d3d9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2913d0ce-aab0-4cbb-b925-9bdada300094"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2913d0ce-aab0-4cbb-b925-9bdada300094"}, "edge_type": "inherent", "type": "", "uuid": "3b94ca1e-e835-476b-87c8-852623445ee6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "8e96840c-82a3-4eda-9441-64525fa9b173"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "f6e80d01-f277-4526-96f5-9919fbfb6214"}, "edge_type": "inherent", "type": "", "uuid": "02d6b083-1f62-4f22-956c-32d0decfa6d2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "e8f7c70a-8cb1-4a9a-b9ee-5d04e3a41784"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "8e96840c-82a3-4eda-9441-64525fa9b173"}, "edge_type": "inherent", "type": "", "uuid": "4f79e0d8-70bc-46a6-bf0c-4406e4f769e2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "f6e80d01-f277-4526-96f5-9919fbfb6214"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "eecc5f65-f6a2-4c93-b9f6-269dfba8e62a"}, "edge_type": "inherent", "type": "", "uuid": "f6fde1cb-8eff-4edc-a638-8517a46e7b0b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "73a9e087-ac2c-490a-918f-974eee65ad57"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "73a9e087-ac2c-490a-918f-974eee65ad57"}, "edge_type": "inherent", "type": "", "uuid": "ac40b37b-0112-4df3-b19f-c91dc4460569", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "9d163f34-2dc6-4c87-a209-bef88aa33b1c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "cd0da6dd-41f1-4da6-9f46-44b092a36623"}, "edge_type": "inherent", "type": "", "uuid": "8bad6142-7ca5-47fc-bca2-01f9bef3ea73", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "ba24d0ce-0076-4705-b017-c13529448296"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "9d163f34-2dc6-4c87-a209-bef88aa33b1c"}, "edge_type": "inherent", "type": "", "uuid": "0c2b0494-c7e5-474c-87e6-916d5d261d60", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "cd0da6dd-41f1-4da6-9f46-44b092a36623"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "2913d0ce-aab0-4cbb-b925-9bdada300094"}, "edge_type": "create_action_edge", "type": "", "uuid": "f2445322-9c72-4574-98ca-840c788b674a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "4f776ca7-5c16-4a5d-bd72-277f3e45ba87"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "73a9e087-ac2c-490a-918f-974eee65ad57"}, "edge_type": "create_action_edge", "type": "", "uuid": "c1232c1f-ea8f-4dda-96bf-f0df989058ac", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "cc1f2e6d-9cfb-4b96-8bb9-de0d06fb91bd"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b445683f-1bea-4747-8423-d3cbb9a64dd4"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2eeaf76_runbook", "uuid": "c27981fd-47eb-4bc3-811f-3e2efead0020"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "eecc5f65-f6a2-4c93-b9f6-269dfba8e62a"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6c029928_runbook", "uuid": "8495a517-0c6e-409e-b97f-7303682d515f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "73a9e087-ac2c-490a-918f-974eee65ad57"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "b2d07af0_runbook", "uuid": "c087cba2-e0ce-4bd6-9600-326cf61e9c48"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cc1f2e6d-9cfb-4b96-8bb9-de0d06fb91bd"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "1d9cd3f8-9adb-4801-82bf-daf9af7b78bd"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9d163f34-2dc6-4c87-a209-bef88aa33b1c"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "22428294_runbook", "uuid": "b5c778af-c027-4561-9fef-22b4f7c4ced4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2913d0ce-aab0-4cbb-b925-9bdada300094"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "c6b874eb-6eab-471a-8ed3-4f162eb03086"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cd0da6dd-41f1-4da6-9f46-44b092a36623"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "ba24d0ce-0076-4705-b017-c13529448296"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "d2728354_runbook", "uuid": "455e29e9-fe14-4046-b453-e7dbe246b522"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4f776ca7-5c16-4a5d-bd72-277f3e45ba87"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ad26ecb5-1912-47d5-980d-c6b41468c5f0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8e96840c-82a3-4eda-9441-64525fa9b173"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "59afb4f4_runbook", "uuid": "25534166-3b0a-4d2a-93e7-f46b0905610d"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "df795c7f-fc90-4402-b8b9-7211a2edf2ce"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "db8cc698-a3cd-4243-926f-e8888f897125"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f6e80d01-f277-4526-96f5-9919fbfb6214"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "723dd749-0da0-468b-b95b-4799cfe40092"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0aa8c33b-10ed-4406-9b73-b58364bfbf45"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "e8f7c70a-8cb1-4a9a-b9ee-5d04e3a41784"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "c75d601d-84bb-476e-8a47-c24404e625c8"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9cf2e065-87c6-44a0-9e64-8b041ce891b5"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "3d62525c-307c-419c-b242-e0f9a489e4cc"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "b445683f-1bea-4747-8423-d3cbb9a64dd4"}, "message_list": [], "variable_list": [], "uuid": "d656013c-baa7-4777-8a1d-29cbbe30f8a7"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete created VMs", "type": "system", "uuid": "5b66a97c-5535-4a39-b2ae-9d0a4ac26475", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "762dbadf-87fb-4980-83cc-872585d6cd56"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d30d998a-630c-42e7-94fa-c81c2cce3302"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "19c1f7a9-da29-4fa2-91f1-b3b52dd5e978"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "87c155d6-f39e-46e0-8252-6c30147b44f8"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "42f6f989-4cb0-4c3e-8e22-84f406fbb81c"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ee96d67c-0797-4fcb-a57c-e278d2007425"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b0af364a-da99-493f-bb36-8f274a183161"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "bc77bbfa-d2ad-4dd7-8957-0d69090cefd0"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "bec0caa0-69fb-49bf-8750-adfef9d03233"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "3dd77341-7fa1-4f90-a824-28b8e35aadc8"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "cb645690-9e73-4729-b10d-e1cb415c0e60"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "325ffe8b-0a6c-4c0d-a6dd-580735b35358"}], "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "87c155d6-f39e-46e0-8252-6c30147b44f8"}, "edge_type": "inherent", "type": "", "uuid": "5607d71e-48b8-43fa-9cb0-e08ec1c7aeba", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "bc77bbfa-d2ad-4dd7-8957-0d69090cefd0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "cb645690-9e73-4729-b10d-e1cb415c0e60"}, "edge_type": "inherent", "type": "", "uuid": "71a182ad-a75b-49bb-8c43-704c9137f72d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "uuid": "325ffe8b-0a6c-4c0d-a6dd-580735b35358"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "uuid": "bc77bbfa-d2ad-4dd7-8957-0d69090cefd0"}, "edge_type": "inherent", "type": "", "uuid": "0dc617e8-206e-4181-8436-fda822245d3b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "cb645690-9e73-4729-b10d-e1cb415c0e60"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d30d998a-630c-42e7-94fa-c81c2cce3302"}, "edge_type": "inherent", "type": "", "uuid": "802ea261-5c1d-48d0-ba03-86dd6675b0d4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ee96d67c-0797-4fcb-a57c-e278d2007425"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "uuid": "ee96d67c-0797-4fcb-a57c-e278d2007425"}, "edge_type": "inherent", "type": "", "uuid": "193bf7a0-7a26-4f96-af78-37d2c87ecca4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b0af364a-da99-493f-bb36-8f274a183161"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "b0af364a-da99-493f-bb36-8f274a183161"}, "edge_type": "inherent", "type": "", "uuid": "4b7a5340-a0ad-4d0b-b152-4e605ea8b53d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "uuid": "3dd77341-7fa1-4f90-a824-28b8e35aadc8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "762dbadf-87fb-4980-83cc-872585d6cd56"}, "edge_type": "inherent", "type": "", "uuid": "bf53b204-e420-4562-9449-75c6be74a22b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "19c1f7a9-da29-4fa2-91f1-b3b52dd5e978"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "42f6f989-4cb0-4c3e-8e22-84f406fbb81c"}, "edge_type": "inherent", "type": "", "uuid": "3cd51ed6-2870-4a63-b31d-738a6e7b49d4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "uuid": "bec0caa0-69fb-49bf-8750-adfef9d03233"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "uuid": "19c1f7a9-da29-4fa2-91f1-b3b52dd5e978"}, "edge_type": "inherent", "type": "", "uuid": "c2a706f5-1851-4923-b652-1b30267c38d0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "42f6f989-4cb0-4c3e-8e22-84f406fbb81c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d30d998a-630c-42e7-94fa-c81c2cce3302"}, "edge_type": "create_action_edge", "type": "", "uuid": "dddfbc31-c3ba-423e-9b4c-bfe7e3116388", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "87c155d6-f39e-46e0-8252-6c30147b44f8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "762dbadf-87fb-4980-83cc-872585d6cd56"}, "edge_type": "create_action_edge", "type": "", "uuid": "fbf2977d-08f1-48fa-8078-48214558904d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "d30d998a-630c-42e7-94fa-c81c2cce3302"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ee6a40de-0579-48cd-a9a4-dee23acddbaa"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront", "uuid": "813e8187-94f3-440b-8779-cf16c13129b8"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_813e8187_94f3_440b_8779_cf16c13129b8", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_813e8187_94f3_440b_8779_cf16c13129b8", "uuid": "c41c6de2-353a-418a-bdf9-d946e0ded239"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "762dbadf-87fb-4980-83cc-872585d6cd56"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC", "uuid": "5437ac2f-81c5-40e7-b2bb-005717a964c1"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_5437ac2f_81c5_40e7_b2bb_005717a964c1", "uuid": "524cd2ca-0de7-4b00-b2e7-b4f22081e7f4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d30d998a-630c-42e7-94fa-c81c2cce3302"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package", "uuid": "274ae300-61a4-42b1-9a7f-91df9c3eb59b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_274ae300_61a4_42b1_9a7f_91df9c3eb59b", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "19c1f7a9-da29-4fa2-91f1-b3b52dd5e978"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL", "uuid": "e99aae62-c248-4d7a-b5a8-19241bcc31b3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_e99aae62_c248_4d7a_b5a8_19241bcc31b3", "uuid": "d8317ffe-bbec-4ea4-bacb-4a7c51b4862b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "87c155d6-f39e-46e0-8252-6c30147b44f8"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront", "uuid": "9c2ea92c-1add-40de-8d50-9dee72b9402d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9c2ea92c_1add_40de_8d50_9dee72b9402d", "uuid": "616c17fa-e60e-45c7-b861-d4668264cfbc"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "42f6f989-4cb0-4c3e-8e22-84f406fbb81c"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package", "uuid": "3dfa27f0-53c0-49c4-9923-1b271d531b89"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_3dfa27f0_53c0_49c4_9923_1b271d531b89", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "ee96d67c-0797-4fcb-a57c-e278d2007425"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_DDC", "uuid": "9a57aba0-53a6-4375-b779-00e5bc5a5b06"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_9a57aba0_53a6_4375_b779_00e5bc5a5b06", "uuid": "6e09c9f4-603b-4ff8-baa2-9641887c94bf"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b0af364a-da99-493f-bb36-8f274a183161"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package", "uuid": "7c13ae85-1609-4883-ad42-5d323b522bb2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7c13ae85_1609_4883_ad42_5d323b522bb2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "bc77bbfa-d2ad-4dd7-8957-0d69090cefd0"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "fc5a5e8b_deployment", "uuid": "c7c97ccf-a210-4446-9e6b-953292d54665"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_c7c97ccf_a210_4446_9e6b_953292d54665", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "bec0caa0-69fb-49bf-8750-adfef9d03233"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "c693df12_deployment", "uuid": "cf435bb0-4107-4118-b443-fab9a2a9d756"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_cf435bb0_4107_4118_b443_fab9a2a9d756", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "3dd77341-7fa1-4f90-a824-28b8e35aadc8"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL", "uuid": "d36124ab-52ff-40fc-b6fd-0fbd0e71a62b"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_d36124ab_52ff_40fc_b6fd_0fbd0e71a62b", "uuid": "924e5e19-dfd0-416a-b854-176edcc41157"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cb645690-9e73-4729-b10d-e1cb415c0e60"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "5aed8000_deployment", "uuid": "6c6a2fc2-5eff-44f3-ad14-234f86bf3d6f"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_6c6a2fc2_5eff_44f3_ad14_234f86bf3d6f", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "325ffe8b-0a6c-4c0d-a6dd-580735b35358"}], "description": "", "name": "SYS_GEN__Runbook_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_6b52a166_47ea_451b_9c8b_b11e481a14b7", "uuid": "ee6a40de-0579-48cd-a9a4-dee23acddbaa"}, "message_list": [], "variable_list": [], "uuid": "8bffd4d3-06bc-4668-ac37-907ac174f023"}, "message_list": [], "name": "action_soft_delete"}], "name": "Nutanix", "state": "ACTIVE", "message_list": [], "dependency_list": [{"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "address", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "MSSQL", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "DDC", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "FQDN", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "DDC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "StoreFront", "action_resource_kind": "ApplicationCfg"}], "variable_list": [{"val_type": "STRING", "description": "", "name": "DOMAIN", "type": "LOCAL", "value": "example.com", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "6a380c9f-383d-4561-af1c-682384a7345e"}, {"val_type": "STRING", "description": "", "name": "AD_IP", "type": "LOCAL", "value": "10.5.72.24", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "96d54a7f-8207-4f9b-ade2-7d265c7a3206"}, {"val_type": "STRING", "description": "", "name": "PE_IP", "type": "LOCAL", "value": "10.15.162.16", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "0fba1644-2d49-4231-b53d-b7e0509aef02"}, {"val_type": "STRING", "description": "", "name": "PE_DATA_SERVICE_IP", "type": "LOCAL", "value": "10.15.160.39", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "931289eb-d999-4f67-8d92-e86b3da0a259"}, {"val_type": "STRING", "description": "", "name": "Nutanix_Container_Name", "type": "LOCAL", "value": "default-container-68487138180358", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "ad47cc95-285b-471f-ae7d-529df017e0ba"}, {"val_type": "STRING", "description": "", "name": "Volume_GroupName", "type": "LOCAL", "value": "SQL_VolumeGroup51", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "8784e0d3-0a98-4571-bbab-b2c3ec07fcd9"}, {"val_type": "STRING", "description": "", "name": "FAILOVER_CLUSTER_NAME", "type": "LOCAL", "value": "NTNX-CLS51", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "c11204a4-9b00-468e-bb73-0caeb862bd30"}, {"val_type": "STRING", "description": "", "name": "SQL_CLUSTER_NAME", "type": "LOCAL", "value": "NTNX-SQLCLS51", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "fe44b926-296d-4071-a1b4-dec2c8982675"}, {"val_type": "STRING", "description": "", "name": "FAILOVER_VIP", "type": "LOCAL", "value": "10.15.163.253", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "edfd1f04-aa82-4349-86ff-fe183b4ecc26"}, {"val_type": "STRING", "description": "", "name": "MSSQL_VIP", "type": "LOCAL", "value": "10.15.163.254", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "11071b5c-156e-4520-95bc-544648bb9201"}, {"val_type": "STRING", "description": "", "name": "NutanixAcropolisPlugin", "type": "LOCAL", "value": "http://10.7.1.7/data1/software/Citrix-XD/NutanixAcropolis-MCS-XD7.9_or_later_v1.1.0.0.msi", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "69247c01-246e-4ac9-b088-33f154d7d910"}, {"val_type": "STRING", "description": "", "name": "NutanixAcropolis_Installed_Path", "type": "LOCAL", "value": "C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "afbadfd1-a250-4f7b-82d6-f087ee06be02"}, {"val_type": "STRING", "description": "", "name": "XD_SITE_NAME", "type": "LOCAL", "value": "BLR", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "3910240b-72bf-40d0-8089-52b646be4d17"}, {"val_type": "STRING", "description": "", "name": "CVM_NETWORK", "type": "LOCAL", "value": "vlan.0", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "c6e69fdd-2dad-4568-b264-c34e6531bb66"}, {"val_type": "STRING", "description": "", "name": "CVM_IP", "type": "LOCAL", "value": "10.7.2.227", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "7c54774b-265c-4284-a50e-f047c210cbd1"}, {"val_type": "STRING", "description": "", "name": "CVM_USERNAME", "type": "LOCAL", "value": "admin", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "6bc5c52e-9d65-4426-b9b1-f6a855d7b501"}, {"val_type": "STRING", "description": "", "name": "CVM_PASSWORD", "type": "SECRET", "value": "", "label": "", "state": "ACTIVE", "attrs": {"is_secret_modified": false, "secret_reference": {"uuid": "8254f5dc-a2bf-4326-ad74-e466bd6b8cac"}, "type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "4494bb58-8afe-42de-a54b-9f93fef64f96"}], "uuid": "6b52a166-47ea-451b-9c8b-b11e481a14b7"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL", "uuid": "3d593880-4d04-4b2b-900d-f261d2b7f489"}, "type": "USER"}, "name": "Xen-Desktop-2016"}, "spec": {"description": "", "resources": {"service_definition_list": [{"singleton": false, "name": "MSSQL", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "98f8161b_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "98f8161b_dag"}, "name": "dade7481_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes created VMs as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "02628fa5_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "02628fa5_dag"}, "name": "59afb4f4_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "8e5f51b4_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "8e5f51b4_dag"}, "name": "11876906_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "1a17e568_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "1a17e568_dag"}, "name": "d2728354_runbook"}}, {"critical": false, "type": "system", "description": "System action for restarting an application", "name": "action_restart", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "27dfdc04_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "27dfdc04_dag"}, "name": "4150545e_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [{"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "EXECUTION_MODE"}], "depends_on_list": []}, {"singleton": false, "name": "DDC", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SiteCreation"}, {"kind": "app_task", "name": "EnableLocalMode"}, {"kind": "app_task", "name": "JoinRemainingNodes"}, {"kind": "app_task", "name": "DIsableLocalMode"}, {"kind": "app_task", "name": "CreateResources"}, {"kind": "app_task", "name": "GetFQDN"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SiteCreation"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes"}}, {"from_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "DIsableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "DIsableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "CreateResources"}}, {"from_task_reference": {"kind": "app_task", "name": "CreateResources"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "GetFQDN"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "aaa51f8e_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n  echo exiting\n  exit\n}\necho \"@@{MSSQL.address}@@\"\n$DatabaseServer = \"@@{SQL_CLUSTER_NAME}@@\"\n$DatabaseName_Site = \"@@{XD_SITE_NAME}@@\" + \"_Site\"\n$DatabaseName_Logging = \"@@{XD_SITE_NAME}@@\" + \"_Logging\"\n$DatabaseName_Monitor = \"@@{XD_SITE_NAME}@@\" + \"_Monitor\"\n\n# Database user must be sysadmin on db server\n$DatabaseUser = \"@@{SQL_CREDS.username}@@\"\n$DatabasePassword = \"@@{SQL_CREDS.secret}@@\"\n\n$XD7Site = \"@@{XD_SITE_NAME}@@\"\n\n$DatabasePassword = $DatabasePassword | ConvertTo-SecureString -asPlainText -Force\n$Database_CredObject = New-Object System.Management.Automation.PSCredential($DatabaseUser,$DatabasePassword)\n\nAdd-PSSnapin Citrix.*\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Site -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Site -DatabaseCredentials $Database_CredObject\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Logging -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Logging -DatabaseCredentials $Database_CredObject\nNew-XDDatabase -AdminAddress $env:COMPUTERNAME -SiteName $XD7Site -DataStore Monitor -DatabaseServer $DatabaseServer -DatabaseName $DatabaseName_Monitor -DatabaseCredentials $Database_CredObject\n\nNew-XDSite -DatabaseServer $DatabaseServer -LoggingDatabaseName $DatabaseName_Logging -MonitorDatabaseName $DatabaseName_Monitor -SiteDatabaseName $DatabaseName_Site -SiteName $XD7Site -AdminAddress $env:COMPUTERNAME \n\nSet-XDLicensing -LicenseServerAddress $ENV:COMPUTERNAME -LicenseServerPort 27000\n$netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n$FullAdminGroup = \"$netbios\\Domain Admins\"\n\nNew-AdminAdministrator -AdminAddress $env:COMPUTERNAME -Name $FullAdminGroup\nAdd-AdminRight -AdminAddress $env:COMPUTERNAME -Administrator $FullAdminGroup -Role 'Full Administrator' -All"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "SiteCreation"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "EnableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -eq \"0\"){\n  echo \"exiting\"\n  exit\n}\n$script = {\n\t$DatabaseUser = \"@@{SQL_CREDS.username}@@\"\n\t$DatabasePassword = \"@@{SQL_CREDS.secret}@@\"\n    $DatabasePassword = $DatabasePassword | ConvertTo-SecureString -asPlainText -Force\n    $Database_CredObject = New-Object System.Management.Automation.PSCredential($DatabaseUser,$DatabasePassword)\n\n    Add-XDController -AdminAddress @@{address}@@ -SiteControllerAddress @@{calm_array_address[0]}@@ -DatabaseCredentials $Database_CredObject\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "JoinRemainingNodes"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "DIsableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n  exit\n}\n[string]$ConnectionName = \"NutanixAcropolis\"\n[string]$HostingUnitName = \"NutanixResources\"\n[string]$AHVIP = \"@@{CVM_IP}@@\"\n[string]$Username = \"@@{CVM_USERNAME}@@\"\n[string]$Password = \"@@{CVM_PASSWORD}@@\"\n[string]$NetworkId = \"@@{CVM_NETWORK}@@\"\n[string]$ConnectionType = \"Custom\"\n[string]$PluginId = \"AcropolisFactory\"\n\n\n$ErrorActionPreference = \"Stop\"\nAdd-PSSnapin -Name Citrix.*\n\n$connection = Get-Item -Path \"xdhyp:\\Connections\\*\" | Where-Object {$_.PSChildName -eq $ConnectionName}\nif ($connection -eq $null) {\n\n   $connection = New-Item -Path \"xdhyp:\\Connections\" -Name $ConnectionName -ConnectionType $ConnectionType -PluginId $PluginId -HypervisorAddress $AHVIP -UserName $Username -Password $Password -Persist\n\n   New-BrokerHypervisorConnection -HypHypervisorConnectionUid $connection.HypervisorConnectionUid\n\n   $hupath = \"xdhyp:\\HostingUnits\\$HostingUnitName\"\n\n   $rootpath = \"$($connection | select -ExpandProperty FullPath)\" + '\\'\n\n   New-Item -Path $hupath -HypervisorConnectionName $ConnectionName -NetworkPath \"XDHyp:\\Connections\\Nutanix\\$($NetworkId).network\" -RootPath $rootpath\n\n} else {\n    Write-Output \"Connection $ConnectionName already exists\"\n}", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "CreateResources"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "Write-Output \"FQDN=$env:computername.$env:userdnsdomain\"", "eval_variables": ["FQDN"], "eval_scope": "local", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED"}, "type": "", "script_type": "sh"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "GetFQDN"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "aaa51f8e_dag"}, "name": "29e91e9c_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes created VMs as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "3cea26c0_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "3cea26c0_dag"}, "name": "22428294_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "dc2f4c2e_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "dc2f4c2e_dag"}, "name": "c1427948_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "2d568762_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "2d568762_dag"}, "name": "b2d07af0_runbook"}}, {"critical": false, "type": "system", "description": "System action for restarting an application", "name": "action_restart", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "0038d36c_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "0038d36c_dag"}, "name": "73c06dcc_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [{"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "EXECUTION_MODE"}, {"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "FQDN"}], "depends_on_list": []}, {"singleton": false, "name": "StoreFront", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "CreateStore"}, {"kind": "app_task", "name": "EnableLocalMode"}, {"kind": "app_task", "name": "JoinRemainingNodes"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "CreateStore"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "JoinRemainingNodes"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "52ea23b6_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$FQDN = \"$env:computername.$env:userdnsdomain\"\n$HostbaseUrl = \"http://\" + $FQDN\n$StoreFriendlyName = \"$env:USERDOMAIN\"\n$StoreFriendlyNameWithoutSpaces = $StoreFriendlyName -replace '\\s',''\n$SiteId = 1\n$Farmtype = \"XenDesktop\"\n$FarmServers = \"@@{DDC.FQDN}@@\".Split(',')\n$StoreVirtualPath = \"/Citrix/\" + $StoreFriendlyNameWithoutSpaces\n$LoadbalanceServers = $false\n$Port = 80\n$SSLRelayPort = 443\n$TransportType = \"HTTP\"\n\n$GatewayUrl = \"\"\n$GatewayCallbackUrl = \"\"\n$GatewaySTAUrls = \"\"\n$GatewaySubnetIP = \"\"\n$GatewayName = \"\"\n\nSet-StrictMode -Version 2.0\n\n# Any failure is a terminating failure.\n$ErrorActionPreference = 'Stop'\n$ReportErrorShowStackTrace = $true\n$ReportErrorShowInnerException = $true\n\n# Import StoreFront modules. Required for versions of PowerShell earlier than 3.0 that do not support autoloading\nImport-Module Citrix.StoreFront\nImport-Module Citrix.StoreFront.Stores\nImport-Module Citrix.StoreFront.Authentication\nImport-Module Citrix.StoreFront.WebReceiver\nImport-Module Citrix.StoreFront.Roaming\n\n# Determine the Authentication and Receiver virtual path to use based of the Store\n$authenticationVirtualPath = \"$($StoreVirtualPath.TrimEnd('/'))Auth\"\n$receiverVirtualPath = \"$($StoreVirtualPath.TrimEnd('/'))Web\"\n\n# Determine if the deployment already exists\n$existingDeployment = Get-STFDeployment\n\nif(-not $existingDeployment)\n{\n    # Install the required StoreFront components\n    Add-STFDeployment -HostBaseUrl $HostbaseUrl -SiteId $SiteId -Confirm:$false\n}\nelseif($existingDeployment.HostbaseUrl -eq $HostbaseUrl)\n{\n    # The deployment exists but it is configured to the desired hostbase url\n    Write-Output \"A deployment has already been created with the specified hostbase url on this server and will be used.\"\n}\nelse\n{\n    Write-Error \"A deployment has already been created on this server with a different host base url.\"\n}\n\n# Determine if the authentication service at the specified virtual path exists\n$authentication = Get-STFAuthenticationService -VirtualPath $authenticationVirtualPath\n\nif(-not $authentication)\n{\n    # Add an Authentication service using the IIS path of the Store appended with Auth\n    $authentication = Add-STFAuthenticationService $authenticationVirtualPath\n}\nelse\n{\n    Write-Output \"An Authentication service already exists at the specified virtual path and will be used.\"\n}\n\n# Determine if the store service at the specified virtual path exists\n$store = Get-STFStoreService -VirtualPath $StoreVirtualPath\n\nif(-not $store)\n{\n    # Add a Store that uses the new Authentication service configured to publish resources from the supplied servers\n    $store = Add-STFStoreService -VirtualPath $StoreVirtualPath -AuthenticationService $authentication -FarmName $Farmtype -FarmType $Farmtype -Servers $FarmServers -LoadBalance $LoadbalanceServers `\n        -Port $Port -SSLRelayPort $SSLRelayPort -TransportType $TransportType\n}\nelse\n{\n    Write-Output \"A Store service already exists at the specified virtual path and will be used. Farm and servers will be appended to this store.\"\n    # Get the number of farms configured in the store\n    $farmCount = (Get-STFStoreFarmConfiguration $store).Farms.Count\n\n    # Append the farm to the store with a unique name\n    Add-STFStoreFarm -StoreService $store -FarmName \"Controller$($farmCount + 1)\" -FarmType $Farmtype -Servers $FarmServers -LoadBalance $LoadbalanceServers -Port $Port `\n        -SSLRelayPort $SSLRelayPort -TransportType $TransportType\n}\n\n# Determine if the receiver service at the specified virtual path exists\n$receiver = Get-STFWebReceiverService -VirtualPath $receiverVirtualPath\n\nif(-not $receiver)\n{\n    # Add a Receiver for Web site so users can access the applications and desktops in the published in the Store\n    $receiver = Add-STFWebReceiverService -VirtualPath $receiverVirtualPath -StoreService $store\n}\nelse\n{\n    Write-Output \"A Web Receiver service already exists at the specified virtual path and will be used.\"\n}\n\n# Determine if PNA is configured for the Store service\n$storePnaSettings = Get-STFStorePna -StoreService $store\n\nif(-not $storePnaSettings.PnaEnabled)\n{\n    # Enable XenApp services on the Store and make it the default for this server\n    Enable-STFStorePna -StoreService $store -AllowUserPasswordChange -DefaultPnaService\n}\n\n# Determine the Authentication and Receiver sites based on the Store\n$store = Get-STFStoreService -VirtualPath $StoreVirtualPath\n$authentication = Get-STFAuthenticationService -StoreService $store\n$receiverForWeb = Get-STFWebReceiverService -StoreService $store\n\n# Get the Web Receiver CitrixAGBasic and ExplicitForms authentication method from the supported protocols\n# Included for demonstration purposes as the protocol name can be used directly if known\n$receiverMethods = Get-STFWebReceiverAuthenticationMethodsAvailable | Where-Object { $_ -match \"Explicit\" -or $_ -match \"CitrixAG\" }\n\n# Enable CitrixAGBasic in Receiver for Web (required for remote access)\nSet-STFWebReceiverAuthenticationMethods -WebReceiverService $receiverForWeb -AuthenticationMethods $receiverMethods\n\n# Get the CitrixAGBasic authentication method from the protocols installed.\n# Included for demonstration purposes as the protocol name can be used directly if known\n$citrixAGBasic = Get-STFAuthenticationProtocolsAvailable | Where-Object { $_ -match \"CitrixAGBasic\" }\n\n# Enable CitrixAGBasic in the Authentication service (required for remote access)\nEnable-STFAuthenticationServiceProtocol -AuthenticationService $authentication -Name $citrixAGBasic\n<#\n# Add a new Gateway used to access the new Store remotely\nAdd-STFRoamingGateway -Name $GatewayName -LogonType Domain -Version Version10_0_69_4 -GatewayUrl $GatewayUrl `\n-CallbackUrl $GatewayCallbackUrl -SecureTicketAuthorityUrls $GatewaySTAUrls\n\n# Get the new Gateway from the configuration (Add-STFRoamingGateway will return the new Gateway if -PassThru is supplied as a parameter)\n$gateway = Get-STFRoamingGateway -Name $GatewayName\n\n# If the gateway subnet was provided then set it on the gateway object\nif($GatewaySubnetIP)\n{\n    Set-STFRoamingGateway -Gateway $gateway -SubnetIPAddress $GatewaySubnetIP\n}\n\n# Register the Gateway with the new Store\nRegister-STFStoreGateway -Gateway $gateway -StoreService $store -DefaultGateway\n\nWrite-Host \"Remote Access Deployment complete\"\n#>", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "DOMAIN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "CreateStore"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\n", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "EnableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n    if((Test-Path C:\\_CONFIG) -eq 0 ) {\n\t\tmkdir C:\\_CONFIG\n    }\n    $RemotePasscodeScript=\"C:\\_CONFIG\\SFPasscodeScript.ps1\"\n    if((Test-Path $RemotePasscodeScript) -ne 0) {\n\t\tRemove-Item $RemotePasscodeScript\n\t}\n    Add-Content $RemotePasscodeScript \"Import-Module Citrix.StoreFront\"\n    Add-Content $RemotePasscodeScript \"`$status = Start-STFServerGroupJoin -IsAuthorizingServer -Confirm:`$false\"\n    Add-Content $RemotePasscodeScript \"`$Passcode = `$status.Passcode\"\n    Add-Content $RemotePasscodeScript \"`$Passcode.ToString() > C:\\_CONFIG\\Passcode.txt\"\n    Add-Content $RemotePasscodeScript \"Wait-STFServerGroupJoin -Confirm:`$false\"\n    Add-Content $RemotePasscodeScript \"Stop-STFServerGroupJoin\"\n    Add-Content $RemotePasscodeScript \"Publish-STFServerGroupConfiguration -Confirm:`$false\"\n}\n\n$LocalPasscodeScript=\"C:\\_CONFIG\\SFPasscodeScript.ps1\"\nschtasks /Create /F /TN SFPasscodeScript /S @@{address}@@ /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /RU \"SYSTEM\" /TR \"powershell.exe -File $LocalPasscodeScript\" /SC once /ST 23:30\nschtasks /Run /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN SFPasscodeScript /S @@{address}@@\nStart-Sleep -seconds 30\n\n$passcode = Invoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tGet-Content -Path \"C:\\_CONFIG\\Passcode.txt\"\n}\n\nif ($passcode -eq \"\"){\n\tWrite-Output \"Passcode is empty\"\n    exit 1\n}\n\n$fqdn = Invoke-Command -ComputerName @@{address}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tWrite-Output \"$env:computername.$env:userdnsdomain\"\n}\n\nInvoke-Command -ComputerName @@{calm_array_address[1]}@@ -Credential $Creds -Authentication Credssp -ScriptBlock {\n\tparam($Server,$Passcode)\n    if((Test-Path C:\\_CONFIG) -eq 0 ) {\n\t\tmkdir C:\\_CONFIG\n    }\n    $RemoteSTFServerGroupJoinRem=\"C:\\_CONFIG\\STFServerGroupJoinRem.ps1\"\n    if((Test-Path $RemoteSTFServerGroupJoinRem) -ne 0) {\n\t\tRemove-Item $RemoteSTFServerGroupJoinRem\n\t}\n    Add-Content $RemoteSTFServerGroupJoinRem \"Import-Module Citrix.StoreFront\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Start-STFServerGroupJoin -AuthorizerHostName $Server -Passcode $Passcode -Confirm:`$false\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Wait-STFServerGroupJoin\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Stop-STFServerGroupJoin\"\n    Add-Content $RemoteSTFServerGroupJoinRem \"Wait-STFPublishServerGroupConfiguration\"\n} -ArgumentList $fqdn,$passcode\n\n$LocalSTFServerGroupJoinRem=\"C:\\_CONFIG\\STFServerGroupJoinRem.ps1\"\nschtasks /Create /F /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@ /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /RU \"SYSTEM\" /TR \"powershell.exe -File $LocalSTFServerGroupJoinRem\" /SC once /ST 23:30\nschtasks /Run /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@\n\nschtasks /Delete /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN SFPasscodeScript /S @@{address}@@ /F\nschtasks /Delete /U \"@@{DOMAIN_CRED.username}@@\" /P \"@@{DOMAIN_CRED.secret}@@\" /TN STFServerGroupJoinRem /S @@{calm_array_address[1]}@@ /F"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "JoinRemainingNodes"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "52ea23b6_dag"}, "name": "21430fdc_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes created VMs as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "6fd63783_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "6fd63783_dag"}, "name": "6c029928_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "a8287d2f_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "a8287d2f_dag"}, "name": "fee4dd3c_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "a14c3309_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "a14c3309_dag"}, "name": "b2eeaf76_runbook"}}, {"critical": false, "type": "system", "description": "System action for restarting an application", "name": "action_restart", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "b10ebd95_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "b10ebd95_dag"}, "name": "e915c064_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [{"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "EXECUTION_MODE"}], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "POWERSHELL", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "300", "connection_port": 5985}, "editables": {"create_spec": {"resources": {"disk_list": {}}}}, "os_type": "Windows", "type": "AHV_VM", "create_spec": {"backup_policy": null, "type": "", "name": "MSSQL-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"power_state": "ON", "guest_tools": null, "boot_config": {"boot_device": {"type": "", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}, "type": "", "mac_address": ""}, "hardware_clock_timezone": "", "guest_customization": null, "type": "", "disk_list": []}, "availability_zone_reference": null}, "variable_list": [], "name": "AHV_MSSQL"}, {"description": "", "action_list": [], "readiness_probe": {"connection_type": "POWERSHELL", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "300", "connection_port": 5985}, "editables": {"create_spec": {"resources": {"disk_list": {}}}}, "os_type": "Windows", "type": "AHV_VM", "create_spec": {"backup_policy": null, "type": "", "name": "DDC-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"power_state": "ON", "guest_tools": null, "boot_config": {"boot_device": {"type": "", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}, "type": "", "mac_address": ""}, "hardware_clock_timezone": "", "guest_customization": null, "type": "", "disk_list": []}, "availability_zone_reference": null}, "variable_list": [], "name": "AHV_DDC"}, {"description": "", "action_list": [], "readiness_probe": {"connection_type": "POWERSHELL", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "300", "connection_port": 5985}, "editables": {"create_spec": {"resources": {"disk_list": {}}}}, "os_type": "Windows", "type": "AHV_VM", "create_spec": {"backup_policy": null, "type": "", "name": "StoreFront-@@{calm_application_name}@@-@@{calm_array_index}@@", "resources": {"power_state": "ON", "guest_tools": null, "boot_config": {"boot_device": {"type": "", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}, "type": "", "mac_address": ""}, "hardware_clock_timezone": "", "guest_customization": null, "type": "", "disk_list": []}, "availability_zone_reference": null}, "variable_list": [], "name": "AHV_StoreFront"}], "credential_definition_list": [{"username": "administrator", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "type": "PASSWORD", "description": "", "name": "LOCAL"}, {"username": "administrator@example.com", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "type": "PASSWORD", "description": "", "name": "DOMAIN_CRED"}, {"username": "admin", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "type": "PASSWORD", "description": "", "name": "PE_CREDS"}, {"username": "example\\administrator", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "type": "PASSWORD", "description": "", "name": "SQL_CREDS"}, {"username": "administrator", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "type": "PASSWORD", "description": "", "name": "KARAN_CRED"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "MSSQL"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}, {"kind": "app_task", "name": "AddToDomain"}, {"kind": "app_task", "name": "Sleep"}, {"kind": "app_task", "name": "Create VG"}, {"kind": "app_task", "name": "Attach VG"}, {"kind": "app_task", "name": "Connect Mount VG"}, {"kind": "app_task", "name": "Install FC"}, {"kind": "app_task", "name": "EnableLocalMode"}, {"kind": "app_task", "name": "Configure WSFC"}, {"kind": "app_task", "name": "Install SQL"}, {"kind": "app_task", "name": "Apply OS BPG"}, {"kind": "app_task", "name": "Apply SQL BPG"}, {"kind": "app_task", "name": "Enable AAG"}, {"kind": "app_task", "name": "Create AAG"}, {"kind": "app_task", "name": "DisableLocalMode"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "AddToDomain"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Sleep"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Create VG"}}, {"from_task_reference": {"kind": "app_task", "name": "Create VG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Attach VG"}}, {"from_task_reference": {"kind": "app_task", "name": "Attach VG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Connect Mount VG"}}, {"from_task_reference": {"kind": "app_task", "name": "Connect Mount VG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Install FC"}}, {"from_task_reference": {"kind": "app_task", "name": "Install FC"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Configure WSFC"}}, {"from_task_reference": {"kind": "app_task", "name": "Configure WSFC"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Install SQL"}}, {"from_task_reference": {"kind": "app_task", "name": "Install SQL"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Apply OS BPG"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply OS BPG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Apply SQL BPG"}}, {"from_task_reference": {"kind": "app_task", "name": "Apply SQL BPG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Enable AAG"}}, {"from_task_reference": {"kind": "app_task", "name": "Enable AAG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Create AAG"}}, {"from_task_reference": {"kind": "app_task", "name": "Create AAG"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "ddaf74d2_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n# -*- Enabling and starting 'msiscsi'\nSet-Service -Name msiscsi -StartupType Automatic\nStart-Service msiscsi\n# -*- Change first Ehternet adapter name to 'Production'\nGet-NetAdapter -Name \"Ethernet\" | Rename-NetAdapter -NewName \"Production\" -ErrorAction SilentlyContinue\n# -*- Download SQL Updates\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/ISOs/SQLServer2014-KB4052725-x64.exe\",\"$TempDirectory\\SQLServer2014-KB4052725-x64.exe\")"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"MSSQL-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "AddToDomain"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "static", "type": "", "command_line_args": "", "exit_status": [], "script": "#script\nsleep(30)"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Sleep"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\n$ContainerURL = $BaseURL+\"storage_containers\"\n\ntry {\n  $ContainerList = invoke-RestMethod -Uri $ContainerURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n  $ContainerUUID = $ContainerList.entities | where { $_.name -eq \"@@{Nutanix_Container_Name}@@\"} | select storage_container_uuid\n  $ContainerUUID = $ContainerUUID.storage_container_uuid\n\n$Body = @\"\n{\n  \"disk_list\": [\n    {\n      \"create_config\": {\n        \"size\": 1073741824,\n\t\"storage_container_uuid\": \"$ContainerUUID\"\n      },\n      \"index\": 0\n    }\n  ],\n  \"is_shared\": true,\n  \"name\": \"@@{Volume_GroupName}@@\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.task_uuid -eq $null) {\n    Write-Output \"Error while creating volume group\"\n    exit 1\n}"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Create VG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "\n$MsSQL1_iSCSI_IQN = (Get-InitiatorPort).NodeAddress\n\n$PrismIP = \"@@{PE_IP}@@\"\n$PrismUser = \"@@{PE_CREDS.username}@@\"\n$PrismPass = \"@@{PE_CREDS.secret}@@\"\n\nadd-type @\"\n    using System.Net;\n    using System.Security.Cryptography.X509Certificates;\n    public class TrustAllCertsPolicy : ICertificatePolicy {\n        public bool CheckValidationResult(\n            ServicePoint srvPoint, X509Certificate certificate,\n            WebRequest request, int certificateProblem) {\n            return true;\n        }\n    }\n\"@\n[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n$BaseURL = \"https://\" + $PrismIP + \":9440/PrismGateway/services/rest/v2.0/\"\n$Header = @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PrismUser+\":\"+$PrismPass))}\n$Type = \"application/json\"\n\n$VolumeGroupURL = $BaseURL+\"volume_groups\"\ntry {\n\t$VolumeGroupList = invoke-RestMethod -Uri $VolumeGroupURL -Method Get -TimeoutSec 100 -Headers $Header -ContentType $Type\n\t$VolumeGroupUUID = $VolumeGroupList.entities | where { $_.name -eq \"@@{Volume_GroupName}@@\"} | select uuid\n\t$VolumeGroupUUID = $VolumeGroupUUID.uuid\n\n\t$VolumeGroupAttachURL = $VolumeGroupURL+\"/$VolumeGroupUUID\"+\"/open\"\n\n$Body = @\"\n{\n  \"iscsi_client\": {\n    \"client_address\": \"$MsSQL1_iSCSI_IQN\"\n  },\n  \"operation\": \"ATTACH\"\n}\n\"@\n\n\t$status=Invoke-RestMethod -Uri $VolumeGroupAttachURL -Method Post -TimeoutSec 100 -Headers $Header -ContentType $Type -Body $Body\n}\ncatch {\n    Write-output \"$_\"\n}\n\nif ($status.value -ne $true) {\n    Write-Output \"Error while attaching volume group \"\n    exit 1\n}\nsleep 3"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Attach VG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "New-IscsiTargetPortal -TargetPortalAddress @@{PE_DATA_SERVICE_IP}@@\nGet-IscsiTarget | Connect-IscsiTarget -IsPersistent $true\n\n#Initialize Disks\nif (((Get-Disk -Number 1 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\") -and ((Get-Disk -Number 2 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\")) {\n\tGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\n\tGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\n\tNew-Partition -DiskNumber 1 -UseMaximumSize -DriveLetter E -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Data\" \n\tNew-Partition -DiskNumber 2 -UseMaximumSize -DriveLetter F -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Logs\"\n} else {\n\tWrite-Ou tput \"Disks does not exists or not healthy.`nIf you havent added disks please add 2 disk.`n `t - Data : 200GB`n `t - Logs : 100GB\"\n\texit 1\n}\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  if ((Get-Disk -Number 3 -ErrorAction SilentlyContinue).HealthStatus -eq \"Healthy\"){\n      Get-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\n      New-Partition -DiskNumber 3 -UseMaximumSize -DriveLetter G -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false -FileSystem NTFS -NewFileSystemLabel \"Witness\" \n  } else {\n      Write-Output \"Witness Disk does not exists or not healthy.`nIf you havent added disks please add a volume group and attach.`n `t - Witness : 1GB\"\n      exit 1\n  }\n}"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Connect Mount VG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools\n\nif (-not (get-WindowsFeature -Name Failover-Clustering -ErrorAction SilentlyContinue | select -ExpandProperty Installed)){\n\tWrite-output \"Failover Clustering is not installed\"\n\texit 1\n}"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Install FC"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "EnableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "if (\"@@{calm_array_index}@@\" -ne \"0\"){\n\texit\n}\n$adminname=\"@@{DOMAIN_CRED.username}@@\"\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n\n$testScript = {\n\t$Nodes=\"@@{calm_array_address}@@\".split(',')\n    if(Test-Cluster -Node $Nodes){\n        Return $True\n    }\n    else\n    {\n        Return $False\n    }\n} \n\n$TestStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $testScript\n\nif ($TestStatus -eq $false){\nWrite-Output \"Failed\"\nExit 1\n}\n\n$ClusterCreate = {\n    #Import-Module FailoverClusters\n    $Nodes=\"@@{calm_array_address}@@\".split(',')\n    New-Cluster -Name @@{FAILOVER_CLUSTER_NAME}@@ -Node $Nodes -StaticAddress @@{FAILOVER_VIP}@@\n} \n\n$ClusterStatus = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $ClusterCreate\n\nif (!$ClusterStatus.Name){\n    Write-Output \"Failed creating CLuster\"\n}\n\n$RenameClusterDisks = {\n    #Rename Cluster Disks\n    $ClusterDisks =  Get-CimInstance -ClassName MSCluster_Resource -Namespace root/mscluster -Filter \"type = 'Physical Disk'\"\n    foreach ($Disk in $ClusterDisks) {\n    $DiskResource = Get-CimAssociatedInstance -InputObject $Disk -ResultClass MSCluster_DiskPartition\n        if (-not ($DiskResource.VolumeLabel -eq $Disk.Name)) {\n        Invoke-CimMethod -InputObject $Disk -MethodName Rename -Arguments @{newName = $DiskResource.VolumeLabel}\n        }\n    }\n} \n\nInvoke-Command -ComputerName @@{address}@@ -Credential $credential -Authentication Credssp $RenameClusterDisks", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Configure WSFC"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "$Script = {\n\n    Install-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop \"Net-Framework-Core\"\n    $DOMAINNAME=(Get-WmiObject Win32_ComputerSystem).Domain\n    $setupDriveLetter = \"D:\"\n    $setupPath = \"$setupDriveLetter\\setup.exe\"\n    #$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,REPLICATION,FULLTEXT,DQ,AS,RS,RS_SHP,RS_SHPWFE,DQC,CONN,IS,BC,SDK,BOL,SSMS,ADV_SSMS,DREPLAY_CTLR,DREPLAY_CLT,SNAC_SDK,MDS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$silentArgs = \"/IACCEPTSQLSERVERLICENSETERMS /Q /ACTION=install /FEATURES=SQLENGINE,FULLTEXT,SSMS,ADV_SSMS /AGTSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /AGTSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /SQLSVCPASSWORD=@@{SQL_CREDS.secret}@@ /SQLSYSADMINACCOUNTS=`\"$DOMAINNAME\\Domain Admins`\" /ISSVCACCOUNT=`\"@@{SQL_CREDS.username}@@`\" /ISSVCPASSWORD=@@{SQL_CREDS.secret}@@ /ASSYSADMINACCOUNTS=`\"@@{SQL_CREDS.username}@@`\" /INSTANCEID=MSSQLSERVER /INSTANCENAME=MSSQLSERVER /UPDATEENABLED=True /UPDATESOURCE=`\"C:\\Temp`\" /INDICATEPROGRESS /TCPENABLED=1 /INSTALLSQLDATADIR=`\"E:\\MSSQL`\" /SQLUSERDBLOGDIR=`\"F:\\MSSQL`\" /SQLTEMPDBLOGDIR=`\"F:\\MSSQL`\"\"\n\t$validExitCodes = @(0)\n\n    $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n    $install.WaitForExit()\n    $exitCode = $install.ExitCode\n    $install.Dispose()\n    \n    Write-Output \"SQL Failover Cluster Installation exited with `'$exitCode`'.\"\n      if ($validExitCodes -notcontains $exitCode) {\n          Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n\t\t  exit 1\n    }\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Install SQL"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "\n$Script = {\n\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.7.1.7/data1/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $ntrights_cli = \"$TempDirectory\\Utils\\ntrights.exe\"\n  $PackageName = \"SQL Server Management Studio\"\n  $silentArgs = \"/install /quiet /norestart\"\n\n  #download utils\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  #unpack utils\n\n  Add-Type -assembly \"system.io.compression.filesystem\"\n  [io.compression.zipfile]::ExtractToDirectory($FilePath, $TempDirectory)\n\n\n  # OS related tunning\n  # Set Windows Power Options to High Performance\n  powercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n  #Grant Memory privileges to user \n  $selockmemoryprivilege = 'NT SERVICE\\MSSQLSERVER +r SeLockMemoryPrivilege'\n  $semanagevolumeprivilege = 'NT SERVICE\\MSSQLSERVER +r SeManageVolumePrivilege'\n\n  & $ntrights_cli -u $selockmemoryprivilege \n  & $ntrights_cli -u $semanagevolumeprivilege\n\n\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Apply OS BPG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "$Script = {\n  $start_time = Get-Date\n\n  $TempDirectory = \"C:\\Temp\"\n  $url = \"http://10.68.88.221/calm/Utils.zip\"\n  $filePath = \"$TempDirectory\\Utils.zip\"\n  $sqladdparms_cli = \"$TempDirectory\\Utils\\Add-SqlServerStartupParameter.ps1\"\n  $TSQLSCRIPTSDIR = \"c:\\temp\\utils\\TSQL_Scripts\\All_versions\"\n  \n  #create directories\n  #mkdir F:\\SQLDATA01\\\n  #mkdir G:\\SQLDATA02\\\n  #mkdir H:\\TEMPDB01\\\n  #mkdir I:\\TEMPDB02\\\n  #mkdir L:\\UserDB-logs01\\\n  #mkdir T:\\TempDB-logs01\\\n  #mkdir R:\\SQLBACK\n\n\n  #ADD SQL T parameters \n  #T1117 This parameter forces MS SQL Server to grow all database files uniformly\n  #T1118 This parameter forces MS SQL Server to use full extents only\n  & $sqladdparms_cli '-T1117'\n  & $sqladdparms_cli '-T1118'\n  restart-service MSSQL* -force\n\n  #import powershell SQL module\n  import-module \"sqlps\" -DisableNameChecking\n\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\n  #invoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n  #Delete original SQL temp files\n  #stop-service MSSQL* \n  #rm \"E:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\n  #start-service MSSQL* \n  wmic useraccount get sid\n  Write-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n}\n     \n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $script -Authentication Credssp", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Apply SQL BPG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "$Script = {\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  Enable-SqlAlwaysOn -ServerInstance $(hostname) -Force \n  New-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\" -Name \"Endpoint_AG\" -Port 5022 -EncryptionAlgorithm Aes -Encryption Required \n  Set-SqlHADREndpoint -Path \"SQLSERVER:\\SQL\\$(hostname)\\DEFAULT\\Endpoints\\Endpoint_AG\" -State Started\n  Invoke-SqlCmd -Server $node.Name -Query $createLogin\n  Invoke-SqlCmd -Server $(hostname) -Query $grantConnectPermissions\n\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Enable AAG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "$Script = {\n  if (\"$(Get-ClusterNode | where {$_.Id -eq 1} | select -ExpandProperty Name)\" -ne \"$(hostname)\"){\n      exit\n  }\n  #Import-Module SQLPS -DisableNameCheckin\n  $AGName = '@@{SQL_CLUSTER_NAME}@@'\n  $PrimaryNode = $(hostname)\n  $IP = '@@{MSSQL_VIP}@@/255.255.240.0'\n  $replicas = @()\n\n  #Variable for T-SQL command\n  $netbios = \"@@{DOMAIN}@@\".Split(\".\")[0].ToUpper()\n  $createLogin = \"CREATE LOGIN [$netbios\\sqlservice] FROM WINDOWS; \" \n  $grantConnectPermissions = \"GRANT CONNECT ON ENDPOINT::Endpoint_AG TO [$netbios\\sqlservice];\"\n\n  $cname = (Get-Cluster -name $PrimaryNode).name\n  $nodes = (get-clusternode -Cluster $cname).name\n\n  #List all of the WSFC nodes all WSFC nodes; all SQL Server instances run DEFAULT instances\n  foreach($node in $nodes)\n  {\n      $replicas += New-SqlAvailabilityReplica -Name $node -EndpointUrl \"TCP://$node.example.com:5022\" -AvailabilityMode \"SynchronousCommit\" -FailoverMode \"Automatic\" -AsTemplate -Version 12 \n  }\n\n\n  New-SqlAvailabilityGroup -Name $AGName -Path \"SQLSERVER:\\SQL\\$PrimaryNode\\DEFAULT\" -AvailabilityReplica $replicas\n  $nodes | Where-Object {$_ -ne $PrimaryNode} | ForEach-Object {Join-SqlAvailabilityGroup -path \"SQLSERVER:\\SQL\\$_\\DEFAULT\" -Name $AGName}\n  New-SqlAvailabilityGroupListener -Name $AGName -staticIP $IP -Port 1433 -Path \"SQLSERVER:\\Sql\\$PrimaryNode\\DEFAULT\\AvailabilityGroups\\$AGName\"\n}\n\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{DOMAIN_CRED.secret}@@\"\n$Creds = New-Object System.Management.Automation.PSCredential(\"@@{DOMAIN_CRED.username}@@\",$adminpassword)\n\nInvoke-Command -ComputerName @@{address}@@ -Credential $Creds -ScriptBlock $Script -Authentication Credssp\n", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Create AAG"}, {"target_any_local_reference": {"kind": "app_service", "name": "MSSQL"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "DisableLocalMode"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "ddaf74d2_dag"}, "name": "0561ade3_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV MSSQL Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "7bf7eecb_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "7bf7eecb_dag"}, "name": "f564b0c1_runbook"}}, "variable_list": [], "name": "AHV MSSQL Package"}, {"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "DDC"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}, {"kind": "app_task", "name": "AddToDomain"}, {"kind": "app_task", "name": "Sleep"}, {"kind": "app_task", "name": "InstallController"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "AddToDomain"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Sleep"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "InstallController"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "7fcb2293_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"DDC-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "AddToDomain"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "static", "type": "", "command_line_args": "", "exit_status": [], "script": "#script\nsleep(30)"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Sleep"}, {"target_any_local_reference": {"kind": "app_service", "name": "DDC"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "<#\nInstalls Xendesktop components.\nFirst instance would be installed with CONTROLLER,DESKTOPSTUDIO,LICENSESERVER.\nAnd remaining instances would be installed with CONTROLLER,DESKTOPSTUDIO.\n#>\n\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nif (\"@@{calm_array_index}@@\" -eq \"0\"){\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO,LICENSESERVER\"\n}\nelse{\n  InstallCitrixComponents $XenDesktopServerSetup \"CONTROLLER,DESKTOPSTUDIO\"\n}\n\n<#\nDownloads and installs nutanix citrix plugin\n#>\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n$NutanixAcropolisPlugin = \"@@{NutanixAcropolisPlugin}@@\"\n$NutanixAcropolisPluginFilePath = \"$TempDirectory\\NutanixAcropolis.msi\"\n$NutanixAcropolisPluginInstallPath = \"@@{NutanixAcropolis_Installed_Path}@@\"\n\nWrite-Output \"Downloading the pulgin\"\ntry{\n  (New-Object System.Net.WebClient).DownloadFile($NutanixAcropolisPlugin,$NutanixAcropolisPluginFilePath)\n  Write-Output \"Pulgin has been downloaded\"\n\n  msiexec /i $NutanixAcropolisPluginFilePath /qn\n  sleep(40)\n  Rename-Item -LiteralPath C:\\[INSTALLFOLDER] -NewName \"NutanixAcropolis\"\n  Move-Item -Path C:\\NutanixAcropolis -Destination \"$NutanixAcropolisPluginInstallPath\"\n\n  & \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\RegisterPlugins.exe\" -PluginsRoot \"C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0\"\n\n  Restart-Service -Name \"Citrix Host Service\"\n  Restart-Service -Name \"Citrix Broker Service\"\n  Restart-Service -Name \"Citrix Machine Creation Service\"\n}\ncatch\n{\n\tWrite-Output \"$_\"\n    exit 1\n}"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "InstallController"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "7fcb2293_dag"}, "name": "ff975c07_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV DDC Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "5d9a3914_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "5d9a3914_dag"}, "name": "086f090e_runbook"}}, "variable_list": [], "name": "AHV DDC Package"}, {"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "StoreFront"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}, {"kind": "app_task", "name": "EnableLocalMode"}, {"kind": "app_task", "name": "DotNetCheck"}, {"kind": "app_task", "name": "DisableLocalMode"}, {"kind": "app_task", "name": "AddToDomain"}, {"kind": "app_task", "name": "Sleep"}, {"kind": "app_task", "name": "InstallStoreFront"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "PackageInstallTask"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "EnableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "DotNetCheck"}}, {"from_task_reference": {"kind": "app_task", "name": "DotNetCheck"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "DisableLocalMode"}}, {"from_task_reference": {"kind": "app_task", "name": "DisableLocalMode"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "AddToDomain"}}, {"from_task_reference": {"kind": "app_task", "name": "AddToDomain"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Sleep"}}, {"from_task_reference": {"kind": "app_task", "name": "Sleep"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "InstallStoreFront"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "7f665a14_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "# -*- Pre-requisite to enable credssp and set 'Server' role\nEnable-WSManCredSSP -Role Server -Force\n<#\n$TempDirectory = \"C:\\Temp\"\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n#(New-Object System.Net.WebClient).DownloadFile(\"http://10.7.1.7/data1/software/Citrix-XD/XenApp_and_XenDesktop_7_11.iso\",\"$TempDirectory\\XenApp_and_XenDesktop_7_11.iso\")\n\nWrite-Output \"Installing Dotnet 4.5.2\"\n\n$FileContent = {\n  # DotNet542 install\n\n  $version = \"DotNet542\"\n  $TempDirectory = \"C:\\Temp\"\n  $HOSTNAME=$(hostname)\n  if ($version -eq \"DotNet542\"){\n      $PackageName = \"DotNet542\"\n      $url = \"http://download.microsoft.com/download/E/2/1/E21644B5-2DF2-47C2-91BD-63C560427900/NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $silentArgs = \"/Passive /NoRestart /Log $TempDirectory\\net452.log\"\n      $filePath = \"$TempDirectory\\NDP452-KB2901907-x86-x64-AllOS-ENU.exe\"\n      $setupPath = $filePath\n      $fileType = 'exe'\n      $validExitCodes = @(0, 3010)\n  } \n\n  New-Item -ItemType Directory -Force -Path $TempDirectory\n  (New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n  Write-Output \"Installing $PackageName....\"\n\n  $secpasswd = ConvertTo-SecureString \"@@{LOCAL.secret}@@\" -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$secpasswd)\n\n  $install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru -Credential $credential\n  $install.WaitForExit()\n\n  $exitCode = $install.ExitCode\n  $install.Dispose()\n\n  Write-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\n  if ($validExitCodes -notcontains $exitCode) {\n      Write-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\n  }\n  Restart-Computer -Force\n}\nAdd-Content \"$TempDirectory\\DotnetInstall.ps1\" -Value $FileContent\n\nNew-ItemProperty -Path HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce -Name DotnetInstall -PropertyType String -Value \"powershell.exe -file $TempDirectory\\DotnetInstall.ps1\"\n\nWrite-Output \"Getting ready for autologin\"\n$DefaultUsername = \"@@{LOCAL.username}@@\"\n$DefaultPassword = \"@@{LOCAL.secret}@@\"\n$AutoLogonCount = 1\n\n$RegPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\"\n$RegROPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\"\nSet-ItemProperty $RegPath \"AutoAdminLogon\" -Value \"1\" -type String  \nSet-ItemProperty $RegPath \"DefaultUsername\" -Value \"$DefaultUsername\" -type String  \nSet-ItemProperty $RegPath \"DefaultPassword\" -Value \"$DefaultPassword\" -type String\nSet-ItemProperty $RegPath \"AutoLogonCount\" -Value \"$AutoLogonCount\" -type DWord            \nRestart-Computer -Force\n#>"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=LOCAL\"\nsleep(1)", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "EnableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "exit 0\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"@@{LOCAL.secret}@@\"\n$credential = New-Object System.Management.Automation.PSCredential(\"@@{LOCAL.username}@@\",$adminpassword)\n\n$Script = {\n\tGet-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full' -Name Release -ErrorAction SilentlyContinue | select -ExpandProperty Release -ErrorAction SilentlyContinue\n}\n$Version=$Null\nDo{\n\t$Version = Invoke-Command -ComputerName @@{address}@@ -Credential $credential -ErrorAction SilentlyContinue -ScriptBlock $Script\n\tStart-Sleep -Seconds 10\n\tWrite-Output \"Dotnet version is '$Version', has to be '379893'\"\n}Until ($Version -eq \"379893\")\n\nWrite-output \"Dotnet installed properly\"", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "KARAN_CRED"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "DotNetCheck"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"EXECUTION_MODE=\"", "eval_variables": ["EXECUTION_MODE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "DisableLocalMode"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"StoreFront-@@{calm_random}@@\"\n\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Host \"Hostname already set.\"\n  } else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    $adminname = \"$DomainName\\$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Host \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "AddToDomain"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "static", "type": "", "command_line_args": "", "exit_status": [], "script": "#script\nsleep(30)"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Sleep"}, {"target_any_local_reference": {"kind": "app_service", "name": "StoreFront"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "<#\nInstalls Xendesktop components.\nAll the instances would be installed with STOREFRONT.\n#>\nfunction InstallCitrixComponents{\n        param(\n        [Parameter(Mandatory=$true)][string] $XenDesktopServerSetup,\n        [Parameter(Mandatory=$true)][string] $Components,\n        [Parameter(Mandatory=$false)][string] $Arguements\n    )\n\n    & \"$XenDesktopServerSetup\" /quiet /nosql /configure_firewall /components $Components $Arguements\n\n}\n$DriveLetter = \"D:\"\n$XenDesktopServerSetup = \"$DriveLetter\\x64\\XenDesktop Setup\\XenDesktopServerSetup.exe\"\n\nInstallCitrixComponents $XenDesktopServerSetup \"STOREFRONT\""}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "InstallStoreFront"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "7f665a14_dag"}, "name": "113a7553_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "AHV StoreFront Package"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "6f2933d9_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "6f2933d9_dag"}, "name": "04e28c7a_runbook"}}, "variable_list": [], "name": "AHV StoreFront Package"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "AHV MSSQL Package"}], "min_replicas": "2", "max_replicas": "2", "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_MSSQL"}, "type": "GREENFIELD", "variable_list": [], "name": "5aed8000_deployment"}, {"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "AHV DDC Package"}], "min_replicas": "2", "max_replicas": "2", "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_DDC"}, "type": "GREENFIELD", "variable_list": [], "name": "c693df12_deployment"}, {"name": "fc5a5e8b_deployment", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "AHV StoreFront Package"}], "editables": {"min_replicas": true, "max_replicas": true}, "min_replicas": "2", "max_replicas": "2", "substrate_local_reference": {"kind": "app_substrate", "name": "AHV_StoreFront"}, "type": "GREENFIELD", "variable_list": [], "description": ""}], "variable_list": [{"val_type": "STRING", "description": "", "value": "example.com", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "DOMAIN"}, {"val_type": "STRING", "description": "", "value": "10.5.72.24", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "AD_IP"}, {"val_type": "STRING", "description": "", "value": "10.15.162.16", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PE_IP"}, {"val_type": "STRING", "description": "", "value": "10.15.160.39", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PE_DATA_SERVICE_IP"}, {"val_type": "STRING", "description": "", "value": "default-container-68487138180358", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "Nutanix_Container_Name"}, {"val_type": "STRING", "description": "", "value": "SQL_VolumeGroup51", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "Volume_GroupName"}, {"val_type": "STRING", "description": "", "value": "NTNX-CLS51", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "FAILOVER_CLUSTER_NAME"}, {"val_type": "STRING", "description": "", "value": "NTNX-SQLCLS51", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "SQL_CLUSTER_NAME"}, {"val_type": "STRING", "description": "", "value": "10.15.163.253", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "FAILOVER_VIP"}, {"val_type": "STRING", "description": "", "value": "10.15.163.254", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "MSSQL_VIP"}, {"val_type": "STRING", "description": "", "value": "http://10.7.1.7/data1/software/Citrix-XD/NutanixAcropolis-MCS-XD7.9_or_later_v1.1.0.0.msi", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "NutanixAcropolisPlugin"}, {"val_type": "STRING", "description": "", "value": "C:\\Program Files\\Common Files\\Citrix\\HCLPlugins\\CitrixMachineCreation\\v1.0.0.0", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "NutanixAcropolis_Installed_Path"}, {"val_type": "STRING", "description": "", "value": "BLR", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "XD_SITE_NAME"}, {"val_type": "STRING", "description": "", "value": "vlan.0", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CVM_NETWORK"}, {"val_type": "STRING", "description": "", "value": "10.7.2.227", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CVM_IP"}, {"val_type": "STRING", "description": "", "value": "admin", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CVM_USERNAME"}, {"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"is_secret_modified": false, "secret_reference": {}, "type": ""}, "editables": {"value": true}, "type": "SECRET", "name": "CVM_PASSWORD"}], "description": "", "action_list": [], "name": "Nutanix"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL"}, "type": "USER", "client_attrs": {"DDC": {"y": 80, "x": 600}, "MSSQL": {"y": 80, "x": 340}, "StoreFront": {"y": 80, "x": 860}}}, "name": "Xen-Desktop-2016"}, "api_version": "3.0", "metadata": {"last_update_time": "1524461164489809", "creation_time": "1523523660978705", "kind": "blueprint", "spec_version": 49, "name": "Xen-Desktop-2016"}}